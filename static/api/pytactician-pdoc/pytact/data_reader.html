<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>pytact.data_reader API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../pytact.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;pytact</a>

<a href="http://coq-tactician.github.io">            <img src="https://coq-tactician.github.io/images/logo.png" class="logo" alt="project logo"/>
</a>
            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#reading-a-dataset">Reading a dataset</a></li>
  <li><a href="#communicating-with-a-coq-process">Communicating with a Coq process</a>
  <ul>
    <li><a href="#highlevel-interface">Highlevel interface</a></li>
    <li><a href="#lowlevel-interface">Lowlevel interface</a></li>
  </ul></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#file_dataset_reader">file_dataset_reader</a>
            </li>
            <li>
                    <a class="class" href="#LowlevelDataReader">LowlevelDataReader</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#LowlevelDataReader.graphid_by_filename">graphid_by_filename</a>
                        </li>
                        <li>
                                <a class="variable" href="#LowlevelDataReader.graph_files">graph_files</a>
                        </li>
                        <li>
                                <a class="function" href="#LowlevelDataReader.local_to_global">local_to_global</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#lowlevel_data_reader">lowlevel_data_reader</a>
            </li>
            <li>
                    <a class="variable" href="#ProofStateId">ProofStateId</a>
            </li>
            <li>
                    <a class="variable" href="#TacticId">TacticId</a>
            </li>
            <li>
                    <a class="variable" href="#GraphId">GraphId</a>
            </li>
            <li>
                    <a class="variable" href="#NodeId">NodeId</a>
            </li>
            <li>
                    <a class="variable" href="#NodeHash">NodeHash</a>
            </li>
            <li>
                    <a class="class" href="#Node">Node</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Node.graph">graph</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.nodeid">nodeid</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.label">label</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.identity">identity</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.children">children</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.definition">definition</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ProofState">ProofState</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ProofState.lowlevel">lowlevel</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.root">root</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.context">context</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.context_names">context_names</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.context_text">context_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.conclusion_text">conclusion_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.text">text</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofState.id">id</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#Unresolvable">Unresolvable</a>
            </li>
            <li>
                    <a class="variable" href="#Unknown">Unknown</a>
            </li>
            <li>
                    <a class="class" href="#Outcome">Outcome</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Outcome.tactic">tactic</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.lowlevel">lowlevel</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.before">before</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.after">after</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.term">term</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.term_text">term_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#Outcome.tactic_arguments">tactic_arguments</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ProofStep">ProofStep</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ProofStep.lowlevel">lowlevel</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofStep.tactic">tactic</a>
                        </li>
                        <li>
                                <a class="variable" href="#ProofStep.outcomes">outcomes</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Original">Original</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#Discharged">Discharged</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Discharged.__init__">Discharged</a>
                        </li>
                        <li>
                                <a class="variable" href="#Discharged.original">original</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Substituted">Substituted</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Substituted.__init__">Substituted</a>
                        </li>
                        <li>
                                <a class="variable" href="#Substituted.original">original</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Inductive">Inductive</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Inductive.__init__">Inductive</a>
                        </li>
                        <li>
                                <a class="variable" href="#Inductive.representative">representative</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Constructor">Constructor</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Constructor.__init__">Constructor</a>
                        </li>
                        <li>
                                <a class="variable" href="#Constructor.representative">representative</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Projection">Projection</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Projection.__init__">Projection</a>
                        </li>
                        <li>
                                <a class="variable" href="#Projection.representative">representative</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ManualConstant">ManualConstant</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#TacticalConstant">TacticalConstant</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticalConstant.__init__">TacticalConstant</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticalConstant.proof">proof</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ManualSectionConstant">ManualSectionConstant</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#TacticalSectionConstant">TacticalSectionConstant</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticalSectionConstant.__init__">TacticalSectionConstant</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticalSectionConstant.proof">proof</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Definition">Definition</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Definition.node">node</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.lowlevel">lowlevel</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.previous">previous</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.external_previous">external_previous</a>
                        </li>
                        <li>
                                <a class="function" href="#Definition.global_context">global_context</a>
                        </li>
                        <li>
                                <a class="function" href="#Definition.clustered_global_context">clustered_global_context</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.status">status</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.kind">kind</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.proof">proof</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.cluster_representative">cluster_representative</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.cluster">cluster</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.type_text">type_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.term_text">term_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#Definition.is_file_representative">is_file_representative</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Dataset">Dataset</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Dataset.graph">graph</a>
                        </li>
                        <li>
                                <a class="variable" href="#Dataset.filename">filename</a>
                        </li>
                        <li>
                                <a class="variable" href="#Dataset.lowlevel">lowlevel</a>
                        </li>
                        <li>
                                <a class="variable" href="#Dataset.dependencies">dependencies</a>
                        </li>
                        <li>
                                <a class="variable" href="#Dataset.representative">representative</a>
                        </li>
                        <li>
                                <a class="function" href="#Dataset.definitions">definitions</a>
                        </li>
                        <li>
                                <a class="function" href="#Dataset.clustered_definitions">clustered_definitions</a>
                        </li>
                        <li>
                                <a class="variable" href="#Dataset.module_name">module_name</a>
                        </li>
                        <li>
                                <a class="function" href="#Dataset.node_by_id">node_by_id</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#lowlevel_to_highlevel">lowlevel_to_highlevel</a>
            </li>
            <li>
                    <a class="function" href="#data_reader">data_reader</a>
            </li>
            <li>
                    <a class="class" href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OnlineDefinitionsReader.local_to_global">local_to_global</a>
                        </li>
                        <li>
                                <a class="variable" href="#OnlineDefinitionsReader.representative">representative</a>
                        </li>
                        <li>
                                <a class="function" href="#OnlineDefinitionsReader.definitions">definitions</a>
                        </li>
                        <li>
                                <a class="function" href="#OnlineDefinitionsReader.clustered_definitions">clustered_definitions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#online_definitions_initialize">online_definitions_initialize</a>
            </li>
            <li>
                    <a class="function" href="#empty_online_definitions_initialize">empty_online_definitions_initialize</a>
            </li>
            <li>
                    <a class="function" href="#online_data_predict">online_data_predict</a>
            </li>
            <li>
                    <a class="class" href="#TacticPredictionGraph">TacticPredictionGraph</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticPredictionGraph.__init__">TacticPredictionGraph</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionGraph.ident">ident</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionGraph.arguments">arguments</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionGraph.confidence">confidence</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TacticPredictionsGraph">TacticPredictionsGraph</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticPredictionsGraph.__init__">TacticPredictionsGraph</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionsGraph.predictions">predictions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TacticPredictionText">TacticPredictionText</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticPredictionText.__init__">TacticPredictionText</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionText.tactic_text">tactic_text</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionText.confidence">confidence</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#TacticPredictionsText">TacticPredictionsText</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#TacticPredictionsText.__init__">TacticPredictionsText</a>
                        </li>
                        <li>
                                <a class="variable" href="#TacticPredictionsText.predictions">predictions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CheckAlignmentMessage">CheckAlignmentMessage</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#CheckAlignmentResponse">CheckAlignmentResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CheckAlignmentResponse.__init__">CheckAlignmentResponse</a>
                        </li>
                        <li>
                                <a class="variable" href="#CheckAlignmentResponse.unknown_definitions">unknown_definitions</a>
                        </li>
                        <li>
                                <a class="variable" href="#CheckAlignmentResponse.unknown_tactics">unknown_tactics</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GlobalContextMessage">GlobalContextMessage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GlobalContextMessage.__init__">GlobalContextMessage</a>
                        </li>
                        <li>
                                <a class="variable" href="#GlobalContextMessage.definitions">definitions</a>
                        </li>
                        <li>
                                <a class="variable" href="#GlobalContextMessage.tactics">tactics</a>
                        </li>
                        <li>
                                <a class="variable" href="#GlobalContextMessage.log_annotation">log_annotation</a>
                        </li>
                        <li>
                                <a class="variable" href="#GlobalContextMessage.prediction_requests">prediction_requests</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#capnp_message_generator_lowlevel">capnp_message_generator_lowlevel</a>
            </li>
            <li>
                    <a class="function" href="#capnp_message_generator_from_file_lowlevel">capnp_message_generator_from_file_lowlevel</a>
            </li>
            <li>
                    <a class="function" href="#record_lowlevel_generator">record_lowlevel_generator</a>
            </li>
            <li>
                    <a class="function" href="#prediction_generator">prediction_generator</a>
            </li>
            <li>
                    <a class="function" href="#capnp_message_generator">capnp_message_generator</a>
            </li>
            <li>
                    <a class="function" href="#capnp_message_generator_from_file">capnp_message_generator_from_file</a>
            </li>
            <li>
                    <a class="class" href="#GlobalContextSets">GlobalContextSets</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GlobalContextSets.__init__">GlobalContextSets</a>
                        </li>
                        <li>
                                <a class="function" href="#GlobalContextSets.global_context_set">global_context_set</a>
                        </li>
                        <li>
                                <a class="function" href="#GlobalContextSets.sub_context">sub_context</a>
                        </li>
                        <li>
                                <a class="function" href="#GlobalContextSets.new_context">new_context</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#node_dependencies">node_dependencies</a>
            </li>
            <li>
                    <a class="function" href="#definition_dependencies">definition_dependencies</a>
            </li>
    </ul>


            <footer>PyTactician</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                        <a class="pdoc-button git-button" href="https://github.com/coq-tactician/coq-tactician-api/tree/coq8.11/pytact/data_reader.py">Edit on GitHub</a>
                    <h1 class="modulename">
<a href="./../pytact.html">pytact</a><wbr>.data_reader    </h1>

                        <div class="docstring"><p>This module provides read access to dataset files of a Tactican API dataset.
Additionally, there is support for communicating with a Coq processes through
the same data-format. The next sections give an overview of how this can be
accomplished. For an overview of examples, see <code><a href="../pytact.html">pytact</a></code>.</p>

<h1 id="reading-a-dataset">Reading a dataset</h1>

<p>The dataset is mapped into memory using mmap, allowing random access to it's
structures while keeping memory low. This file contains three entry-points to a
dataset in order of preference:</p>

<ol>
<li>Contextmanager <code><a href="#data_reader">data_reader</a>(path)</code> provides high-level access to the data
in directory <code>path</code>. This is the preferred entry-point unless you need
something special.</li>
<li>Contextmanager <code><a href="#lowlevel_data_reader">lowlevel_data_reader</a>(path)</code> provides low-level access to
the data in directory <code>path</code>, giving direct access to the Cap'n Proto structures
of the dataset. Use this when <code><a href="#data_reader">data_reader</a></code> is too slow or you need access
to data not provided by <code><a href="#data_reader">data_reader</a></code>.</li>
<li>Contextmanager <code><a href="#file_dataset_reader">file_dataset_reader</a></code> provides low-level access to
the Cap'n Proto structures of a single file. Using this is usually not
advisable.</li>
</ol>

<p>Additionally, some indexing and traversal helpers are provided:</p>

<ul>
<li><code><a href="#GlobalContextSets">GlobalContextSets</a></code> calculates and caches the global context of a definition
as a set, also caching intermediate results.</li>
<li><code><a href="#definition_dependencies">definition_dependencies</a></code> and <code><a href="#node_dependencies">node_dependencies</a></code> traverse the graph starting
from a node and return all direct, non-transitive definitions that node depends on.</li>
</ul>

<h1 id="communicating-with-a-coq-process">Communicating with a Coq process</h1>

<p>Communication with a Coq process can be done either through a high-level or
low-level interface.</p>

<h2 id="highlevel-interface">Highlevel interface</h2>

<p>The function <code><a href="#capnp_message_generator">capnp_message_generator</a></code> converts a socket into a nested generator that
yields request messages for predictions and expects to be sent response messages
in return. A simple example of how to handle these messages is in <code><a href="fake_python_server.html">pytact.fake_python_server</a></code>.
Some docs can be found with <code><a href="#capnp_message_generator">capnp_message_generator</a></code>.</p>

<p>The <code><a href="#capnp_message_generator">capnp_message_generator</a></code> function can also dump the sequence of messages send
and received to a file. One can then use <code><a href="#capnp_message_generator_from_file">capnp_message_generator_from_file</a></code> to replay
that sequence against a server, either in a unit-test where the call to <code><a href="#capnp_message_generator">capnp_message_generator</a></code>
is mocked by <code><a href="#capnp_message_generator_from_file">capnp_message_generator_from_file</a></code>, or using a fully fledged socket test
as can be found in <code><a href="fake_coq_client.html">pytact.fake_coq_client</a></code>.</p>

<h2 id="lowlevel-interface">Lowlevel interface</h2>

<p>The function <code><a href="#capnp_message_generator_lowlevel">capnp_message_generator_lowlevel</a></code> converts a socket into a generator that
yields lowlevel Cap'n Proto request messages for predictions and expects to be sent Cap'n proto
messages in return. There are four types of messages <code>msg</code> Coq sends.</p>

<ol>
<li>Synchronize: If <code>msg.is_synchronize</code> is true, Coq is attempting to synchronize
its state with the server. A <code>PredictionProtocol.Response.synchronized</code> message is expected
in return.</li>
<li>Initialize: If <code>msg.is_initialize</code> is true, Coq is sending a list of available
tactics and a global context fragment to be added to an existing stack of global context
information. An empty stack can be created through <code><a href="#empty_online_definitions_initialize">empty_online_definitions_initialize</a></code>.
To add an initialize message to the stack, you can use
<pre><code>with <a href="#online_definitions_initialize">online_definitions_initialize</a>(existing_stack, msg) as definitions:
    print(type(definitions))
</code></pre>
Any subsequent messages will be made in the context of the
tactics and predictions sent in this message, until an initialize message is received
such that <code>msg.initialize.stack_size</code> is smaller than the current stack size.
A <code>PredictionProtocol.Response.initialized</code> message is expected in response of this message.</li>
<li>Predict: If <code>msg.is_predict</code> is true, Coq is asking to predict a list of plausible
tactics given a proof state. The proof state can be easily accessed using
<pre><code>with <a href="#online_data_predict">online_data_predict</a>(definitions, msg.predict) as proof_state:
    print(dir(proof_state))
</code></pre>
A <code>PredictionProtocol.Response.prediction</code> or <code>PredictionProtocol.Response.textPrediction</code>
message is expected in return.</li>
<li>Check Alignment: If <code>msg.is_check_alignment</code> is true, then Coq is asking the server
to check which tactics and definitions are known to it. A
<code>PredictionProtocol.Response.alignment</code> message is expected in return.</li>
</ol>

<p>You can wrap the generator produced by <code><a href="#capnp_message_generator_lowlevel">capnp_message_generator_lowlevel</a></code> into
<code><a href="#record_lowlevel_generator">record_lowlevel_generator</a></code> in order to record the exchanged messages to disk.
This trace can later be replayed using
<code><a href="#capnp_message_generator_from_file_lowlevel">capnp_message_generator_from_file_lowlevel</a></code> (or using the high-level interface).</p>
</div>

                        <input id="mod-data_reader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-data_reader-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># NOTE: This file is derived from data_reader.pyx. Any changes here should be reflected there as well.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">&quot;&quot;&quot;This module provides read access to dataset files of a Tactican API dataset.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">Additionally, there is support for communicating with a Coq processes through</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">the same data-format. The next sections give an overview of how this can be</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">accomplished. For an overview of examples, see `pytact`.</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd"># Reading a dataset</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">The dataset is mapped into memory using mmap, allowing random access to it&#39;s</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">structures while keeping memory low. This file contains three entry-points to a</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">dataset in order of preference:</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">1. Contextmanager `pytact.data_reader.data_reader(path)` provides high-level access to the data</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">   in directory `path`. This is the preferred entry-point unless you need</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">   something special.</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">2. Contextmanager `pytact.data_reader.lowlevel_data_reader(path)` provides low-level access to</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">   the data in directory `path`, giving direct access to the Cap&#39;n Proto structures</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">   of the dataset. Use this when `data_reader` is too slow or you need access</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">   to data not provided by `data_reader`.</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">3. Contextmanager `file_dataset_reader` provides low-level access to</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">   the Cap&#39;n Proto structures of a single file. Using this is usually not</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">   advisable.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">Additionally, some indexing and traversal helpers are provided:</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">- `GlobalContextSets` calculates and caches the global context of a definition</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">  as a set, also caching intermediate results.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">- `definition_dependencies` and `node_dependencies` traverse the graph starting</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">  from a node and return all direct, non-transitive definitions that node depends on.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd"># Communicating with a Coq process</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">Communication with a Coq process can be done either through a high-level or</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">low-level interface.</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">## Highlevel interface</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">The function `capnp_message_generator` converts a socket into a nested generator that</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">yields request messages for predictions and expects to be sent response messages</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">in return. A simple example of how to handle these messages is in `pytact.fake_python_server`.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">Some docs can be found with `capnp_message_generator`.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">The `capnp_message_generator` function can also dump the sequence of messages send</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">and received to a file. One can then use `capnp_message_generator_from_file` to replay</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">that sequence against a server, either in a unit-test where the call to `capnp_message_generator`</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">is mocked by `capnp_message_generator_from_file`, or using a fully fledged socket test</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">as can be found in `pytact.fake_coq_client`.</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">## Lowlevel interface</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">The function `capnp_message_generator_lowlevel` converts a socket into a generator that</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">yields lowlevel Cap&#39;n Proto request messages for predictions and expects to be sent Cap&#39;n proto</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">messages in return. There are four types of messages `msg` Coq sends.</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">1. Synchronize: If `msg.is_synchronize` is true, Coq is attempting to synchronize</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">   its state with the server. A `PredictionProtocol.Response.synchronized` message is expected</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">   in return.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">2. Initialize: If `msg.is_initialize` is true, Coq is sending a list of available</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">   tactics and a global context fragment to be added to an existing stack of global context</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">   information. An empty stack can be created through `empty_online_definitions_initialize`.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">   To add an initialize message to the stack, you can use</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">   ```</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">   with pytact.data_reader.online_definitions_initialize(existing_stack, msg) as definitions:</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">       print(type(definitions))</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">   ```</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">   Any subsequent messages will be made in the context of the</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">   tactics and predictions sent in this message, until an initialize message is received</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">   such that `msg.initialize.stack_size` is smaller than the current stack size.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">   A `PredictionProtocol.Response.initialized` message is expected in response of this message.</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">4. Predict: If `msg.is_predict` is true, Coq is asking to predict a list of plausible</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">   tactics given a proof state. The proof state can be easily accessed using</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">   ```</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">   with pytact.data_reader.online_data_predict(definitions, msg.predict) as proof_state:</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">       print(dir(proof_state))</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">   ```</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">   A `PredictionProtocol.Response.prediction` or `PredictionProtocol.Response.textPrediction`</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">   message is expected in return.</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">5. Check Alignment: If `msg.is_check_alignment` is true, then Coq is asking the server</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">   to check which tactics and definitions are known to it. A</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">   `PredictionProtocol.Response.alignment` message is expected in return.</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">You can wrap the generator produced by `capnp_message_generator_lowlevel` into</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">`record_lowlevel_generator` in order to record the exchanged messages to disk.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">This trace can later be replayed using</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">`capnp_message_generator_from_file_lowlevel` (or using the high-level interface).</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span><span class="p">,</span> <span class="n">ExitStack</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">TypeAlias</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">BinaryIO</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Generator</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="kn">from</span> <span class="nn">immutables</span> <span class="kn">import</span> <span class="n">Map</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="kn">import</span> <span class="nn">signal</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="kn">import</span> <span class="nn">pytact.graph_api_capnp_cython</span> <span class="k">as</span> <span class="nn">apic</span> <span class="c1"># type: ignore</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="kn">import</span> <span class="nn">capnp</span><span class="c1"># type: ignore</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="kn">import</span> <span class="nn">pytact.graph_api_capnp</span> <span class="k">as</span> <span class="nn">graph_api_capnp</span> <span class="c1"># type: ignore</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="kn">import</span> <span class="nn">socket</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="kn">import</span> <span class="nn">mmap</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="kn">import</span> <span class="nn">itertools</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="kn">import</span> <span class="nn">resource</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="kn">import</span> <span class="nn">threading</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="kn">import</span> <span class="nn">shutil</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="kn">import</span> <span class="nn">time</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="nd">@contextmanager</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="k">def</span> <span class="nf">file_dataset_reader</span><span class="p">(</span><span class="n">fname</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">Dataset_Reader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a single dataset file into memory, and expose its raw Cap&#39;n Proto structures.</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">    This is a low-level function. Prefer to use `data_reader` or `lowlevel_data_reader`.</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>    <span class="o">...</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="k">class</span> <span class="nc">LowlevelDataReader</span><span class="p">:</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A thin wrapper around the raw Cap&#39;n Proto structures contained in a dataset directory.</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">    Every file in the directory is assigned an integer called a graph-id. This class is a</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">    `Sequence` that allows the retrieval of the structures in a file by its graph-id.</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">    Additionally, the function `local_to_global` translates a dependency-index relative to</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">    a graph-id to a new graph-id. This allows one to find out in which file a node in a</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">    graph is located.</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">    This is a lowlevel interface. For details on using the exposed structures the documentation</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">    in the Cap&#39;n Proto API file.</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>    <span class="n">graphid_by_filename</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map from filenames in the data directory to their graph-id&#39;s.&quot;&quot;&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>    <span class="n">graph_files</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map&#39;s a graph-id to a filename. Inverse of `graphid_by_filename`.&quot;&quot;&quot;</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the graph-id</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">        of the file where the node is physically located.</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="o">...</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the raw Cap&#39;n Proto structures associated with a graph-id.&quot;&quot;&quot;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="o">...</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="nd">@contextmanager</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="k">def</span> <span class="nf">lowlevel_data_reader</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">LowlevelDataReader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map a directory of dataset files into memory, and expose their raw Cap&#39;n Proto structures.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">    Arguments:</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">    `dataset_path`: Can either be a dataset directory, or a SquashFS image file. In case of an image</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">                    file `dataset.squ`, the image will be mounted using `squashfuse` on directory</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">                    `dataset/`, after which the contents of that directory will be read.</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">    This is a low-level function. Prefer to use `data_reader`. See `LowlevelDataReader` for</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">    further documentation.</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="o">...</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="n">ProofStateId</span> <span class="o">=</span> <span class="nb">int</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="n">TacticId</span> <span class="o">=</span> <span class="nb">int</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="n">GraphId</span> <span class="o">=</span> <span class="nb">int</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="n">NodeId</span> <span class="o">=</span> <span class="nb">int</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="n">NodeHash</span> <span class="o">=</span> <span class="nb">int</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A node in the calculus of inductive construction graph.</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">    A node has a `label`, a unique `identity` and `children`. Some nodes are also</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">    a `Definition`.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>    <span class="n">graph</span> <span class="p">:</span> <span class="n">GraphId</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The id of the graph in which this node occurs. For lowlevel use only.&quot;&quot;&quot;</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>    <span class="n">nodeid</span> <span class="p">:</span> <span class="n">NodeId</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The local id of the node in the dataset. For lowlevel use only.&quot;&quot;&quot;</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="o">...</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Physical equality of two nodes. Note that two nodes with a different physical equality</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        may have the same `identity`. See `identity` for details.</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>        <span class="o">...</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A hash that is corresponds to physical equality, not to be confused by `identity`.&quot;&quot;&quot;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>        <span class="o">...</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>    <span class="nd">@property</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">apic</span><span class="o">.</span><span class="n">Graph_Node_Label_Reader</span><span class="p">:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The label of the node, indicating it&#39;s function in the CIC graph.&quot;&quot;&quot;</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>        <span class="o">...</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>    <span class="nd">@property</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeHash</span><span class="p">:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The identity of a node uniquely determines it. That is, one can consider any to nodes with the same</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">        identity to be equal. The notion of equal we use is as follows:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">        1. Graph perspective: Two nodes have the same identity if and only if they are bisimilar.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">           In this notion, bisimilarity does take into consideration the label of the nodes, modulo some</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">           equivalence class that is not fully specified here. One aspect of the equivalence class is that</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">           for definition nodes their associated global context (accessed through `Definition.previous`) is</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">           not taken into account.</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">        2. Lambda calculus perspective: Two nodes have the same identity if their corresponding lambda terms</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">           are alpha-equivalent. Note that two definitions with the same body are not considered</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">           alpha-equivalent.</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">        The identity of a node is used to perform partial graph-sharing. That is, two nodes with the same</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">        identity are merged when the graph is generated. There are two reasons why two nodes with the same</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">        semantic identity might have a different physical identity:</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">        1. Nodes are only merged when the first node exists in the same graph as the second node, or exists</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">           in a dependent graph. Hence, nodes originating from developments that do not depend on each other</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">           are never merged. Full graph-sharing would require global analysis on a dataset, which any consumer</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">           can optionally do as a post-processing step.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">        2. Two definition nodes with the same name and body have the same identity. But if they occur in</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">           different global contexts, these nodes are physically different to ensure the integrity of their</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">           global contexts.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">        Beware that the identity is currently a 64 bit field. For datasets that have graphs of size in the</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">        order of billions of nodes there is a non-trivial chance of a collision. (We consider this acceptable</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">        for machine learning purposes.)</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>        <span class="o">...</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>    <span class="nd">@property</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Node</span><span class="p">]]:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The children of a node, together with the labels of the edges towards the children.</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        Note that for efficiency purposes, the label is represented as an integer. The corresponding</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">        enum of this integer is `graph_api_capnp.EdgeClassification`.&quot;&quot;&quot;</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>        <span class="o">...</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>    <span class="nd">@property</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>    <span class="k">def</span> <span class="nf">definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Some nodes in the CIC graph represent definitions. Such nodes contain extra information about the</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        definition.</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="o">...</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="k">class</span> <span class="nc">ProofState</span><span class="p">:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A proof state represents a particular point in the tactical proof of a constant.&quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>    <span class="nd">@property</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="o">...</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>        <span class="o">...</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>    <span class="nd">@property</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The entry-point of the proof state, all nodes that are &#39;part of&#39; the proof state are</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        reachable from here.&quot;&quot;&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>        <span class="o">...</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>    <span class="nd">@property</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>    <span class="k">def</span> <span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The local context of the proof state, given as a tuple of their original name as they appeared in the</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">        proof and the corresponding node.</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">        The nodes always have either label `contextAssum` or `contextDef`.</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">        Note that these nodes are also reachable from the root of the proof state.</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">        The names of the context elements should be used for debugging and viewing purposes only, because</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">        hypothesis-generating tactics have been modified to use auto-generated names. Hence, tactics should</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">        not be concerned about the names of the context.</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="o">...</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>    <span class="nd">@property</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">context_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The names of the local context nodes of the proof state, as they originally appeared in the proof.</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        These names should be used for debugging and viewing purposes only, because hypothesis-generating tactics have</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">        been modified to use auto-generated names. Hence, tactics should not be concerned about the names of</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">        the context.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>        <span class="o">...</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>    <span class="nd">@property</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>    <span class="k">def</span> <span class="nf">context_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the type/definition of context nodes</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="o">...</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>    <span class="nd">@property</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>    <span class="k">def</span> <span class="nf">conclusion_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the conclusion of the proof state.</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>        <span class="o">...</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>    <span class="nd">@property</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the proof state.&quot;&quot;&quot;</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>        <span class="o">...</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>        <span class="o">...</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>    <span class="nd">@property</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProofStateId</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        A unique identifier of the proof state. Any two proof states in a tactical proof that have an equal id</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        can morally be regarded to be &#39;the same&#39; proof state.</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        IMPORTANT: Two proof states with the same id may still have different contents. This is because proof states</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">                   can contain existential variables (represented by the `evar` node) that can be filled as a</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">                   side-effect by a tactic running on another proof state.</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>        <span class="o">...</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="n">Unresolvable</span> <span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a><span class="n">Unknown</span> <span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="k">class</span> <span class="nc">Outcome</span><span class="p">:</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An outcome is the result of running a tactic on a proof state. A tactic may run on multiple proof states.&quot;&quot;&quot;</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>    <span class="n">tactic</span> <span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">Tactic_Reader</span> <span class="o">|</span> <span class="n">Unknown</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The tactic that generated the outcome. For it&#39;s arguments, see `tactic_arguments`</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">    Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as &#39;unknown&#39;.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">    This currently happens with tactics that are run as a result of the `Proof with tac` construct and it</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">    happens for tactics that are known to be unsafe like `change_no_check`, `fix`, `cofix` and more.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>    <span class="nd">@property</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>        <span class="o">...</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="o">...</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>    <span class="nd">@property</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>    <span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProofState</span><span class="p">:</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The proof state before the tactic execution.&quot;&quot;&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>        <span class="o">...</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>    <span class="nd">@property</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>    <span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofState</span><span class="p">]:</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The new proof states that were generated by the tactic.&quot;&quot;&quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>        <span class="o">...</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>    <span class="nd">@property</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>    <span class="k">def</span> <span class="nf">term</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The proof term that witnesses the transition from the before state to the after states. It contains a</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        hole (an `evar` node) for each of the after states. It may also refer to elements of the local context of</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">        the before state.</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>        <span class="o">...</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>    <span class="nd">@property</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>    <span class="k">def</span> <span class="nf">term_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the proof term.&quot;&quot;&quot;</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>        <span class="o">...</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>    <span class="nd">@property</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">tactic_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="n">Unresolvable</span><span class="p">]:</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The arguments of the tactic that produced this outcome.</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        The node is the root of a graph representing an argument that is a term in the calculus of constructions.</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">        Sometimes, an argument is not resolvable to a term, in which case it is marked as `Unresolvable`.</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>        <span class="o">...</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="k">class</span> <span class="nc">ProofStep</span><span class="p">:</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A proof step is the execution of a single tactic on one or more proof states, producing a list of outcomes.</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>    <span class="nd">@property</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>        <span class="o">...</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>        <span class="o">...</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>    <span class="nd">@property</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>    <span class="k">def</span> <span class="nf">tactic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">apic</span><span class="o">.</span><span class="n">Tactic_Reader</span> <span class="o">|</span> <span class="n">Unknown</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The tactic that generated the proof step. Note that the arguments of the tactic can be found in the</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">        individual outcomes, because they may be different for each outcome.</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as &#39;unknown&#39;.</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">        This currently happens with tactics that are run as a result of the `Proof with tac` construct and it</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">        happens for tactics that are known to be unsafe like `change_no_check`, `fix`, `cofix` and more.</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>        <span class="o">...</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>    <span class="nd">@property</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="nf">outcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Outcome</span><span class="p">]:</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of transformations of proof states to other proof states, as executed by the tactic of the proof</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        step</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>        <span class="o">...</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="nd">@dataclass</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="k">class</span> <span class="nc">Original</span><span class="p">:</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is original, as inputted by the</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">    user.&quot;&quot;&quot;</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>    <span class="k">pass</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="nd">@dataclass</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="k">class</span> <span class="nc">Discharged</span><span class="p">:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is derived from an original after</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">    section closing.&quot;&quot;&quot;</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>    <span class="n">original</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="nd">@dataclass</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="k">class</span> <span class="nc">Substituted</span><span class="p">:</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is derived from an original after</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">    module functor instantiation.&quot;&quot;&quot;</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>    <span class="n">original</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="nd">@dataclass</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="k">class</span> <span class="nc">Inductive</span><span class="p">:</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is inductive.&quot;&quot;&quot;</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="nd">@dataclass</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="k">class</span> <span class="nc">Constructor</span><span class="p">:</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is a constructor.&quot;&quot;&quot;</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="nd">@dataclass</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="k">class</span> <span class="nc">Projection</span><span class="p">:</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is a projection.&quot;&quot;&quot;</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="nd">@dataclass</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="k">class</span> <span class="nc">ManualConstant</span><span class="p">:</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition was inputted by the user by</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">    manually inputting a term.&quot;&quot;&quot;</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>    <span class="k">pass</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="nd">@dataclass</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="k">class</span> <span class="nc">TacticalConstant</span><span class="p">:</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a lemma was proved by the user using</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">    a tactic proof.&quot;&quot;&quot;</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>    <span class="n">proof</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The proof of the lemma.&quot;&quot;&quot;</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="nd">@dataclass</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="k">class</span> <span class="nc">ManualSectionConstant</span><span class="p">:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a constant is a section variable or let-construct.&quot;&quot;&quot;</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>    <span class="k">pass</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="nd">@dataclass</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="k">class</span> <span class="nc">TacticalSectionConstant</span><span class="p">:</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a constant is a section let-construct with a tactic proof.&quot;&quot;&quot;</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>    <span class="n">proof</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The proof of the lemma.&quot;&quot;&quot;</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="k">class</span> <span class="nc">Definition</span><span class="p">:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A definition of the CIC, which is either a constant, inductive, constructor, projection or section</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">    variable. Constants and section variables can have tactical proofs associated to them.</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>    <span class="n">node</span> <span class="p">:</span> <span class="n">Node</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The node that is associated with this definition. It holds that</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a><span class="sd">    `definition.node.definition == definition`.</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>    <span class="nd">@property</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>        <span class="o">...</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>        <span class="o">...</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Physical equality of two nodes. Note that two nodes with a different physical equality</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        may have the same `identity`. See `identity` for details.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>        <span class="o">...</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A hash that is corresponds to physical equality, not to be confused by `identity`.&quot;&quot;&quot;</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>        <span class="o">...</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>    <span class="nd">@property</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The fully-qualified name of the definition. The name should be unique in a particular global context,</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">        but is not unique among different branches of the global in a dataset.</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>        <span class="o">...</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>    <span class="nd">@property</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>    <span class="k">def</span> <span class="nf">previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The previous definition within the global context of the current file.</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a><span class="sd">        Note that this is a lowlevel property. Prefer to use `global_context` or `clustered_global_context`.</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a><span class="sd">        The contract on this field is that any definition nodes reachable from the forward closure of the definition</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a><span class="sd">        must also be reachable through the chain of previous fields. An exception to this rule are mutually</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a><span class="sd">        recursive definitions. Those nodes are placed into the global context in an arbitrary ordering.</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>        <span class="o">...</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>    <span class="nd">@property</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>    <span class="k">def</span> <span class="nf">external_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of definitions that are the representatives of files other than the current file that are</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">        part of the global context. This list becomes populated when a `Require` statement occurred right before</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        the definition.</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        Note that this is a lowlevel property. Prefer to use `global_context` or `clustered_global_context`.</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>        <span class="o">...</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>    <span class="k">def</span> <span class="nf">global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created.</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">        Note that this does not include this definition itself, except when the definition is a inductive,</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">        constructor or projection. Because those are mutually recursive objects, they reference themselves</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">        and are therefore part of their own global context.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">        stream. An exception to this rule are mutually recursive definitions, because no topological sort</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">        is possible there (see also `clustered_global_context`).</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">        Arguments:</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">        * `inclusive`: if `True`, outputs also itself, default `False`.</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>        <span class="o">...</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>    <span class="k">def</span> <span class="nf">clustered_global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created, clustered into</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">        mutually recursive cliques.</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">        stream.</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a><span class="sd">        Arguments:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a><span class="sd">        * `inclusive`: if `True`, outputs also the cluster of itself, default `False`.</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`.</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>        <span class="o">...</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>    <span class="nd">@property</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Original</span> <span class="o">|</span> <span class="n">Discharged</span> <span class="o">|</span> <span class="n">Substituted</span><span class="p">:</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">        A definition is either</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a><span class="sd">        (1) an object as originally inputted by the user.</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a><span class="sd">        (2) a definition that was originally defined in a section and has now had the section</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a><span class="sd">            variables discharged into it.</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a><span class="sd">        (3) a definition that was obtained by performing some sort of module functor substitution.</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a><span class="sd">        When a definition is not original, we cross-reference to the definition that it was derived from.</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>        <span class="o">...</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>    <span class="nd">@property</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Inductive</span><span class="p">,</span> <span class="n">Constructor</span><span class="p">,</span> <span class="n">Projection</span><span class="p">,</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>                            <span class="n">ManualConstant</span><span class="p">,</span> <span class="n">TacticalConstant</span><span class="p">,</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                            <span class="n">ManualSectionConstant</span><span class="p">,</span> <span class="n">TacticalSectionConstant</span><span class="p">]:</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The kind of the definition.</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="sd">        It can be an constant, section constant, inductive, constructor or projection. In case of a constant</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a><span class="sd">        of a constant or section constant, an optional tactical proof can be associated. In case of an inductive,</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a><span class="sd">        constructor or projection, another definition that acts as the representative of the mutually recursive</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a><span class="sd">        cluster of definitions is associated.</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a><span class="sd">        The associated information is low-level. Prefer to use the properties `proof` and `cluster` to access them.</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>        <span class="o">...</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>    <span class="nd">@property</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>    <span class="k">def</span> <span class="nf">proof</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An optional tactical proof that was used to create this definition.&quot;&quot;&quot;</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>        <span class="o">...</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>    <span class="nd">@property</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>    <span class="k">def</span> <span class="nf">cluster_representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span><span class="p">:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A unique representative of the mutually recursive cluster of definitions this definition is part of.</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a><span class="sd">        If the definition is not mutually recursive, the representative is itself.</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a><span class="sd">        This is a low-level property. Prefer to use the `cluster` property.</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>        <span class="o">...</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>    <span class="nd">@property</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>    <span class="k">def</span> <span class="nf">cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The cluster of mutually recursive definitions that this definition is part of.</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="sd">        If the definition is not mutually recursive, the cluster is a singleton.&quot;&quot;&quot;</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>        <span class="o">...</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>    <span class="nd">@property</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>    <span class="k">def</span> <span class="nf">type_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the type of this definition.&quot;&quot;&quot;</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>        <span class="o">...</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>    <span class="nd">@property</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>    <span class="k">def</span> <span class="nf">term_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the body of this definition.</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a><span class="sd">        For inductives, constructors, projections, section variables and axioms this is `None`.</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>        <span class="o">...</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>    <span class="nd">@property</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>    <span class="k">def</span> <span class="nf">is_file_representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns true if this definition is the representative of the super-global context of it&#39;s file.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a><span class="sd">        Se also `Dataset.representative`.&quot;&quot;&quot;</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>        <span class="o">...</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a><span class="k">class</span> <span class="nc">Dataset</span><span class="p">:</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The data corresponding to a single Coq source file. The data contains a representation of all definitions</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a><span class="sd">    that have existed at any point throughout the compilation of the source file.</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>    <span class="n">graph</span> <span class="p">:</span> <span class="n">GraphId</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>    <span class="n">filename</span> <span class="p">:</span> <span class="n">Path</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The physical file in which the data contained in this class can be found.&quot;&quot;&quot;</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>    <span class="nd">@property</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>        <span class="o">...</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>        <span class="o">...</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>    <span class="nd">@property</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>    <span class="k">def</span> <span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of physical paths of data files that are direct dependencies of this file.</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a><span class="sd">        It is guaranteed that no cycles exist in the dependency relation between files induced by this field.</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>        <span class="o">...</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>    <span class="nd">@property</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>    <span class="k">def</span> <span class="nf">representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The entry point of the global context of definitions that are available when this file is &#39;Required&#39; by</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a><span class="sd">        another file. The full global context can be obtained by following the `previous` node of definitions.</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a><span class="sd">        If the compilation unit does not contain any &#39;super&#39;-global definitions this may be `None`.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a><span class="sd">        This is a low-level property.</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a><span class="sd">        Prefer to use `definitions(spine_only = True)` and `clustered_definitions(spine_only=True)`.</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>        <span class="o">...</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file.</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a><span class="sd">        Arguments:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">        * `spine_only`: if True, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">        also exists in the remainder of the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>        <span class="o">...</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file, clustered by mutually recursive definitions.</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a><span class="sd">        Arguments:</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a><span class="sd">        * `spine_only`: if `True`, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a><span class="sd">        also exists in the remainder of the stream.</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>        <span class="o">...</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>    <span class="nd">@property</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>    <span class="k">def</span> <span class="nf">module_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>        <span class="o">...</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>    <span class="k">def</span> <span class="nf">node_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeid</span><span class="p">:</span> <span class="n">NodeId</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Lookup a node inside of this file by it&#39;s local node-id. This is a low-level function.&quot;&quot;&quot;</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>        <span class="o">...</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a><span class="k">def</span> <span class="nf">lowlevel_to_highlevel</span><span class="p">(</span><span class="n">lreader</span> <span class="p">:</span> <span class="n">LowlevelDataReader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">]:</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a dataset initialized as a `LowLevelDataReader` into a high level interface.&quot;&quot;&quot;</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>    <span class="o">...</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a><span class="nd">@contextmanager</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a><span class="k">def</span> <span class="nf">data_reader</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a directory of dataset files into memory, and expose the data they contain.</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a><span class="sd">    The result is a dictionary that maps physical paths to `Dataset` instances that allow access to the data.</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a><span class="sd">    Arguments:</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a><span class="sd">    `dataset_path`: Can either be a dataset directory, or a SquashFS image file. In case of an image</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a><span class="sd">                    file `dataset.squ`, the image will be mounted using `squashfuse` on directory</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a><span class="sd">                    `dataset/`, after which the contents of that directory will be read.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>    <span class="o">...</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a><span class="k">class</span> <span class="nc">OnlineDefinitionsReader</span><span class="p">:</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;This class represents a global context to Python by Coq, containing all</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a><span class="sd">    known definitions and available tactics.&quot;&quot;&quot;</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the index in</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a><span class="sd">        the global context stack where the node is physically located.</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a><span class="sd">        Lowlevel function.</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>        <span class="o">...</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a>    <span class="nd">@property</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a>    <span class="k">def</span> <span class="nf">representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The last definition in the global context. All other definitions can be accessed by following</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a><span class="sd">        the `Definition.previous` chain starting from this definitions.</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a><span class="sd">        This is a low-level property.</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a><span class="sd">        Prefer to use `definitions` and `clustered_definitions`.</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>        <span class="o">...</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of definitions that are currently in the global context.</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="sd">        the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>        <span class="o">...</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the global context, clustered by mutually recursive definitions.</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a><span class="sd">        the stream.</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a>        <span class="o">...</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a><span class="nd">@contextmanager</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos">754</span></a><span class="k">def</span> <span class="nf">online_definitions_initialize</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">,</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos">755</span></a>                                  <span class="n">init</span><span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Initialize_Reader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">OnlineDefinitionsReader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos">756</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a new initialization message sent by Coq, construct a</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos">757</span></a><span class="sd">    `OnlineDefinitiosnReader` object. This can be used to inspect the</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos">758</span></a><span class="sd">    definitions currently available. Additionally, using `online_data_predict`</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos">759</span></a><span class="sd">    it can be combined with a subsequent prediction request received from Coq</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos">760</span></a><span class="sd">    to build a `ProofState`.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos">761</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos">762</span></a>    <span class="o">...</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos">763</span></a>
</span><span id="L-764"><a href="#L-764"><span class="linenos">764</span></a><span class="k">def</span> <span class="nf">empty_online_definitions_initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">OnlineDefinitionsReader</span><span class="p">:</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos">765</span></a>    <span class="o">...</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos">766</span></a>
</span><span id="L-767"><a href="#L-767"><span class="linenos">767</span></a><span class="nd">@contextmanager</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos">768</span></a><span class="k">def</span> <span class="nf">online_data_predict</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">,</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos">769</span></a>                        <span class="n">predict</span><span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Predict_Reader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">ProofState</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos">770</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `OnlineDefinitionsReader` instance constructed through</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos">771</span></a><span class="sd">    `online_data_initialize`, and a prediction message sent by Coq, construct a</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos">772</span></a><span class="sd">    `ProofState` object that represents the current proof state in Coq.</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos">773</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos">774</span></a>    <span class="o">...</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos">775</span></a>
</span><span id="L-776"><a href="#L-776"><span class="linenos">776</span></a><span class="nd">@dataclass</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos">777</span></a><span class="k">class</span> <span class="nc">TacticPredictionGraph</span><span class="p">:</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos">778</span></a>    <span class="n">ident</span> <span class="p">:</span> <span class="nb">int</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos">779</span></a>    <span class="n">arguments</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos">780</span></a>    <span class="n">confidence</span> <span class="p">:</span> <span class="nb">float</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos">781</span></a>
</span><span id="L-782"><a href="#L-782"><span class="linenos">782</span></a><span class="nd">@dataclass</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos">783</span></a><span class="k">class</span> <span class="nc">TacticPredictionsGraph</span><span class="p">:</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos">784</span></a>    <span class="n">predictions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TacticPredictionsGraph</span><span class="p">]</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos">785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos">786</span></a><span class="nd">@dataclass</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos">787</span></a><span class="k">class</span> <span class="nc">TacticPredictionText</span><span class="p">:</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos">788</span></a>    <span class="n">tactic_text</span> <span class="p">:</span> <span class="nb">str</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos">789</span></a>    <span class="n">confidence</span> <span class="p">:</span> <span class="nb">float</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos">790</span></a>
</span><span id="L-791"><a href="#L-791"><span class="linenos">791</span></a><span class="nd">@dataclass</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos">792</span></a><span class="k">class</span> <span class="nc">TacticPredictionsText</span><span class="p">:</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos">793</span></a>    <span class="n">predictions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TacticPredictionsText</span><span class="p">]</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos">794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos">795</span></a><span class="nd">@dataclass</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos">796</span></a><span class="k">class</span> <span class="nc">CheckAlignmentMessage</span><span class="p">:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos">797</span></a>    <span class="k">pass</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos">798</span></a>
</span><span id="L-799"><a href="#L-799"><span class="linenos">799</span></a><span class="nd">@dataclass</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos">800</span></a><span class="k">class</span> <span class="nc">CheckAlignmentResponse</span><span class="p">:</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos">801</span></a>    <span class="n">unknown_definitions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos">802</span></a>    <span class="n">unknown_tactics</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos">803</span></a>
</span><span id="L-804"><a href="#L-804"><span class="linenos">804</span></a><span class="nd">@dataclass</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos">805</span></a><span class="k">class</span> <span class="nc">GlobalContextMessage</span><span class="p">:</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos">806</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing a new global context sent to Python from Coq,</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos">807</span></a><span class="sd">    including all known definitions and available tactics.&quot;&quot;&quot;</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos">808</span></a>
</span><span id="L-809"><a href="#L-809"><span class="linenos">809</span></a>    <span class="n">definitions</span> <span class="p">:</span> <span class="n">OnlineDefinitionsReader</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos">810</span></a>    <span class="n">tactics</span> <span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">AbstractTactic_Reader</span><span class="p">]</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos">811</span></a>
</span><span id="L-812"><a href="#L-812"><span class="linenos">812</span></a>    <span class="n">log_annotation</span> <span class="p">:</span> <span class="nb">str</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos">813</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An annotation representing the current position of Coq in a source</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos">814</span></a><span class="sd">    document. For logging and debugging purposes.&quot;&quot;&quot;</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos">815</span></a>
</span><span id="L-816"><a href="#L-816"><span class="linenos">816</span></a>    <span class="n">prediction_requests</span> <span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextMessage</span> <span class="o">|</span> <span class="n">ProofState</span> <span class="o">|</span> <span class="n">CheckAlignmentMessage</span><span class="p">,</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos">817</span></a>                                    <span class="kc">None</span> <span class="o">|</span> <span class="n">TacticPredictionsGraph</span> <span class="o">|</span> <span class="n">TacticPredictionsText</span> <span class="o">|</span> <span class="n">CheckAlignmentResponse</span><span class="p">,</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos">818</span></a>                                    <span class="kc">None</span><span class="p">]</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos">819</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A sub-generator that produces new requests from Coq that are based on or</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos">820</span></a><span class="sd">    extend the global context of the current message. Once the sub-generator</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos">821</span></a><span class="sd">    runs out, the parent generator continues.&quot;&quot;&quot;</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos">822</span></a>
</span><span id="L-823"><a href="#L-823"><span class="linenos">823</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_lowlevel</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos">824</span></a>        <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos">825</span></a>                  <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos">826</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A generator that facilitates communication between a prediction server and a Coq process.</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos">827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos">828</span></a><span class="sd">    Given a `socket`, this function creates a generator that yields messages of type</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos">829</span></a><span class="sd">    `pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader` after which a</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos">830</span></a><span class="sd">    `capnp.lib.capnp._DynamicStructBuilder` message needs to be `send` back.</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos">831</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos">832</span></a>    <span class="o">...</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos">833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos">834</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_from_file_lowlevel</span><span class="p">(</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos">835</span></a>        <span class="n">message_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos">836</span></a>        <span class="n">check</span> <span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos">837</span></a>        <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos">838</span></a>                  <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos">839</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos">840</span></a>
</span><span id="L-841"><a href="#L-841"><span class="linenos">841</span></a><span class="sd">    Lowlevel variant of `capnp_message_generator_from_file`.</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos">842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos">843</span></a><span class="sd">    Accepts a `message_file` containing a stream of Capt&#39;n Proto messages as recorded using</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos">844</span></a><span class="sd">    `capnp_message_generator(s, record=message_file)`. The resulting generator acts just like the generator</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos">845</span></a><span class="sd">    created by `capnp_message_generator` except that it is not connected to the socket but just replays the</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos">846</span></a><span class="sd">    pre-recorded messages.</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos">847</span></a>
</span><span id="L-848"><a href="#L-848"><span class="linenos">848</span></a><span class="sd">    Arguments:</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos">849</span></a><span class="sd">    - `check` is an optional callable that can be used to compare the response of the server to the recorded</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos">850</span></a><span class="sd">      response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos">851</span></a><span class="sd">      and the recorded response.</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos">852</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos">853</span></a>    <span class="o">...</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos">854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos">855</span></a><span class="k">def</span> <span class="nf">record_lowlevel_generator</span><span class="p">(</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos">856</span></a>        <span class="n">record_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos">857</span></a>        <span class="n">gen</span><span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos">858</span></a>                       <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos">859</span></a>                           <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos">860</span></a>                                     <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos">861</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Record a trace of the full interaction of a lowlevel generator to a file</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos">862</span></a>
</span><span id="L-863"><a href="#L-863"><span class="linenos">863</span></a><span class="sd">    Wrap a lowlevel generator (such as from `capnp_message_generator_lowlevel`) and dump all exchanged messages</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos">864</span></a><span class="sd">    to the given file. The file can later be replayed with `capnp_message_generator_from_file_lowlevel`.</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos">865</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos">866</span></a>    <span class="o">...</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos">867</span></a>
</span><span id="L-868"><a href="#L-868"><span class="linenos">868</span></a><span class="k">def</span> <span class="nf">prediction_generator</span><span class="p">(</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos">869</span></a>        <span class="n">lgenerator</span><span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos">870</span></a>                              <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos">871</span></a>        <span class="n">defs</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">):</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos">872</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given the current global context stack `defs`, convert a low-level</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos">873</span></a><span class="sd">    generator to a high-level `GlobalContextMessage`&quot;&quot;&quot;</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos">874</span></a>    <span class="o">...</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos">875</span></a>
</span><span id="L-876"><a href="#L-876"><span class="linenos">876</span></a><span class="k">def</span> <span class="nf">capnp_message_generator</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GlobalContextMessage</span><span class="p">:</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos">877</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A generator that facilitates communication between a prediction server and a Coq process.</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos">878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos">879</span></a><span class="sd">    Given a `socket`, this function creates a `GlobalContextMessage` `context`. This message contains an</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos">880</span></a><span class="sd">    initially empty list of available tactics and definitions in the global context. Through</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos">881</span></a><span class="sd">    `context.prediction_requests` one can access a generator that yields prediction requests and expects</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos">882</span></a><span class="sd">    predictions to be sent in response. The possible messages are as follows:</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos">883</span></a><span class="sd">    - `GlobalContextMessage`: An additional, nested, global context message that amends the current context</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos">884</span></a><span class="sd">       with additional tactics and definitions. The prediction requests of this nested context need to be</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos">885</span></a><span class="sd">       exhausted before continuing with messages from the current context.</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos">886</span></a><span class="sd">    - `CheckAlignmentMessage`: A request to check which of Coq&#39;s current tactics and definitions the</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos">887</span></a><span class="sd">      prediction server currently &quot;knows about&quot;. The generator expects a `CheckAlignmentResponse` to be</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos">888</span></a><span class="sd">      sent in response.</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos">889</span></a><span class="sd">    - `ProofState`: A request to make tactic predictions for a given proof state. Either a</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos">890</span></a><span class="sd">      `TacticPredictionsGraph` or a `TacticPredictionsText` message is expected in return.</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos">891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos">892</span></a><span class="sd">    When `record` is passed a file descriptor, all received and sent messages will be dumped into that file</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos">893</span></a><span class="sd">    descriptor. These messages can then be replayed later using `capnp_message_generator_from_file`.</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos">894</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos">895</span></a>    <span class="o">...</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos">896</span></a>
</span><span id="L-897"><a href="#L-897"><span class="linenos">897</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_from_file</span><span class="p">(</span><span class="n">message_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos">898</span></a>                                      <span class="n">check</span> <span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos">899</span></a>                                      <span class="n">record</span><span class="p">:</span> <span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GlobalContextMessage</span><span class="p">:</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos">900</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos">901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos">902</span></a><span class="sd">    Highlevel variant of `capnp_message_generator_from_file_lowlevel`.</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos">903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos">904</span></a><span class="sd">    Accepts a `message_file` containing a stream of Capt&#39;n Proto messages as recorded using</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos">905</span></a><span class="sd">    `capnp_message_generator(s, record=message_file)`. The resulting generator acts just like the generator</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos">906</span></a><span class="sd">    created by `capnp_message_generator` except that it is not connected to the socket but just replays the</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos">907</span></a><span class="sd">    pre-recorded messages.</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos">908</span></a>
</span><span id="L-909"><a href="#L-909"><span class="linenos">909</span></a><span class="sd">    Arguments:</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos">910</span></a><span class="sd">    - `check` is an optional callable that can be used to compare the response of the server to the recorded</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos">911</span></a><span class="sd">      response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos">912</span></a><span class="sd">      and the recorded response.</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos">913</span></a><span class="sd">    - `record` is an optional file that re-records the interaction with the current server</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos">914</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos">915</span></a>    <span class="o">...</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos">916</span></a>
</span><span id="L-917"><a href="#L-917"><span class="linenos">917</span></a><span class="k">class</span> <span class="nc">GlobalContextSets</span><span class="p">:</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos">918</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Lazily retrieve a the global context of a definition as a set, with memoization.</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos">919</span></a>
</span><span id="L-920"><a href="#L-920"><span class="linenos">920</span></a><span class="sd">    Because this class can allocate (large) amounts of memory, use it as a context-manager. To create a new</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos">921</span></a><span class="sd">    instance, and retrieve the context of a definition, use:</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos">922</span></a><span class="sd">    ```</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos">923</span></a><span class="sd">    with GlobalContextSets.new_context() as gcs:</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos">924</span></a><span class="sd">        gcs.global_context_set(my_definition)</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos">925</span></a><span class="sd">    ```</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos">926</span></a><span class="sd">    This context will be cached, as well as intermediate results (global contexts of other definitions) as</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos">927</span></a><span class="sd">    long as the context-set is in scope. Caching can be nested by using `sub_context`:</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos">928</span></a><span class="sd">    ```</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos">929</span></a><span class="sd">    with GlobalContextSets.new_context() as gcs:</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos">930</span></a><span class="sd">        gcs.global_context_set(my_definition)</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos">931</span></a><span class="sd">        with gcs.sub_context(lambda d:is_file_representative) as gcs_sub:</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos">932</span></a><span class="sd">            # gcs_sub remembers anything in the case of gcs</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos">933</span></a><span class="sd">            # caching is propagated to the parent cache only if the provided lambda evaluates to true</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos">934</span></a><span class="sd">            gcs_sub.global_context_set(my_definition2)</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos">935</span></a><span class="sd">    ```</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos">936</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos">937</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">GlobalContextSets</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos">938</span></a>                 <span class="n">should_propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]):</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos">939</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not call directly. Use `GlobalContextSets.new_context` and `GlobalContextSets.sub_context`.&quot;&quot;&quot;</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos">940</span></a>        <span class="o">...</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos">941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos">942</span></a>    <span class="k">def</span> <span class="nf">global_context_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Definition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Map</span><span class="p">:</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos">943</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the global context of a definition, caching the result, and intermediate results.&quot;&quot;&quot;</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos">944</span></a>        <span class="o">...</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos">945</span></a>
</span><span id="L-946"><a href="#L-946"><span class="linenos">946</span></a>    <span class="nd">@contextmanager</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos">947</span></a>    <span class="k">def</span> <span class="nf">sub_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos">948</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a sub-context with a separate cache from it&#39;s parent, but sharing any info that was</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos">949</span></a><span class="sd">        already present in the parent&#39;s cache.</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos">950</span></a>
</span><span id="L-951"><a href="#L-951"><span class="linenos">951</span></a><span class="sd">        For any intermediate results for a definition `d` for which `propagate(d)` evaluates to true,</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos">952</span></a><span class="sd">        the result is propagated to the parent&#39;s cache.&quot;&quot;&quot;</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos">953</span></a>        <span class="o">...</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos">954</span></a>
</span><span id="L-955"><a href="#L-955"><span class="linenos">955</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos">956</span></a>    <span class="k">def</span> <span class="nf">new_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos">957</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crate a new caching context where global-context-set&#39;s can be retrieved and cached.&quot;&quot;&quot;</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos">958</span></a>        <span class="o">...</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos">959</span></a>
</span><span id="L-960"><a href="#L-960"><span class="linenos">960</span></a><span class="k">def</span> <span class="nf">node_dependencies</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos">961</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `Node` `n`, calculate the set of `Definition`&#39;s that are directly reachable</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos">962</span></a><span class="sd">    from `n`. Transitively reachable definitions are not included.</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos">963</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos">964</span></a>    <span class="o">...</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos">965</span></a>
</span><span id="L-966"><a href="#L-966"><span class="linenos">966</span></a><span class="k">def</span> <span class="nf">definition_dependencies</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="n">Definition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos">967</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `Definition` `d`, calculate the set of `Definition`&#39;s that are directly reachable for `d`.</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos">968</span></a><span class="sd">    Transitively reachable definitions are not included nor is `d` itself.</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos">969</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos">970</span></a>    <span class="o">...</span>
</span></pre></div>


            </section>
                <section id="file_dataset_reader">
                            <input id="file_dataset_reader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">file_dataset_reader</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fname</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#Dataset_Reader">pytact.graph_api_capnp_cython.Dataset_Reader</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="file_dataset_reader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#file_dataset_reader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="file_dataset_reader-109"><a href="#file_dataset_reader-109"><span class="linenos">109</span></a><span class="nd">@contextmanager</span>
</span><span id="file_dataset_reader-110"><a href="#file_dataset_reader-110"><span class="linenos">110</span></a><span class="k">def</span> <span class="nf">file_dataset_reader</span><span class="p">(</span><span class="n">fname</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">Dataset_Reader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="file_dataset_reader-111"><a href="#file_dataset_reader-111"><span class="linenos">111</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a single dataset file into memory, and expose its raw Cap&#39;n Proto structures.</span>
</span><span id="file_dataset_reader-112"><a href="#file_dataset_reader-112"><span class="linenos">112</span></a>
</span><span id="file_dataset_reader-113"><a href="#file_dataset_reader-113"><span class="linenos">113</span></a><span class="sd">    This is a low-level function. Prefer to use `data_reader` or `lowlevel_data_reader`.</span>
</span><span id="file_dataset_reader-114"><a href="#file_dataset_reader-114"><span class="linenos">114</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="file_dataset_reader-115"><a href="#file_dataset_reader-115"><span class="linenos">115</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Load a single dataset file into memory, and expose its raw Cap'n Proto structures.</p>

<p>This is a low-level function. Prefer to use <code><a href="#data_reader">data_reader</a></code> or <code><a href="#lowlevel_data_reader">lowlevel_data_reader</a></code>.</p>
</div>


                </section>
                <section id="LowlevelDataReader">
                            <input id="LowlevelDataReader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LowlevelDataReader</span>:

                <label class="view-source-button" for="LowlevelDataReader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowlevelDataReader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowlevelDataReader-117"><a href="#LowlevelDataReader-117"><span class="linenos">117</span></a><span class="k">class</span> <span class="nc">LowlevelDataReader</span><span class="p">:</span>
</span><span id="LowlevelDataReader-118"><a href="#LowlevelDataReader-118"><span class="linenos">118</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A thin wrapper around the raw Cap&#39;n Proto structures contained in a dataset directory.</span>
</span><span id="LowlevelDataReader-119"><a href="#LowlevelDataReader-119"><span class="linenos">119</span></a>
</span><span id="LowlevelDataReader-120"><a href="#LowlevelDataReader-120"><span class="linenos">120</span></a><span class="sd">    Every file in the directory is assigned an integer called a graph-id. This class is a</span>
</span><span id="LowlevelDataReader-121"><a href="#LowlevelDataReader-121"><span class="linenos">121</span></a><span class="sd">    `Sequence` that allows the retrieval of the structures in a file by its graph-id.</span>
</span><span id="LowlevelDataReader-122"><a href="#LowlevelDataReader-122"><span class="linenos">122</span></a><span class="sd">    Additionally, the function `local_to_global` translates a dependency-index relative to</span>
</span><span id="LowlevelDataReader-123"><a href="#LowlevelDataReader-123"><span class="linenos">123</span></a><span class="sd">    a graph-id to a new graph-id. This allows one to find out in which file a node in a</span>
</span><span id="LowlevelDataReader-124"><a href="#LowlevelDataReader-124"><span class="linenos">124</span></a><span class="sd">    graph is located.</span>
</span><span id="LowlevelDataReader-125"><a href="#LowlevelDataReader-125"><span class="linenos">125</span></a>
</span><span id="LowlevelDataReader-126"><a href="#LowlevelDataReader-126"><span class="linenos">126</span></a><span class="sd">    This is a lowlevel interface. For details on using the exposed structures the documentation</span>
</span><span id="LowlevelDataReader-127"><a href="#LowlevelDataReader-127"><span class="linenos">127</span></a><span class="sd">    in the Cap&#39;n Proto API file.</span>
</span><span id="LowlevelDataReader-128"><a href="#LowlevelDataReader-128"><span class="linenos">128</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader-129"><a href="#LowlevelDataReader-129"><span class="linenos">129</span></a>
</span><span id="LowlevelDataReader-130"><a href="#LowlevelDataReader-130"><span class="linenos">130</span></a>    <span class="n">graphid_by_filename</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span id="LowlevelDataReader-131"><a href="#LowlevelDataReader-131"><span class="linenos">131</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map from filenames in the data directory to their graph-id&#39;s.&quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader-132"><a href="#LowlevelDataReader-132"><span class="linenos">132</span></a>
</span><span id="LowlevelDataReader-133"><a href="#LowlevelDataReader-133"><span class="linenos">133</span></a>    <span class="n">graph_files</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span>
</span><span id="LowlevelDataReader-134"><a href="#LowlevelDataReader-134"><span class="linenos">134</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map&#39;s a graph-id to a filename. Inverse of `graphid_by_filename`.&quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader-135"><a href="#LowlevelDataReader-135"><span class="linenos">135</span></a>
</span><span id="LowlevelDataReader-136"><a href="#LowlevelDataReader-136"><span class="linenos">136</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="LowlevelDataReader-137"><a href="#LowlevelDataReader-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="LowlevelDataReader-138"><a href="#LowlevelDataReader-138"><span class="linenos">138</span></a>
</span><span id="LowlevelDataReader-139"><a href="#LowlevelDataReader-139"><span class="linenos">139</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="LowlevelDataReader-140"><a href="#LowlevelDataReader-140"><span class="linenos">140</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="LowlevelDataReader-141"><a href="#LowlevelDataReader-141"><span class="linenos">141</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the graph-id</span>
</span><span id="LowlevelDataReader-142"><a href="#LowlevelDataReader-142"><span class="linenos">142</span></a><span class="sd">        of the file where the node is physically located.</span>
</span><span id="LowlevelDataReader-143"><a href="#LowlevelDataReader-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader-144"><a href="#LowlevelDataReader-144"><span class="linenos">144</span></a>        <span class="o">...</span>
</span><span id="LowlevelDataReader-145"><a href="#LowlevelDataReader-145"><span class="linenos">145</span></a>
</span><span id="LowlevelDataReader-146"><a href="#LowlevelDataReader-146"><span class="linenos">146</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="LowlevelDataReader-147"><a href="#LowlevelDataReader-147"><span class="linenos">147</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the raw Cap&#39;n Proto structures associated with a graph-id.&quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader-148"><a href="#LowlevelDataReader-148"><span class="linenos">148</span></a>        <span class="o">...</span>
</span><span id="LowlevelDataReader-149"><a href="#LowlevelDataReader-149"><span class="linenos">149</span></a>
</span><span id="LowlevelDataReader-150"><a href="#LowlevelDataReader-150"><span class="linenos">150</span></a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span> <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A thin wrapper around the raw Cap'n Proto structures contained in a dataset directory.</p>

<p>Every file in the directory is assigned an integer called a graph-id. This class is a
<code>Sequence</code> that allows the retrieval of the structures in a file by its graph-id.
Additionally, the function <code><a href="#LowlevelDataReader.local_to_global">local_to_global</a></code> translates a dependency-index relative to
a graph-id to a new graph-id. This allows one to find out in which file a node in a
graph is located.</p>

<p>This is a lowlevel interface. For details on using the exposed structures the documentation
in the Cap'n Proto API file.</p>
</div>


                            <div id="LowlevelDataReader.graphid_by_filename" class="classattr">
                                <div class="attr variable">
            <span class="name">graphid_by_filename</span><span class="annotation">: dict[pathlib.Path, int]</span>

        
    </div>
    <a class="headerlink" href="#LowlevelDataReader.graphid_by_filename"></a>
    
            <div class="docstring"><p>Map from filenames in the data directory to their graph-id's.</p>
</div>


                            </div>
                            <div id="LowlevelDataReader.graph_files" class="classattr">
                                <div class="attr variable">
            <span class="name">graph_files</span><span class="annotation">: list[pathlib.Path]</span>

        
    </div>
    <a class="headerlink" href="#LowlevelDataReader.graph_files"></a>
    
            <div class="docstring"><p>Map's a graph-id to a filename. Inverse of <code><a href="#LowlevelDataReader.graphid_by_filename">graphid_by_filename</a></code>.</p>
</div>


                            </div>
                            <div id="LowlevelDataReader.local_to_global" class="classattr">
                                        <input id="LowlevelDataReader.local_to_global-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">local_to_global</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">graph</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="LowlevelDataReader.local_to_global-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowlevelDataReader.local_to_global"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowlevelDataReader.local_to_global-136"><a href="#LowlevelDataReader.local_to_global-136"><span class="linenos">136</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="LowlevelDataReader.local_to_global-137"><a href="#LowlevelDataReader.local_to_global-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="LowlevelDataReader.local_to_global-138"><a href="#LowlevelDataReader.local_to_global-138"><span class="linenos">138</span></a>
</span><span id="LowlevelDataReader.local_to_global-139"><a href="#LowlevelDataReader.local_to_global-139"><span class="linenos">139</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="LowlevelDataReader.local_to_global-140"><a href="#LowlevelDataReader.local_to_global-140"><span class="linenos">140</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="LowlevelDataReader.local_to_global-141"><a href="#LowlevelDataReader.local_to_global-141"><span class="linenos">141</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the graph-id</span>
</span><span id="LowlevelDataReader.local_to_global-142"><a href="#LowlevelDataReader.local_to_global-142"><span class="linenos">142</span></a><span class="sd">        of the file where the node is physically located.</span>
</span><span id="LowlevelDataReader.local_to_global-143"><a href="#LowlevelDataReader.local_to_global-143"><span class="linenos">143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LowlevelDataReader.local_to_global-144"><a href="#LowlevelDataReader.local_to_global-144"><span class="linenos">144</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Convert a dependency-index relative to a graph-id to a new graph-id.</p>

<p>This is used to find the graph-id where a particular node can be found. If <code>graph</code> is the
graph-id that contains a reference to a node and <code>dep_index</code> is the relative location
where that node can be found then <code>local_to_global(graph, dep_index)</code> finds the graph-id
of the file where the node is physically located.</p>
</div>


                            </div>
                </section>
                <section id="lowlevel_data_reader">
                            <input id="lowlevel_data_reader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">lowlevel_data_reader</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">dataset_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#LowlevelDataReader">LowlevelDataReader</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="lowlevel_data_reader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#lowlevel_data_reader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="lowlevel_data_reader-152"><a href="#lowlevel_data_reader-152"><span class="linenos">152</span></a><span class="nd">@contextmanager</span>
</span><span id="lowlevel_data_reader-153"><a href="#lowlevel_data_reader-153"><span class="linenos">153</span></a><span class="k">def</span> <span class="nf">lowlevel_data_reader</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">LowlevelDataReader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="lowlevel_data_reader-154"><a href="#lowlevel_data_reader-154"><span class="linenos">154</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map a directory of dataset files into memory, and expose their raw Cap&#39;n Proto structures.</span>
</span><span id="lowlevel_data_reader-155"><a href="#lowlevel_data_reader-155"><span class="linenos">155</span></a>
</span><span id="lowlevel_data_reader-156"><a href="#lowlevel_data_reader-156"><span class="linenos">156</span></a><span class="sd">    Arguments:</span>
</span><span id="lowlevel_data_reader-157"><a href="#lowlevel_data_reader-157"><span class="linenos">157</span></a><span class="sd">    `dataset_path`: Can either be a dataset directory, or a SquashFS image file. In case of an image</span>
</span><span id="lowlevel_data_reader-158"><a href="#lowlevel_data_reader-158"><span class="linenos">158</span></a><span class="sd">                    file `dataset.squ`, the image will be mounted using `squashfuse` on directory</span>
</span><span id="lowlevel_data_reader-159"><a href="#lowlevel_data_reader-159"><span class="linenos">159</span></a><span class="sd">                    `dataset/`, after which the contents of that directory will be read.</span>
</span><span id="lowlevel_data_reader-160"><a href="#lowlevel_data_reader-160"><span class="linenos">160</span></a>
</span><span id="lowlevel_data_reader-161"><a href="#lowlevel_data_reader-161"><span class="linenos">161</span></a><span class="sd">    This is a low-level function. Prefer to use `data_reader`. See `LowlevelDataReader` for</span>
</span><span id="lowlevel_data_reader-162"><a href="#lowlevel_data_reader-162"><span class="linenos">162</span></a><span class="sd">    further documentation.</span>
</span><span id="lowlevel_data_reader-163"><a href="#lowlevel_data_reader-163"><span class="linenos">163</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="lowlevel_data_reader-164"><a href="#lowlevel_data_reader-164"><span class="linenos">164</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Map a directory of dataset files into memory, and expose their raw Cap'n Proto structures.</p>

<p>Arguments:
<code>dataset_path</code>: Can either be a dataset directory, or a SquashFS image file. In case of an image
                file <code>dataset.squ</code>, the image will be mounted using <code>squashfuse</code> on directory
                <code>dataset/</code>, after which the contents of that directory will be read.</p>

<p>This is a low-level function. Prefer to use <code><a href="#data_reader">data_reader</a></code>. See <code><a href="#LowlevelDataReader">LowlevelDataReader</a></code> for
further documentation.</p>
</div>


                </section>
                <section id="ProofStateId">
                    <div class="attr variable">
            <span class="name">ProofStateId</span>        =
<span class="default_value">&lt;class &#39;int&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#ProofStateId"></a>
    
    

                </section>
                <section id="TacticId">
                    <div class="attr variable">
            <span class="name">TacticId</span>        =
<span class="default_value">&lt;class &#39;int&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#TacticId"></a>
    
    

                </section>
                <section id="GraphId">
                    <div class="attr variable">
            <span class="name">GraphId</span>        =
<span class="default_value">&lt;class &#39;int&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#GraphId"></a>
    
    

                </section>
                <section id="NodeId">
                    <div class="attr variable">
            <span class="name">NodeId</span>        =
<span class="default_value">&lt;class &#39;int&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#NodeId"></a>
    
    

                </section>
                <section id="NodeHash">
                    <div class="attr variable">
            <span class="name">NodeHash</span>        =
<span class="default_value">&lt;class &#39;int&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#NodeHash"></a>
    
    

                </section>
                <section id="Node">
                            <input id="Node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Node</span>:

                <label class="view-source-button" for="Node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Node-172"><a href="#Node-172"><span class="linenos">172</span></a><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
</span><span id="Node-173"><a href="#Node-173"><span class="linenos">173</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A node in the calculus of inductive construction graph.</span>
</span><span id="Node-174"><a href="#Node-174"><span class="linenos">174</span></a>
</span><span id="Node-175"><a href="#Node-175"><span class="linenos">175</span></a><span class="sd">    A node has a `label`, a unique `identity` and `children`. Some nodes are also</span>
</span><span id="Node-176"><a href="#Node-176"><span class="linenos">176</span></a><span class="sd">    a `Definition`.</span>
</span><span id="Node-177"><a href="#Node-177"><span class="linenos">177</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Node-178"><a href="#Node-178"><span class="linenos">178</span></a>
</span><span id="Node-179"><a href="#Node-179"><span class="linenos">179</span></a>    <span class="n">graph</span> <span class="p">:</span> <span class="n">GraphId</span>
</span><span id="Node-180"><a href="#Node-180"><span class="linenos">180</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The id of the graph in which this node occurs. For lowlevel use only.&quot;&quot;&quot;</span>
</span><span id="Node-181"><a href="#Node-181"><span class="linenos">181</span></a>
</span><span id="Node-182"><a href="#Node-182"><span class="linenos">182</span></a>    <span class="n">nodeid</span> <span class="p">:</span> <span class="n">NodeId</span>
</span><span id="Node-183"><a href="#Node-183"><span class="linenos">183</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The local id of the node in the dataset. For lowlevel use only.&quot;&quot;&quot;</span>
</span><span id="Node-184"><a href="#Node-184"><span class="linenos">184</span></a>
</span><span id="Node-185"><a href="#Node-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Node-186"><a href="#Node-186"><span class="linenos">186</span></a>        <span class="o">...</span>
</span><span id="Node-187"><a href="#Node-187"><span class="linenos">187</span></a>
</span><span id="Node-188"><a href="#Node-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Node-189"><a href="#Node-189"><span class="linenos">189</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Physical equality of two nodes. Note that two nodes with a different physical equality</span>
</span><span id="Node-190"><a href="#Node-190"><span class="linenos">190</span></a><span class="sd">        may have the same `identity`. See `identity` for details.</span>
</span><span id="Node-191"><a href="#Node-191"><span class="linenos">191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Node-192"><a href="#Node-192"><span class="linenos">192</span></a>        <span class="o">...</span>
</span><span id="Node-193"><a href="#Node-193"><span class="linenos">193</span></a>
</span><span id="Node-194"><a href="#Node-194"><span class="linenos">194</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Node-195"><a href="#Node-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A hash that is corresponds to physical equality, not to be confused by `identity`.&quot;&quot;&quot;</span>
</span><span id="Node-196"><a href="#Node-196"><span class="linenos">196</span></a>        <span class="o">...</span>
</span><span id="Node-197"><a href="#Node-197"><span class="linenos">197</span></a>
</span><span id="Node-198"><a href="#Node-198"><span class="linenos">198</span></a>    <span class="nd">@property</span>
</span><span id="Node-199"><a href="#Node-199"><span class="linenos">199</span></a>    <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">apic</span><span class="o">.</span><span class="n">Graph_Node_Label_Reader</span><span class="p">:</span>
</span><span id="Node-200"><a href="#Node-200"><span class="linenos">200</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The label of the node, indicating it&#39;s function in the CIC graph.&quot;&quot;&quot;</span>
</span><span id="Node-201"><a href="#Node-201"><span class="linenos">201</span></a>        <span class="o">...</span>
</span><span id="Node-202"><a href="#Node-202"><span class="linenos">202</span></a>
</span><span id="Node-203"><a href="#Node-203"><span class="linenos">203</span></a>    <span class="nd">@property</span>
</span><span id="Node-204"><a href="#Node-204"><span class="linenos">204</span></a>    <span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NodeHash</span><span class="p">:</span>
</span><span id="Node-205"><a href="#Node-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The identity of a node uniquely determines it. That is, one can consider any to nodes with the same</span>
</span><span id="Node-206"><a href="#Node-206"><span class="linenos">206</span></a><span class="sd">        identity to be equal. The notion of equal we use is as follows:</span>
</span><span id="Node-207"><a href="#Node-207"><span class="linenos">207</span></a><span class="sd">        1. Graph perspective: Two nodes have the same identity if and only if they are bisimilar.</span>
</span><span id="Node-208"><a href="#Node-208"><span class="linenos">208</span></a><span class="sd">           In this notion, bisimilarity does take into consideration the label of the nodes, modulo some</span>
</span><span id="Node-209"><a href="#Node-209"><span class="linenos">209</span></a><span class="sd">           equivalence class that is not fully specified here. One aspect of the equivalence class is that</span>
</span><span id="Node-210"><a href="#Node-210"><span class="linenos">210</span></a><span class="sd">           for definition nodes their associated global context (accessed through `Definition.previous`) is</span>
</span><span id="Node-211"><a href="#Node-211"><span class="linenos">211</span></a><span class="sd">           not taken into account.</span>
</span><span id="Node-212"><a href="#Node-212"><span class="linenos">212</span></a><span class="sd">        2. Lambda calculus perspective: Two nodes have the same identity if their corresponding lambda terms</span>
</span><span id="Node-213"><a href="#Node-213"><span class="linenos">213</span></a><span class="sd">           are alpha-equivalent. Note that two definitions with the same body are not considered</span>
</span><span id="Node-214"><a href="#Node-214"><span class="linenos">214</span></a><span class="sd">           alpha-equivalent.</span>
</span><span id="Node-215"><a href="#Node-215"><span class="linenos">215</span></a>
</span><span id="Node-216"><a href="#Node-216"><span class="linenos">216</span></a><span class="sd">        The identity of a node is used to perform partial graph-sharing. That is, two nodes with the same</span>
</span><span id="Node-217"><a href="#Node-217"><span class="linenos">217</span></a><span class="sd">        identity are merged when the graph is generated. There are two reasons why two nodes with the same</span>
</span><span id="Node-218"><a href="#Node-218"><span class="linenos">218</span></a><span class="sd">        semantic identity might have a different physical identity:</span>
</span><span id="Node-219"><a href="#Node-219"><span class="linenos">219</span></a><span class="sd">        1. Nodes are only merged when the first node exists in the same graph as the second node, or exists</span>
</span><span id="Node-220"><a href="#Node-220"><span class="linenos">220</span></a><span class="sd">           in a dependent graph. Hence, nodes originating from developments that do not depend on each other</span>
</span><span id="Node-221"><a href="#Node-221"><span class="linenos">221</span></a><span class="sd">           are never merged. Full graph-sharing would require global analysis on a dataset, which any consumer</span>
</span><span id="Node-222"><a href="#Node-222"><span class="linenos">222</span></a><span class="sd">           can optionally do as a post-processing step.</span>
</span><span id="Node-223"><a href="#Node-223"><span class="linenos">223</span></a><span class="sd">        2. Two definition nodes with the same name and body have the same identity. But if they occur in</span>
</span><span id="Node-224"><a href="#Node-224"><span class="linenos">224</span></a><span class="sd">           different global contexts, these nodes are physically different to ensure the integrity of their</span>
</span><span id="Node-225"><a href="#Node-225"><span class="linenos">225</span></a><span class="sd">           global contexts.</span>
</span><span id="Node-226"><a href="#Node-226"><span class="linenos">226</span></a>
</span><span id="Node-227"><a href="#Node-227"><span class="linenos">227</span></a><span class="sd">        Beware that the identity is currently a 64 bit field. For datasets that have graphs of size in the</span>
</span><span id="Node-228"><a href="#Node-228"><span class="linenos">228</span></a><span class="sd">        order of billions of nodes there is a non-trivial chance of a collision. (We consider this acceptable</span>
</span><span id="Node-229"><a href="#Node-229"><span class="linenos">229</span></a><span class="sd">        for machine learning purposes.)</span>
</span><span id="Node-230"><a href="#Node-230"><span class="linenos">230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Node-231"><a href="#Node-231"><span class="linenos">231</span></a>        <span class="o">...</span>
</span><span id="Node-232"><a href="#Node-232"><span class="linenos">232</span></a>
</span><span id="Node-233"><a href="#Node-233"><span class="linenos">233</span></a>    <span class="nd">@property</span>
</span><span id="Node-234"><a href="#Node-234"><span class="linenos">234</span></a>    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Node</span><span class="p">]]:</span>
</span><span id="Node-235"><a href="#Node-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The children of a node, together with the labels of the edges towards the children.</span>
</span><span id="Node-236"><a href="#Node-236"><span class="linenos">236</span></a><span class="sd">        Note that for efficiency purposes, the label is represented as an integer. The corresponding</span>
</span><span id="Node-237"><a href="#Node-237"><span class="linenos">237</span></a><span class="sd">        enum of this integer is `graph_api_capnp.EdgeClassification`.&quot;&quot;&quot;</span>
</span><span id="Node-238"><a href="#Node-238"><span class="linenos">238</span></a>        <span class="o">...</span>
</span><span id="Node-239"><a href="#Node-239"><span class="linenos">239</span></a>
</span><span id="Node-240"><a href="#Node-240"><span class="linenos">240</span></a>    <span class="nd">@property</span>
</span><span id="Node-241"><a href="#Node-241"><span class="linenos">241</span></a>    <span class="k">def</span> <span class="nf">definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Node-242"><a href="#Node-242"><span class="linenos">242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Some nodes in the CIC graph represent definitions. Such nodes contain extra information about the</span>
</span><span id="Node-243"><a href="#Node-243"><span class="linenos">243</span></a><span class="sd">        definition.</span>
</span><span id="Node-244"><a href="#Node-244"><span class="linenos">244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Node-245"><a href="#Node-245"><span class="linenos">245</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A node in the calculus of inductive construction graph.</p>

<p>A node has a <code><a href="#Node.label">label</a></code>, a unique <code><a href="#Node.identity">identity</a></code> and <code><a href="#Node.children">children</a></code>. Some nodes are also
a <code><a href="#Definition">Definition</a></code>.</p>
</div>


                            <div id="Node.graph" class="classattr">
                                <div class="attr variable">
            <span class="name">graph</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Node.graph"></a>
    
            <div class="docstring"><p>The id of the graph in which this node occurs. For lowlevel use only.</p>
</div>


                            </div>
                            <div id="Node.nodeid" class="classattr">
                                <div class="attr variable">
            <span class="name">nodeid</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Node.nodeid"></a>
    
            <div class="docstring"><p>The local id of the node in the dataset. For lowlevel use only.</p>
</div>


                            </div>
                            <div id="Node.label" class="classattr">
                                <div class="attr variable">
            <span class="name">label</span><span class="annotation">: <a href="graph_api_capnp_cython.html#Graph_Node_Label_Reader">pytact.graph_api_capnp_cython.Graph_Node_Label_Reader</a></span>

        
    </div>
    <a class="headerlink" href="#Node.label"></a>
    
            <div class="docstring"><p>The label of the node, indicating it's function in the CIC graph.</p>
</div>


                            </div>
                            <div id="Node.identity" class="classattr">
                                <div class="attr variable">
            <span class="name">identity</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Node.identity"></a>
    
            <div class="docstring"><p>The identity of a node uniquely determines it. That is, one can consider any to nodes with the same
identity to be equal. The notion of equal we use is as follows:</p>

<ol>
<li>Graph perspective: Two nodes have the same identity if and only if they are bisimilar.
In this notion, bisimilarity does take into consideration the label of the nodes, modulo some
equivalence class that is not fully specified here. One aspect of the equivalence class is that
for definition nodes their associated global context (accessed through <code><a href="#Definition.previous">Definition.previous</a></code>) is
not taken into account.</li>
<li>Lambda calculus perspective: Two nodes have the same identity if their corresponding lambda terms
are alpha-equivalent. Note that two definitions with the same body are not considered
alpha-equivalent.</li>
</ol>

<p>The identity of a node is used to perform partial graph-sharing. That is, two nodes with the same
identity are merged when the graph is generated. There are two reasons why two nodes with the same
semantic identity might have a different physical identity:</p>

<ol>
<li>Nodes are only merged when the first node exists in the same graph as the second node, or exists
in a dependent graph. Hence, nodes originating from developments that do not depend on each other
are never merged. Full graph-sharing would require global analysis on a dataset, which any consumer
can optionally do as a post-processing step.</li>
<li>Two definition nodes with the same name and body have the same identity. But if they occur in
different global contexts, these nodes are physically different to ensure the integrity of their
global contexts.</li>
</ol>

<p>Beware that the identity is currently a 64 bit field. For datasets that have graphs of size in the
order of billions of nodes there is a non-trivial chance of a collision. (We consider this acceptable
for machine learning purposes.)</p>
</div>


                            </div>
                            <div id="Node.children" class="classattr">
                                <div class="attr variable">
            <span class="name">children</span><span class="annotation">: collections.abc.Sequence[tuple[int, <a href="#Node">Node</a>]]</span>

        
    </div>
    <a class="headerlink" href="#Node.children"></a>
    
            <div class="docstring"><p>The children of a node, together with the labels of the edges towards the children.
Note that for efficiency purposes, the label is represented as an integer. The corresponding
enum of this integer is <code>graph_api_capnp.EdgeClassification</code>.</p>
</div>


                            </div>
                            <div id="Node.definition" class="classattr">
                                <div class="attr variable">
            <span class="name">definition</span><span class="annotation">: <a href="#Definition">Definition</a> | None</span>

        
    </div>
    <a class="headerlink" href="#Node.definition"></a>
    
            <div class="docstring"><p>Some nodes in the CIC graph represent definitions. Such nodes contain extra information about the
definition.</p>
</div>


                            </div>
                </section>
                <section id="ProofState">
                            <input id="ProofState-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ProofState</span>:

                <label class="view-source-button" for="ProofState-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ProofState"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ProofState-247"><a href="#ProofState-247"><span class="linenos">247</span></a><span class="k">class</span> <span class="nc">ProofState</span><span class="p">:</span>
</span><span id="ProofState-248"><a href="#ProofState-248"><span class="linenos">248</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A proof state represents a particular point in the tactical proof of a constant.&quot;&quot;&quot;</span>
</span><span id="ProofState-249"><a href="#ProofState-249"><span class="linenos">249</span></a>
</span><span id="ProofState-250"><a href="#ProofState-250"><span class="linenos">250</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-251"><a href="#ProofState-251"><span class="linenos">251</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ProofState-252"><a href="#ProofState-252"><span class="linenos">252</span></a>        <span class="o">...</span>
</span><span id="ProofState-253"><a href="#ProofState-253"><span class="linenos">253</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ProofState-254"><a href="#ProofState-254"><span class="linenos">254</span></a>        <span class="o">...</span>
</span><span id="ProofState-255"><a href="#ProofState-255"><span class="linenos">255</span></a>
</span><span id="ProofState-256"><a href="#ProofState-256"><span class="linenos">256</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-257"><a href="#ProofState-257"><span class="linenos">257</span></a>    <span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="ProofState-258"><a href="#ProofState-258"><span class="linenos">258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The entry-point of the proof state, all nodes that are &#39;part of&#39; the proof state are</span>
</span><span id="ProofState-259"><a href="#ProofState-259"><span class="linenos">259</span></a><span class="sd">        reachable from here.&quot;&quot;&quot;</span>
</span><span id="ProofState-260"><a href="#ProofState-260"><span class="linenos">260</span></a>        <span class="o">...</span>
</span><span id="ProofState-261"><a href="#ProofState-261"><span class="linenos">261</span></a>
</span><span id="ProofState-262"><a href="#ProofState-262"><span class="linenos">262</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-263"><a href="#ProofState-263"><span class="linenos">263</span></a>    <span class="k">def</span> <span class="nf">context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
</span><span id="ProofState-264"><a href="#ProofState-264"><span class="linenos">264</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The local context of the proof state, given as a tuple of their original name as they appeared in the</span>
</span><span id="ProofState-265"><a href="#ProofState-265"><span class="linenos">265</span></a><span class="sd">        proof and the corresponding node.</span>
</span><span id="ProofState-266"><a href="#ProofState-266"><span class="linenos">266</span></a>
</span><span id="ProofState-267"><a href="#ProofState-267"><span class="linenos">267</span></a><span class="sd">        The nodes always have either label `contextAssum` or `contextDef`.</span>
</span><span id="ProofState-268"><a href="#ProofState-268"><span class="linenos">268</span></a><span class="sd">        Note that these nodes are also reachable from the root of the proof state.</span>
</span><span id="ProofState-269"><a href="#ProofState-269"><span class="linenos">269</span></a>
</span><span id="ProofState-270"><a href="#ProofState-270"><span class="linenos">270</span></a><span class="sd">        The names of the context elements should be used for debugging and viewing purposes only, because</span>
</span><span id="ProofState-271"><a href="#ProofState-271"><span class="linenos">271</span></a><span class="sd">        hypothesis-generating tactics have been modified to use auto-generated names. Hence, tactics should</span>
</span><span id="ProofState-272"><a href="#ProofState-272"><span class="linenos">272</span></a><span class="sd">        not be concerned about the names of the context.</span>
</span><span id="ProofState-273"><a href="#ProofState-273"><span class="linenos">273</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofState-274"><a href="#ProofState-274"><span class="linenos">274</span></a>        <span class="o">...</span>
</span><span id="ProofState-275"><a href="#ProofState-275"><span class="linenos">275</span></a>
</span><span id="ProofState-276"><a href="#ProofState-276"><span class="linenos">276</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-277"><a href="#ProofState-277"><span class="linenos">277</span></a>    <span class="k">def</span> <span class="nf">context_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="ProofState-278"><a href="#ProofState-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The names of the local context nodes of the proof state, as they originally appeared in the proof.</span>
</span><span id="ProofState-279"><a href="#ProofState-279"><span class="linenos">279</span></a>
</span><span id="ProofState-280"><a href="#ProofState-280"><span class="linenos">280</span></a><span class="sd">        These names should be used for debugging and viewing purposes only, because hypothesis-generating tactics have</span>
</span><span id="ProofState-281"><a href="#ProofState-281"><span class="linenos">281</span></a><span class="sd">        been modified to use auto-generated names. Hence, tactics should not be concerned about the names of</span>
</span><span id="ProofState-282"><a href="#ProofState-282"><span class="linenos">282</span></a><span class="sd">        the context.</span>
</span><span id="ProofState-283"><a href="#ProofState-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofState-284"><a href="#ProofState-284"><span class="linenos">284</span></a>        <span class="o">...</span>
</span><span id="ProofState-285"><a href="#ProofState-285"><span class="linenos">285</span></a>
</span><span id="ProofState-286"><a href="#ProofState-286"><span class="linenos">286</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-287"><a href="#ProofState-287"><span class="linenos">287</span></a>    <span class="k">def</span> <span class="nf">context_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="ProofState-288"><a href="#ProofState-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the type/definition of context nodes</span>
</span><span id="ProofState-289"><a href="#ProofState-289"><span class="linenos">289</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofState-290"><a href="#ProofState-290"><span class="linenos">290</span></a>        <span class="o">...</span>
</span><span id="ProofState-291"><a href="#ProofState-291"><span class="linenos">291</span></a>
</span><span id="ProofState-292"><a href="#ProofState-292"><span class="linenos">292</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-293"><a href="#ProofState-293"><span class="linenos">293</span></a>    <span class="k">def</span> <span class="nf">conclusion_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ProofState-294"><a href="#ProofState-294"><span class="linenos">294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the conclusion of the proof state.</span>
</span><span id="ProofState-295"><a href="#ProofState-295"><span class="linenos">295</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofState-296"><a href="#ProofState-296"><span class="linenos">296</span></a>        <span class="o">...</span>
</span><span id="ProofState-297"><a href="#ProofState-297"><span class="linenos">297</span></a>
</span><span id="ProofState-298"><a href="#ProofState-298"><span class="linenos">298</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-299"><a href="#ProofState-299"><span class="linenos">299</span></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ProofState-300"><a href="#ProofState-300"><span class="linenos">300</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the proof state.&quot;&quot;&quot;</span>
</span><span id="ProofState-301"><a href="#ProofState-301"><span class="linenos">301</span></a>        <span class="o">...</span>
</span><span id="ProofState-302"><a href="#ProofState-302"><span class="linenos">302</span></a>
</span><span id="ProofState-303"><a href="#ProofState-303"><span class="linenos">303</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ProofState-304"><a href="#ProofState-304"><span class="linenos">304</span></a>        <span class="o">...</span>
</span><span id="ProofState-305"><a href="#ProofState-305"><span class="linenos">305</span></a>
</span><span id="ProofState-306"><a href="#ProofState-306"><span class="linenos">306</span></a>    <span class="nd">@property</span>
</span><span id="ProofState-307"><a href="#ProofState-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProofStateId</span><span class="p">:</span>
</span><span id="ProofState-308"><a href="#ProofState-308"><span class="linenos">308</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ProofState-309"><a href="#ProofState-309"><span class="linenos">309</span></a><span class="sd">        A unique identifier of the proof state. Any two proof states in a tactical proof that have an equal id</span>
</span><span id="ProofState-310"><a href="#ProofState-310"><span class="linenos">310</span></a><span class="sd">        can morally be regarded to be &#39;the same&#39; proof state.</span>
</span><span id="ProofState-311"><a href="#ProofState-311"><span class="linenos">311</span></a><span class="sd">        IMPORTANT: Two proof states with the same id may still have different contents. This is because proof states</span>
</span><span id="ProofState-312"><a href="#ProofState-312"><span class="linenos">312</span></a><span class="sd">                   can contain existential variables (represented by the `evar` node) that can be filled as a</span>
</span><span id="ProofState-313"><a href="#ProofState-313"><span class="linenos">313</span></a><span class="sd">                   side-effect by a tactic running on another proof state.</span>
</span><span id="ProofState-314"><a href="#ProofState-314"><span class="linenos">314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofState-315"><a href="#ProofState-315"><span class="linenos">315</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A proof state represents a particular point in the tactical proof of a constant.</p>
</div>


                            <div id="ProofState.lowlevel" class="classattr">
                                <div class="attr variable">
            <span class="name">lowlevel</span>

        
    </div>
    <a class="headerlink" href="#ProofState.lowlevel"></a>
    
    

                            </div>
                            <div id="ProofState.root" class="classattr">
                                <div class="attr variable">
            <span class="name">root</span><span class="annotation">: <a href="#Node">Node</a></span>

        
    </div>
    <a class="headerlink" href="#ProofState.root"></a>
    
            <div class="docstring"><p>The entry-point of the proof state, all nodes that are 'part of' the proof state are
reachable from here.</p>
</div>


                            </div>
                            <div id="ProofState.context" class="classattr">
                                <div class="attr variable">
            <span class="name">context</span><span class="annotation">: collections.abc.Sequence[<a href="#Node">Node</a>]</span>

        
    </div>
    <a class="headerlink" href="#ProofState.context"></a>
    
            <div class="docstring"><p>The local context of the proof state, given as a tuple of their original name as they appeared in the
proof and the corresponding node.</p>

<p>The nodes always have either label <code>contextAssum</code> or <code>contextDef</code>.
Note that these nodes are also reachable from the root of the proof state.</p>

<p>The names of the context elements should be used for debugging and viewing purposes only, because
hypothesis-generating tactics have been modified to use auto-generated names. Hence, tactics should
not be concerned about the names of the context.</p>
</div>


                            </div>
                            <div id="ProofState.context_names" class="classattr">
                                <div class="attr variable">
            <span class="name">context_names</span><span class="annotation">: collections.abc.Sequence[str]</span>

        
    </div>
    <a class="headerlink" href="#ProofState.context_names"></a>
    
            <div class="docstring"><p>The names of the local context nodes of the proof state, as they originally appeared in the proof.</p>

<p>These names should be used for debugging and viewing purposes only, because hypothesis-generating tactics have
been modified to use auto-generated names. Hence, tactics should not be concerned about the names of
the context.</p>
</div>


                            </div>
                            <div id="ProofState.context_text" class="classattr">
                                <div class="attr variable">
            <span class="name">context_text</span><span class="annotation">: collections.abc.Sequence[str]</span>

        
    </div>
    <a class="headerlink" href="#ProofState.context_text"></a>
    
            <div class="docstring"><p>A textual representation of the type/definition of context nodes</p>
</div>


                            </div>
                            <div id="ProofState.conclusion_text" class="classattr">
                                <div class="attr variable">
            <span class="name">conclusion_text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ProofState.conclusion_text"></a>
    
            <div class="docstring"><p>A textual representation of the conclusion of the proof state.</p>
</div>


                            </div>
                            <div id="ProofState.text" class="classattr">
                                <div class="attr variable">
            <span class="name">text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ProofState.text"></a>
    
            <div class="docstring"><p>A textual representation of the proof state.</p>
</div>


                            </div>
                            <div id="ProofState.id" class="classattr">
                                <div class="attr variable">
            <span class="name">id</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#ProofState.id"></a>
    
            <div class="docstring"><p>A unique identifier of the proof state. Any two proof states in a tactical proof that have an equal id
can morally be regarded to be 'the same' proof state.
IMPORTANT: Two proof states with the same id may still have different contents. This is because proof states
           can contain existential variables (represented by the <code>evar</code> node) that can be filled as a
           side-effect by a tactic running on another proof state.</p>
</div>


                            </div>
                </section>
                <section id="Unresolvable">
                    <div class="attr variable">
            <span class="name">Unresolvable</span><span class="annotation">: TypeAlias</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Unresolvable"></a>
    
    

                </section>
                <section id="Unknown">
                    <div class="attr variable">
            <span class="name">Unknown</span><span class="annotation">: TypeAlias</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Unknown"></a>
    
    

                </section>
                <section id="Outcome">
                            <input id="Outcome-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Outcome</span>:

                <label class="view-source-button" for="Outcome-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Outcome"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Outcome-319"><a href="#Outcome-319"><span class="linenos">319</span></a><span class="k">class</span> <span class="nc">Outcome</span><span class="p">:</span>
</span><span id="Outcome-320"><a href="#Outcome-320"><span class="linenos">320</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An outcome is the result of running a tactic on a proof state. A tactic may run on multiple proof states.&quot;&quot;&quot;</span>
</span><span id="Outcome-321"><a href="#Outcome-321"><span class="linenos">321</span></a>
</span><span id="Outcome-322"><a href="#Outcome-322"><span class="linenos">322</span></a>    <span class="n">tactic</span> <span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">Tactic_Reader</span> <span class="o">|</span> <span class="n">Unknown</span>
</span><span id="Outcome-323"><a href="#Outcome-323"><span class="linenos">323</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The tactic that generated the outcome. For it&#39;s arguments, see `tactic_arguments`</span>
</span><span id="Outcome-324"><a href="#Outcome-324"><span class="linenos">324</span></a>
</span><span id="Outcome-325"><a href="#Outcome-325"><span class="linenos">325</span></a><span class="sd">    Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as &#39;unknown&#39;.</span>
</span><span id="Outcome-326"><a href="#Outcome-326"><span class="linenos">326</span></a><span class="sd">    This currently happens with tactics that are run as a result of the `Proof with tac` construct and it</span>
</span><span id="Outcome-327"><a href="#Outcome-327"><span class="linenos">327</span></a><span class="sd">    happens for tactics that are known to be unsafe like `change_no_check`, `fix`, `cofix` and more.</span>
</span><span id="Outcome-328"><a href="#Outcome-328"><span class="linenos">328</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Outcome-329"><a href="#Outcome-329"><span class="linenos">329</span></a>
</span><span id="Outcome-330"><a href="#Outcome-330"><span class="linenos">330</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-331"><a href="#Outcome-331"><span class="linenos">331</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Outcome-332"><a href="#Outcome-332"><span class="linenos">332</span></a>        <span class="o">...</span>
</span><span id="Outcome-333"><a href="#Outcome-333"><span class="linenos">333</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Outcome-334"><a href="#Outcome-334"><span class="linenos">334</span></a>        <span class="o">...</span>
</span><span id="Outcome-335"><a href="#Outcome-335"><span class="linenos">335</span></a>
</span><span id="Outcome-336"><a href="#Outcome-336"><span class="linenos">336</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-337"><a href="#Outcome-337"><span class="linenos">337</span></a>    <span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProofState</span><span class="p">:</span>
</span><span id="Outcome-338"><a href="#Outcome-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The proof state before the tactic execution.&quot;&quot;&quot;</span>
</span><span id="Outcome-339"><a href="#Outcome-339"><span class="linenos">339</span></a>        <span class="o">...</span>
</span><span id="Outcome-340"><a href="#Outcome-340"><span class="linenos">340</span></a>
</span><span id="Outcome-341"><a href="#Outcome-341"><span class="linenos">341</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-342"><a href="#Outcome-342"><span class="linenos">342</span></a>    <span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofState</span><span class="p">]:</span>
</span><span id="Outcome-343"><a href="#Outcome-343"><span class="linenos">343</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The new proof states that were generated by the tactic.&quot;&quot;&quot;</span>
</span><span id="Outcome-344"><a href="#Outcome-344"><span class="linenos">344</span></a>        <span class="o">...</span>
</span><span id="Outcome-345"><a href="#Outcome-345"><span class="linenos">345</span></a>
</span><span id="Outcome-346"><a href="#Outcome-346"><span class="linenos">346</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-347"><a href="#Outcome-347"><span class="linenos">347</span></a>    <span class="k">def</span> <span class="nf">term</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="Outcome-348"><a href="#Outcome-348"><span class="linenos">348</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The proof term that witnesses the transition from the before state to the after states. It contains a</span>
</span><span id="Outcome-349"><a href="#Outcome-349"><span class="linenos">349</span></a><span class="sd">        hole (an `evar` node) for each of the after states. It may also refer to elements of the local context of</span>
</span><span id="Outcome-350"><a href="#Outcome-350"><span class="linenos">350</span></a><span class="sd">        the before state.</span>
</span><span id="Outcome-351"><a href="#Outcome-351"><span class="linenos">351</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Outcome-352"><a href="#Outcome-352"><span class="linenos">352</span></a>        <span class="o">...</span>
</span><span id="Outcome-353"><a href="#Outcome-353"><span class="linenos">353</span></a>
</span><span id="Outcome-354"><a href="#Outcome-354"><span class="linenos">354</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-355"><a href="#Outcome-355"><span class="linenos">355</span></a>    <span class="k">def</span> <span class="nf">term_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Outcome-356"><a href="#Outcome-356"><span class="linenos">356</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the proof term.&quot;&quot;&quot;</span>
</span><span id="Outcome-357"><a href="#Outcome-357"><span class="linenos">357</span></a>        <span class="o">...</span>
</span><span id="Outcome-358"><a href="#Outcome-358"><span class="linenos">358</span></a>
</span><span id="Outcome-359"><a href="#Outcome-359"><span class="linenos">359</span></a>    <span class="nd">@property</span>
</span><span id="Outcome-360"><a href="#Outcome-360"><span class="linenos">360</span></a>    <span class="k">def</span> <span class="nf">tactic_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="n">Unresolvable</span><span class="p">]:</span>
</span><span id="Outcome-361"><a href="#Outcome-361"><span class="linenos">361</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The arguments of the tactic that produced this outcome.</span>
</span><span id="Outcome-362"><a href="#Outcome-362"><span class="linenos">362</span></a>
</span><span id="Outcome-363"><a href="#Outcome-363"><span class="linenos">363</span></a><span class="sd">        The node is the root of a graph representing an argument that is a term in the calculus of constructions.</span>
</span><span id="Outcome-364"><a href="#Outcome-364"><span class="linenos">364</span></a><span class="sd">        Sometimes, an argument is not resolvable to a term, in which case it is marked as `Unresolvable`.</span>
</span><span id="Outcome-365"><a href="#Outcome-365"><span class="linenos">365</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Outcome-366"><a href="#Outcome-366"><span class="linenos">366</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>An outcome is the result of running a tactic on a proof state. A tactic may run on multiple proof states.</p>
</div>


                            <div id="Outcome.tactic" class="classattr">
                                <div class="attr variable">
            <span class="name">tactic</span><span class="annotation">: <a href="graph_api_capnp_cython.html#Tactic_Reader">pytact.graph_api_capnp_cython.Tactic_Reader</a> | None</span>

        
    </div>
    <a class="headerlink" href="#Outcome.tactic"></a>
    
            <div class="docstring"><p>The tactic that generated the outcome. For it's arguments, see <code><a href="#Outcome.tactic_arguments">tactic_arguments</a></code></p>

<p>Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as 'unknown'.
This currently happens with tactics that are run as a result of the <code>Proof with tac</code> construct and it
happens for tactics that are known to be unsafe like <code>change_no_check</code>, <code>fix</code>, <code>cofix</code> and more.</p>
</div>


                            </div>
                            <div id="Outcome.lowlevel" class="classattr">
                                <div class="attr variable">
            <span class="name">lowlevel</span>

        
    </div>
    <a class="headerlink" href="#Outcome.lowlevel"></a>
    
    

                            </div>
                            <div id="Outcome.before" class="classattr">
                                <div class="attr variable">
            <span class="name">before</span><span class="annotation">: <a href="#ProofState">ProofState</a></span>

        
    </div>
    <a class="headerlink" href="#Outcome.before"></a>
    
            <div class="docstring"><p>The proof state before the tactic execution.</p>
</div>


                            </div>
                            <div id="Outcome.after" class="classattr">
                                <div class="attr variable">
            <span class="name">after</span><span class="annotation">: collections.abc.Sequence[<a href="#ProofState">ProofState</a>]</span>

        
    </div>
    <a class="headerlink" href="#Outcome.after"></a>
    
            <div class="docstring"><p>The new proof states that were generated by the tactic.</p>
</div>


                            </div>
                            <div id="Outcome.term" class="classattr">
                                <div class="attr variable">
            <span class="name">term</span><span class="annotation">: <a href="#Node">Node</a></span>

        
    </div>
    <a class="headerlink" href="#Outcome.term"></a>
    
            <div class="docstring"><p>The proof term that witnesses the transition from the before state to the after states. It contains a
hole (an <code>evar</code> node) for each of the after states. It may also refer to elements of the local context of
the before state.</p>
</div>


                            </div>
                            <div id="Outcome.term_text" class="classattr">
                                <div class="attr variable">
            <span class="name">term_text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Outcome.term_text"></a>
    
            <div class="docstring"><p>A textual representation of the proof term.</p>
</div>


                            </div>
                            <div id="Outcome.tactic_arguments" class="classattr">
                                <div class="attr variable">
            <span class="name">tactic_arguments</span><span class="annotation">: collections.abc.Sequence[<a href="#Node">Node</a> | None]</span>

        
    </div>
    <a class="headerlink" href="#Outcome.tactic_arguments"></a>
    
            <div class="docstring"><p>The arguments of the tactic that produced this outcome.</p>

<p>The node is the root of a graph representing an argument that is a term in the calculus of constructions.
Sometimes, an argument is not resolvable to a term, in which case it is marked as <code><a href="#Unresolvable">Unresolvable</a></code>.</p>
</div>


                            </div>
                </section>
                <section id="ProofStep">
                            <input id="ProofStep-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ProofStep</span>:

                <label class="view-source-button" for="ProofStep-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ProofStep"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ProofStep-368"><a href="#ProofStep-368"><span class="linenos">368</span></a><span class="k">class</span> <span class="nc">ProofStep</span><span class="p">:</span>
</span><span id="ProofStep-369"><a href="#ProofStep-369"><span class="linenos">369</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A proof step is the execution of a single tactic on one or more proof states, producing a list of outcomes.</span>
</span><span id="ProofStep-370"><a href="#ProofStep-370"><span class="linenos">370</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ProofStep-371"><a href="#ProofStep-371"><span class="linenos">371</span></a>
</span><span id="ProofStep-372"><a href="#ProofStep-372"><span class="linenos">372</span></a>    <span class="nd">@property</span>
</span><span id="ProofStep-373"><a href="#ProofStep-373"><span class="linenos">373</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ProofStep-374"><a href="#ProofStep-374"><span class="linenos">374</span></a>        <span class="o">...</span>
</span><span id="ProofStep-375"><a href="#ProofStep-375"><span class="linenos">375</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ProofStep-376"><a href="#ProofStep-376"><span class="linenos">376</span></a>        <span class="o">...</span>
</span><span id="ProofStep-377"><a href="#ProofStep-377"><span class="linenos">377</span></a>
</span><span id="ProofStep-378"><a href="#ProofStep-378"><span class="linenos">378</span></a>    <span class="nd">@property</span>
</span><span id="ProofStep-379"><a href="#ProofStep-379"><span class="linenos">379</span></a>    <span class="k">def</span> <span class="nf">tactic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">apic</span><span class="o">.</span><span class="n">Tactic_Reader</span> <span class="o">|</span> <span class="n">Unknown</span><span class="p">:</span>
</span><span id="ProofStep-380"><a href="#ProofStep-380"><span class="linenos">380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The tactic that generated the proof step. Note that the arguments of the tactic can be found in the</span>
</span><span id="ProofStep-381"><a href="#ProofStep-381"><span class="linenos">381</span></a><span class="sd">        individual outcomes, because they may be different for each outcome.</span>
</span><span id="ProofStep-382"><a href="#ProofStep-382"><span class="linenos">382</span></a>
</span><span id="ProofStep-383"><a href="#ProofStep-383"><span class="linenos">383</span></a><span class="sd">        Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as &#39;unknown&#39;.</span>
</span><span id="ProofStep-384"><a href="#ProofStep-384"><span class="linenos">384</span></a><span class="sd">        This currently happens with tactics that are run as a result of the `Proof with tac` construct and it</span>
</span><span id="ProofStep-385"><a href="#ProofStep-385"><span class="linenos">385</span></a><span class="sd">        happens for tactics that are known to be unsafe like `change_no_check`, `fix`, `cofix` and more.</span>
</span><span id="ProofStep-386"><a href="#ProofStep-386"><span class="linenos">386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofStep-387"><a href="#ProofStep-387"><span class="linenos">387</span></a>        <span class="o">...</span>
</span><span id="ProofStep-388"><a href="#ProofStep-388"><span class="linenos">388</span></a>
</span><span id="ProofStep-389"><a href="#ProofStep-389"><span class="linenos">389</span></a>    <span class="nd">@property</span>
</span><span id="ProofStep-390"><a href="#ProofStep-390"><span class="linenos">390</span></a>    <span class="k">def</span> <span class="nf">outcomes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Outcome</span><span class="p">]:</span>
</span><span id="ProofStep-391"><a href="#ProofStep-391"><span class="linenos">391</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of transformations of proof states to other proof states, as executed by the tactic of the proof</span>
</span><span id="ProofStep-392"><a href="#ProofStep-392"><span class="linenos">392</span></a><span class="sd">        step</span>
</span><span id="ProofStep-393"><a href="#ProofStep-393"><span class="linenos">393</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ProofStep-394"><a href="#ProofStep-394"><span class="linenos">394</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A proof step is the execution of a single tactic on one or more proof states, producing a list of outcomes.</p>
</div>


                            <div id="ProofStep.lowlevel" class="classattr">
                                <div class="attr variable">
            <span class="name">lowlevel</span>

        
    </div>
    <a class="headerlink" href="#ProofStep.lowlevel"></a>
    
    

                            </div>
                            <div id="ProofStep.tactic" class="classattr">
                                <div class="attr variable">
            <span class="name">tactic</span><span class="annotation">: <a href="graph_api_capnp_cython.html#Tactic_Reader">pytact.graph_api_capnp_cython.Tactic_Reader</a> | None</span>

        
    </div>
    <a class="headerlink" href="#ProofStep.tactic"></a>
    
            <div class="docstring"><p>The tactic that generated the proof step. Note that the arguments of the tactic can be found in the
individual outcomes, because they may be different for each outcome.</p>

<p>Sometimes a tactic cannot or should not be recorded. In those cases, it is marked as 'unknown'.
This currently happens with tactics that are run as a result of the <code>Proof with tac</code> construct and it
happens for tactics that are known to be unsafe like <code>change_no_check</code>, <code>fix</code>, <code>cofix</code> and more.</p>
</div>


                            </div>
                            <div id="ProofStep.outcomes" class="classattr">
                                <div class="attr variable">
            <span class="name">outcomes</span><span class="annotation">: collections.abc.Sequence[<a href="#Outcome">Outcome</a>]</span>

        
    </div>
    <a class="headerlink" href="#ProofStep.outcomes"></a>
    
            <div class="docstring"><p>A list of transformations of proof states to other proof states, as executed by the tactic of the proof
step</p>
</div>


                            </div>
                </section>
                <section id="Original">
                            <input id="Original-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Original</span>:

                <label class="view-source-button" for="Original-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Original"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Original-396"><a href="#Original-396"><span class="linenos">396</span></a><span class="nd">@dataclass</span>
</span><span id="Original-397"><a href="#Original-397"><span class="linenos">397</span></a><span class="k">class</span> <span class="nc">Original</span><span class="p">:</span>
</span><span id="Original-398"><a href="#Original-398"><span class="linenos">398</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is original, as inputted by the</span>
</span><span id="Original-399"><a href="#Original-399"><span class="linenos">399</span></a><span class="sd">    user.&quot;&quot;&quot;</span>
</span><span id="Original-400"><a href="#Original-400"><span class="linenos">400</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is original, as inputted by the
user.</p>
</div>


                </section>
                <section id="Discharged">
                            <input id="Discharged-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Discharged</span>:

                <label class="view-source-button" for="Discharged-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Discharged"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Discharged-402"><a href="#Discharged-402"><span class="linenos">402</span></a><span class="nd">@dataclass</span>
</span><span id="Discharged-403"><a href="#Discharged-403"><span class="linenos">403</span></a><span class="k">class</span> <span class="nc">Discharged</span><span class="p">:</span>
</span><span id="Discharged-404"><a href="#Discharged-404"><span class="linenos">404</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is derived from an original after</span>
</span><span id="Discharged-405"><a href="#Discharged-405"><span class="linenos">405</span></a><span class="sd">    section closing.&quot;&quot;&quot;</span>
</span><span id="Discharged-406"><a href="#Discharged-406"><span class="linenos">406</span></a>
</span><span id="Discharged-407"><a href="#Discharged-407"><span class="linenos">407</span></a>    <span class="n">original</span><span class="p">:</span> <span class="n">Definition</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is derived from an original after
section closing.</p>
</div>


                            <div id="Discharged.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Discharged</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">original</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Discharged.__init__"></a>
    
    

                            </div>
                            <div id="Discharged.original" class="classattr">
                                <div class="attr variable">
            <span class="name">original</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Discharged.original"></a>
    
    

                            </div>
                </section>
                <section id="Substituted">
                            <input id="Substituted-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Substituted</span>:

                <label class="view-source-button" for="Substituted-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Substituted"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Substituted-409"><a href="#Substituted-409"><span class="linenos">409</span></a><span class="nd">@dataclass</span>
</span><span id="Substituted-410"><a href="#Substituted-410"><span class="linenos">410</span></a><span class="k">class</span> <span class="nc">Substituted</span><span class="p">:</span>
</span><span id="Substituted-411"><a href="#Substituted-411"><span class="linenos">411</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is derived from an original after</span>
</span><span id="Substituted-412"><a href="#Substituted-412"><span class="linenos">412</span></a><span class="sd">    module functor instantiation.&quot;&quot;&quot;</span>
</span><span id="Substituted-413"><a href="#Substituted-413"><span class="linenos">413</span></a>
</span><span id="Substituted-414"><a href="#Substituted-414"><span class="linenos">414</span></a>    <span class="n">original</span><span class="p">:</span> <span class="n">Definition</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is derived from an original after
module functor instantiation.</p>
</div>


                            <div id="Substituted.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Substituted</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">original</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Substituted.__init__"></a>
    
    

                            </div>
                            <div id="Substituted.original" class="classattr">
                                <div class="attr variable">
            <span class="name">original</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Substituted.original"></a>
    
    

                            </div>
                </section>
                <section id="Inductive">
                            <input id="Inductive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Inductive</span>:

                <label class="view-source-button" for="Inductive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Inductive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Inductive-416"><a href="#Inductive-416"><span class="linenos">416</span></a><span class="nd">@dataclass</span>
</span><span id="Inductive-417"><a href="#Inductive-417"><span class="linenos">417</span></a><span class="k">class</span> <span class="nc">Inductive</span><span class="p">:</span>
</span><span id="Inductive-418"><a href="#Inductive-418"><span class="linenos">418</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is inductive.&quot;&quot;&quot;</span>
</span><span id="Inductive-419"><a href="#Inductive-419"><span class="linenos">419</span></a>
</span><span id="Inductive-420"><a href="#Inductive-420"><span class="linenos">420</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="Inductive-421"><a href="#Inductive-421"><span class="linenos">421</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is inductive.</p>
</div>


                            <div id="Inductive.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Inductive</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">representative</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Inductive.__init__"></a>
    
    

                            </div>
                            <div id="Inductive.representative" class="classattr">
                                <div class="attr variable">
            <span class="name">representative</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Inductive.representative"></a>
    
            <div class="docstring"><p>The representative of the mutually recursive cluster. For lowlevel use only</p>
</div>


                            </div>
                </section>
                <section id="Constructor">
                            <input id="Constructor-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Constructor</span>:

                <label class="view-source-button" for="Constructor-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constructor"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constructor-423"><a href="#Constructor-423"><span class="linenos">423</span></a><span class="nd">@dataclass</span>
</span><span id="Constructor-424"><a href="#Constructor-424"><span class="linenos">424</span></a><span class="k">class</span> <span class="nc">Constructor</span><span class="p">:</span>
</span><span id="Constructor-425"><a href="#Constructor-425"><span class="linenos">425</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is a constructor.&quot;&quot;&quot;</span>
</span><span id="Constructor-426"><a href="#Constructor-426"><span class="linenos">426</span></a>
</span><span id="Constructor-427"><a href="#Constructor-427"><span class="linenos">427</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="Constructor-428"><a href="#Constructor-428"><span class="linenos">428</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is a constructor.</p>
</div>


                            <div id="Constructor.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Constructor</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">representative</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Constructor.__init__"></a>
    
    

                            </div>
                            <div id="Constructor.representative" class="classattr">
                                <div class="attr variable">
            <span class="name">representative</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Constructor.representative"></a>
    
            <div class="docstring"><p>The representative of the mutually recursive cluster. For lowlevel use only</p>
</div>


                            </div>
                </section>
                <section id="Projection">
                            <input id="Projection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Projection</span>:

                <label class="view-source-button" for="Projection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Projection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Projection-430"><a href="#Projection-430"><span class="linenos">430</span></a><span class="nd">@dataclass</span>
</span><span id="Projection-431"><a href="#Projection-431"><span class="linenos">431</span></a><span class="k">class</span> <span class="nc">Projection</span><span class="p">:</span>
</span><span id="Projection-432"><a href="#Projection-432"><span class="linenos">432</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition is a projection.&quot;&quot;&quot;</span>
</span><span id="Projection-433"><a href="#Projection-433"><span class="linenos">433</span></a>
</span><span id="Projection-434"><a href="#Projection-434"><span class="linenos">434</span></a>    <span class="n">representative</span><span class="p">:</span> <span class="n">Definition</span>
</span><span id="Projection-435"><a href="#Projection-435"><span class="linenos">435</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The representative of the mutually recursive cluster. For lowlevel use only&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition is a projection.</p>
</div>


                            <div id="Projection.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Projection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">representative</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Projection.__init__"></a>
    
    

                            </div>
                            <div id="Projection.representative" class="classattr">
                                <div class="attr variable">
            <span class="name">representative</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Projection.representative"></a>
    
            <div class="docstring"><p>The representative of the mutually recursive cluster. For lowlevel use only</p>
</div>


                            </div>
                </section>
                <section id="ManualConstant">
                            <input id="ManualConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">ManualConstant</span>:

                <label class="view-source-button" for="ManualConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ManualConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ManualConstant-437"><a href="#ManualConstant-437"><span class="linenos">437</span></a><span class="nd">@dataclass</span>
</span><span id="ManualConstant-438"><a href="#ManualConstant-438"><span class="linenos">438</span></a><span class="k">class</span> <span class="nc">ManualConstant</span><span class="p">:</span>
</span><span id="ManualConstant-439"><a href="#ManualConstant-439"><span class="linenos">439</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a definition was inputted by the user by</span>
</span><span id="ManualConstant-440"><a href="#ManualConstant-440"><span class="linenos">440</span></a><span class="sd">    manually inputting a term.&quot;&quot;&quot;</span>
</span><span id="ManualConstant-441"><a href="#ManualConstant-441"><span class="linenos">441</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a definition was inputted by the user by
manually inputting a term.</p>
</div>


                </section>
                <section id="TacticalConstant">
                            <input id="TacticalConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticalConstant</span>:

                <label class="view-source-button" for="TacticalConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticalConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticalConstant-443"><a href="#TacticalConstant-443"><span class="linenos">443</span></a><span class="nd">@dataclass</span>
</span><span id="TacticalConstant-444"><a href="#TacticalConstant-444"><span class="linenos">444</span></a><span class="k">class</span> <span class="nc">TacticalConstant</span><span class="p">:</span>
</span><span id="TacticalConstant-445"><a href="#TacticalConstant-445"><span class="linenos">445</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a lemma was proved by the user using</span>
</span><span id="TacticalConstant-446"><a href="#TacticalConstant-446"><span class="linenos">446</span></a><span class="sd">    a tactic proof.&quot;&quot;&quot;</span>
</span><span id="TacticalConstant-447"><a href="#TacticalConstant-447"><span class="linenos">447</span></a>
</span><span id="TacticalConstant-448"><a href="#TacticalConstant-448"><span class="linenos">448</span></a>    <span class="n">proof</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span>
</span><span id="TacticalConstant-449"><a href="#TacticalConstant-449"><span class="linenos">449</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The proof of the lemma.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a lemma was proved by the user using
a tactic proof.</p>
</div>


                            <div id="TacticalConstant.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticalConstant</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">proof</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n"><a href="#ProofStep">ProofStep</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticalConstant.__init__"></a>
    
    

                            </div>
                            <div id="TacticalConstant.proof" class="classattr">
                                <div class="attr variable">
            <span class="name">proof</span><span class="annotation">: collections.abc.Sequence[<a href="#ProofStep">ProofStep</a>]</span>

        
    </div>
    <a class="headerlink" href="#TacticalConstant.proof"></a>
    
            <div class="docstring"><p>The proof of the lemma.</p>
</div>


                            </div>
                </section>
                <section id="ManualSectionConstant">
                            <input id="ManualSectionConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">ManualSectionConstant</span>:

                <label class="view-source-button" for="ManualSectionConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ManualSectionConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ManualSectionConstant-451"><a href="#ManualSectionConstant-451"><span class="linenos">451</span></a><span class="nd">@dataclass</span>
</span><span id="ManualSectionConstant-452"><a href="#ManualSectionConstant-452"><span class="linenos">452</span></a><span class="k">class</span> <span class="nc">ManualSectionConstant</span><span class="p">:</span>
</span><span id="ManualSectionConstant-453"><a href="#ManualSectionConstant-453"><span class="linenos">453</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a constant is a section variable or let-construct.&quot;&quot;&quot;</span>
</span><span id="ManualSectionConstant-454"><a href="#ManualSectionConstant-454"><span class="linenos">454</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a constant is a section variable or let-construct.</p>
</div>


                </section>
                <section id="TacticalSectionConstant">
                            <input id="TacticalSectionConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticalSectionConstant</span>:

                <label class="view-source-button" for="TacticalSectionConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticalSectionConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticalSectionConstant-456"><a href="#TacticalSectionConstant-456"><span class="linenos">456</span></a><span class="nd">@dataclass</span>
</span><span id="TacticalSectionConstant-457"><a href="#TacticalSectionConstant-457"><span class="linenos">457</span></a><span class="k">class</span> <span class="nc">TacticalSectionConstant</span><span class="p">:</span>
</span><span id="TacticalSectionConstant-458"><a href="#TacticalSectionConstant-458"><span class="linenos">458</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Token that signals that a constant is a section let-construct with a tactic proof.&quot;&quot;&quot;</span>
</span><span id="TacticalSectionConstant-459"><a href="#TacticalSectionConstant-459"><span class="linenos">459</span></a>
</span><span id="TacticalSectionConstant-460"><a href="#TacticalSectionConstant-460"><span class="linenos">460</span></a>    <span class="n">proof</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span>
</span><span id="TacticalSectionConstant-461"><a href="#TacticalSectionConstant-461"><span class="linenos">461</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The proof of the lemma.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Token that signals that a constant is a section let-construct with a tactic proof.</p>
</div>


                            <div id="TacticalSectionConstant.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticalSectionConstant</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">proof</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n"><a href="#ProofStep">ProofStep</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticalSectionConstant.__init__"></a>
    
    

                            </div>
                            <div id="TacticalSectionConstant.proof" class="classattr">
                                <div class="attr variable">
            <span class="name">proof</span><span class="annotation">: collections.abc.Sequence[<a href="#ProofStep">ProofStep</a>]</span>

        
    </div>
    <a class="headerlink" href="#TacticalSectionConstant.proof"></a>
    
            <div class="docstring"><p>The proof of the lemma.</p>
</div>


                            </div>
                </section>
                <section id="Definition">
                            <input id="Definition-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Definition</span>:

                <label class="view-source-button" for="Definition-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Definition"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Definition-463"><a href="#Definition-463"><span class="linenos">463</span></a><span class="k">class</span> <span class="nc">Definition</span><span class="p">:</span>
</span><span id="Definition-464"><a href="#Definition-464"><span class="linenos">464</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A definition of the CIC, which is either a constant, inductive, constructor, projection or section</span>
</span><span id="Definition-465"><a href="#Definition-465"><span class="linenos">465</span></a><span class="sd">    variable. Constants and section variables can have tactical proofs associated to them.</span>
</span><span id="Definition-466"><a href="#Definition-466"><span class="linenos">466</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Definition-467"><a href="#Definition-467"><span class="linenos">467</span></a>
</span><span id="Definition-468"><a href="#Definition-468"><span class="linenos">468</span></a>    <span class="n">node</span> <span class="p">:</span> <span class="n">Node</span>
</span><span id="Definition-469"><a href="#Definition-469"><span class="linenos">469</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The node that is associated with this definition. It holds that</span>
</span><span id="Definition-470"><a href="#Definition-470"><span class="linenos">470</span></a><span class="sd">    `definition.node.definition == definition`.</span>
</span><span id="Definition-471"><a href="#Definition-471"><span class="linenos">471</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Definition-472"><a href="#Definition-472"><span class="linenos">472</span></a>
</span><span id="Definition-473"><a href="#Definition-473"><span class="linenos">473</span></a>    <span class="nd">@property</span>
</span><span id="Definition-474"><a href="#Definition-474"><span class="linenos">474</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Definition-475"><a href="#Definition-475"><span class="linenos">475</span></a>        <span class="o">...</span>
</span><span id="Definition-476"><a href="#Definition-476"><span class="linenos">476</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Definition-477"><a href="#Definition-477"><span class="linenos">477</span></a>        <span class="o">...</span>
</span><span id="Definition-478"><a href="#Definition-478"><span class="linenos">478</span></a>
</span><span id="Definition-479"><a href="#Definition-479"><span class="linenos">479</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Definition-480"><a href="#Definition-480"><span class="linenos">480</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Physical equality of two nodes. Note that two nodes with a different physical equality</span>
</span><span id="Definition-481"><a href="#Definition-481"><span class="linenos">481</span></a><span class="sd">        may have the same `identity`. See `identity` for details.</span>
</span><span id="Definition-482"><a href="#Definition-482"><span class="linenos">482</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-483"><a href="#Definition-483"><span class="linenos">483</span></a>        <span class="o">...</span>
</span><span id="Definition-484"><a href="#Definition-484"><span class="linenos">484</span></a>
</span><span id="Definition-485"><a href="#Definition-485"><span class="linenos">485</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Definition-486"><a href="#Definition-486"><span class="linenos">486</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A hash that is corresponds to physical equality, not to be confused by `identity`.&quot;&quot;&quot;</span>
</span><span id="Definition-487"><a href="#Definition-487"><span class="linenos">487</span></a>        <span class="o">...</span>
</span><span id="Definition-488"><a href="#Definition-488"><span class="linenos">488</span></a>
</span><span id="Definition-489"><a href="#Definition-489"><span class="linenos">489</span></a>    <span class="nd">@property</span>
</span><span id="Definition-490"><a href="#Definition-490"><span class="linenos">490</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Definition-491"><a href="#Definition-491"><span class="linenos">491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The fully-qualified name of the definition. The name should be unique in a particular global context,</span>
</span><span id="Definition-492"><a href="#Definition-492"><span class="linenos">492</span></a><span class="sd">        but is not unique among different branches of the global in a dataset.</span>
</span><span id="Definition-493"><a href="#Definition-493"><span class="linenos">493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-494"><a href="#Definition-494"><span class="linenos">494</span></a>        <span class="o">...</span>
</span><span id="Definition-495"><a href="#Definition-495"><span class="linenos">495</span></a>
</span><span id="Definition-496"><a href="#Definition-496"><span class="linenos">496</span></a>    <span class="nd">@property</span>
</span><span id="Definition-497"><a href="#Definition-497"><span class="linenos">497</span></a>    <span class="k">def</span> <span class="nf">previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Definition-498"><a href="#Definition-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The previous definition within the global context of the current file.</span>
</span><span id="Definition-499"><a href="#Definition-499"><span class="linenos">499</span></a>
</span><span id="Definition-500"><a href="#Definition-500"><span class="linenos">500</span></a><span class="sd">        Note that this is a lowlevel property. Prefer to use `global_context` or `clustered_global_context`.</span>
</span><span id="Definition-501"><a href="#Definition-501"><span class="linenos">501</span></a>
</span><span id="Definition-502"><a href="#Definition-502"><span class="linenos">502</span></a><span class="sd">        The contract on this field is that any definition nodes reachable from the forward closure of the definition</span>
</span><span id="Definition-503"><a href="#Definition-503"><span class="linenos">503</span></a><span class="sd">        must also be reachable through the chain of previous fields. An exception to this rule are mutually</span>
</span><span id="Definition-504"><a href="#Definition-504"><span class="linenos">504</span></a><span class="sd">        recursive definitions. Those nodes are placed into the global context in an arbitrary ordering.</span>
</span><span id="Definition-505"><a href="#Definition-505"><span class="linenos">505</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-506"><a href="#Definition-506"><span class="linenos">506</span></a>        <span class="o">...</span>
</span><span id="Definition-507"><a href="#Definition-507"><span class="linenos">507</span></a>
</span><span id="Definition-508"><a href="#Definition-508"><span class="linenos">508</span></a>    <span class="nd">@property</span>
</span><span id="Definition-509"><a href="#Definition-509"><span class="linenos">509</span></a>    <span class="k">def</span> <span class="nf">external_previous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Definition-510"><a href="#Definition-510"><span class="linenos">510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of definitions that are the representatives of files other than the current file that are</span>
</span><span id="Definition-511"><a href="#Definition-511"><span class="linenos">511</span></a><span class="sd">        part of the global context. This list becomes populated when a `Require` statement occurred right before</span>
</span><span id="Definition-512"><a href="#Definition-512"><span class="linenos">512</span></a><span class="sd">        the definition.</span>
</span><span id="Definition-513"><a href="#Definition-513"><span class="linenos">513</span></a>
</span><span id="Definition-514"><a href="#Definition-514"><span class="linenos">514</span></a><span class="sd">        Note that this is a lowlevel property. Prefer to use `global_context` or `clustered_global_context`.</span>
</span><span id="Definition-515"><a href="#Definition-515"><span class="linenos">515</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-516"><a href="#Definition-516"><span class="linenos">516</span></a>        <span class="o">...</span>
</span><span id="Definition-517"><a href="#Definition-517"><span class="linenos">517</span></a>
</span><span id="Definition-518"><a href="#Definition-518"><span class="linenos">518</span></a>    <span class="k">def</span> <span class="nf">global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Definition-519"><a href="#Definition-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created.</span>
</span><span id="Definition-520"><a href="#Definition-520"><span class="linenos">520</span></a>
</span><span id="Definition-521"><a href="#Definition-521"><span class="linenos">521</span></a><span class="sd">        Note that this does not include this definition itself, except when the definition is a inductive,</span>
</span><span id="Definition-522"><a href="#Definition-522"><span class="linenos">522</span></a><span class="sd">        constructor or projection. Because those are mutually recursive objects, they reference themselves</span>
</span><span id="Definition-523"><a href="#Definition-523"><span class="linenos">523</span></a><span class="sd">        and are therefore part of their own global context.</span>
</span><span id="Definition-524"><a href="#Definition-524"><span class="linenos">524</span></a>
</span><span id="Definition-525"><a href="#Definition-525"><span class="linenos">525</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="Definition-526"><a href="#Definition-526"><span class="linenos">526</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="Definition-527"><a href="#Definition-527"><span class="linenos">527</span></a><span class="sd">        stream. An exception to this rule are mutually recursive definitions, because no topological sort</span>
</span><span id="Definition-528"><a href="#Definition-528"><span class="linenos">528</span></a><span class="sd">        is possible there (see also `clustered_global_context`).</span>
</span><span id="Definition-529"><a href="#Definition-529"><span class="linenos">529</span></a>
</span><span id="Definition-530"><a href="#Definition-530"><span class="linenos">530</span></a><span class="sd">        Arguments:</span>
</span><span id="Definition-531"><a href="#Definition-531"><span class="linenos">531</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="Definition-532"><a href="#Definition-532"><span class="linenos">532</span></a><span class="sd">        * `inclusive`: if `True`, outputs also itself, default `False`.</span>
</span><span id="Definition-533"><a href="#Definition-533"><span class="linenos">533</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`</span>
</span><span id="Definition-534"><a href="#Definition-534"><span class="linenos">534</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-535"><a href="#Definition-535"><span class="linenos">535</span></a>        <span class="o">...</span>
</span><span id="Definition-536"><a href="#Definition-536"><span class="linenos">536</span></a>
</span><span id="Definition-537"><a href="#Definition-537"><span class="linenos">537</span></a>    <span class="k">def</span> <span class="nf">clustered_global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="Definition-538"><a href="#Definition-538"><span class="linenos">538</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created, clustered into</span>
</span><span id="Definition-539"><a href="#Definition-539"><span class="linenos">539</span></a><span class="sd">        mutually recursive cliques.</span>
</span><span id="Definition-540"><a href="#Definition-540"><span class="linenos">540</span></a>
</span><span id="Definition-541"><a href="#Definition-541"><span class="linenos">541</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="Definition-542"><a href="#Definition-542"><span class="linenos">542</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="Definition-543"><a href="#Definition-543"><span class="linenos">543</span></a><span class="sd">        stream.</span>
</span><span id="Definition-544"><a href="#Definition-544"><span class="linenos">544</span></a>
</span><span id="Definition-545"><a href="#Definition-545"><span class="linenos">545</span></a><span class="sd">        Arguments:</span>
</span><span id="Definition-546"><a href="#Definition-546"><span class="linenos">546</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="Definition-547"><a href="#Definition-547"><span class="linenos">547</span></a><span class="sd">        * `inclusive`: if `True`, outputs also the cluster of itself, default `False`.</span>
</span><span id="Definition-548"><a href="#Definition-548"><span class="linenos">548</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`.</span>
</span><span id="Definition-549"><a href="#Definition-549"><span class="linenos">549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-550"><a href="#Definition-550"><span class="linenos">550</span></a>        <span class="o">...</span>
</span><span id="Definition-551"><a href="#Definition-551"><span class="linenos">551</span></a>
</span><span id="Definition-552"><a href="#Definition-552"><span class="linenos">552</span></a>    <span class="nd">@property</span>
</span><span id="Definition-553"><a href="#Definition-553"><span class="linenos">553</span></a>    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Original</span> <span class="o">|</span> <span class="n">Discharged</span> <span class="o">|</span> <span class="n">Substituted</span><span class="p">:</span>
</span><span id="Definition-554"><a href="#Definition-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Definition-555"><a href="#Definition-555"><span class="linenos">555</span></a><span class="sd">        A definition is either</span>
</span><span id="Definition-556"><a href="#Definition-556"><span class="linenos">556</span></a><span class="sd">        (1) an object as originally inputted by the user.</span>
</span><span id="Definition-557"><a href="#Definition-557"><span class="linenos">557</span></a><span class="sd">        (2) a definition that was originally defined in a section and has now had the section</span>
</span><span id="Definition-558"><a href="#Definition-558"><span class="linenos">558</span></a><span class="sd">            variables discharged into it.</span>
</span><span id="Definition-559"><a href="#Definition-559"><span class="linenos">559</span></a><span class="sd">        (3) a definition that was obtained by performing some sort of module functor substitution.</span>
</span><span id="Definition-560"><a href="#Definition-560"><span class="linenos">560</span></a><span class="sd">        When a definition is not original, we cross-reference to the definition that it was derived from.</span>
</span><span id="Definition-561"><a href="#Definition-561"><span class="linenos">561</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-562"><a href="#Definition-562"><span class="linenos">562</span></a>        <span class="o">...</span>
</span><span id="Definition-563"><a href="#Definition-563"><span class="linenos">563</span></a>
</span><span id="Definition-564"><a href="#Definition-564"><span class="linenos">564</span></a>    <span class="nd">@property</span>
</span><span id="Definition-565"><a href="#Definition-565"><span class="linenos">565</span></a>    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Inductive</span><span class="p">,</span> <span class="n">Constructor</span><span class="p">,</span> <span class="n">Projection</span><span class="p">,</span>
</span><span id="Definition-566"><a href="#Definition-566"><span class="linenos">566</span></a>                            <span class="n">ManualConstant</span><span class="p">,</span> <span class="n">TacticalConstant</span><span class="p">,</span>
</span><span id="Definition-567"><a href="#Definition-567"><span class="linenos">567</span></a>                            <span class="n">ManualSectionConstant</span><span class="p">,</span> <span class="n">TacticalSectionConstant</span><span class="p">]:</span>
</span><span id="Definition-568"><a href="#Definition-568"><span class="linenos">568</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The kind of the definition.</span>
</span><span id="Definition-569"><a href="#Definition-569"><span class="linenos">569</span></a>
</span><span id="Definition-570"><a href="#Definition-570"><span class="linenos">570</span></a><span class="sd">        It can be an constant, section constant, inductive, constructor or projection. In case of a constant</span>
</span><span id="Definition-571"><a href="#Definition-571"><span class="linenos">571</span></a><span class="sd">        of a constant or section constant, an optional tactical proof can be associated. In case of an inductive,</span>
</span><span id="Definition-572"><a href="#Definition-572"><span class="linenos">572</span></a><span class="sd">        constructor or projection, another definition that acts as the representative of the mutually recursive</span>
</span><span id="Definition-573"><a href="#Definition-573"><span class="linenos">573</span></a><span class="sd">        cluster of definitions is associated.</span>
</span><span id="Definition-574"><a href="#Definition-574"><span class="linenos">574</span></a>
</span><span id="Definition-575"><a href="#Definition-575"><span class="linenos">575</span></a><span class="sd">        The associated information is low-level. Prefer to use the properties `proof` and `cluster` to access them.</span>
</span><span id="Definition-576"><a href="#Definition-576"><span class="linenos">576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-577"><a href="#Definition-577"><span class="linenos">577</span></a>        <span class="o">...</span>
</span><span id="Definition-578"><a href="#Definition-578"><span class="linenos">578</span></a>
</span><span id="Definition-579"><a href="#Definition-579"><span class="linenos">579</span></a>    <span class="nd">@property</span>
</span><span id="Definition-580"><a href="#Definition-580"><span class="linenos">580</span></a>    <span class="k">def</span> <span class="nf">proof</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ProofStep</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Definition-581"><a href="#Definition-581"><span class="linenos">581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;An optional tactical proof that was used to create this definition.&quot;&quot;&quot;</span>
</span><span id="Definition-582"><a href="#Definition-582"><span class="linenos">582</span></a>        <span class="o">...</span>
</span><span id="Definition-583"><a href="#Definition-583"><span class="linenos">583</span></a>
</span><span id="Definition-584"><a href="#Definition-584"><span class="linenos">584</span></a>    <span class="nd">@property</span>
</span><span id="Definition-585"><a href="#Definition-585"><span class="linenos">585</span></a>    <span class="k">def</span> <span class="nf">cluster_representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span><span class="p">:</span>
</span><span id="Definition-586"><a href="#Definition-586"><span class="linenos">586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A unique representative of the mutually recursive cluster of definitions this definition is part of.</span>
</span><span id="Definition-587"><a href="#Definition-587"><span class="linenos">587</span></a><span class="sd">        If the definition is not mutually recursive, the representative is itself.</span>
</span><span id="Definition-588"><a href="#Definition-588"><span class="linenos">588</span></a>
</span><span id="Definition-589"><a href="#Definition-589"><span class="linenos">589</span></a><span class="sd">        This is a low-level property. Prefer to use the `cluster` property.</span>
</span><span id="Definition-590"><a href="#Definition-590"><span class="linenos">590</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-591"><a href="#Definition-591"><span class="linenos">591</span></a>        <span class="o">...</span>
</span><span id="Definition-592"><a href="#Definition-592"><span class="linenos">592</span></a>
</span><span id="Definition-593"><a href="#Definition-593"><span class="linenos">593</span></a>    <span class="nd">@property</span>
</span><span id="Definition-594"><a href="#Definition-594"><span class="linenos">594</span></a>    <span class="k">def</span> <span class="nf">cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Definition-595"><a href="#Definition-595"><span class="linenos">595</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The cluster of mutually recursive definitions that this definition is part of.</span>
</span><span id="Definition-596"><a href="#Definition-596"><span class="linenos">596</span></a><span class="sd">        If the definition is not mutually recursive, the cluster is a singleton.&quot;&quot;&quot;</span>
</span><span id="Definition-597"><a href="#Definition-597"><span class="linenos">597</span></a>        <span class="o">...</span>
</span><span id="Definition-598"><a href="#Definition-598"><span class="linenos">598</span></a>
</span><span id="Definition-599"><a href="#Definition-599"><span class="linenos">599</span></a>    <span class="nd">@property</span>
</span><span id="Definition-600"><a href="#Definition-600"><span class="linenos">600</span></a>    <span class="k">def</span> <span class="nf">type_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Definition-601"><a href="#Definition-601"><span class="linenos">601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the type of this definition.&quot;&quot;&quot;</span>
</span><span id="Definition-602"><a href="#Definition-602"><span class="linenos">602</span></a>        <span class="o">...</span>
</span><span id="Definition-603"><a href="#Definition-603"><span class="linenos">603</span></a>
</span><span id="Definition-604"><a href="#Definition-604"><span class="linenos">604</span></a>    <span class="nd">@property</span>
</span><span id="Definition-605"><a href="#Definition-605"><span class="linenos">605</span></a>    <span class="k">def</span> <span class="nf">term_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Definition-606"><a href="#Definition-606"><span class="linenos">606</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A textual representation of the body of this definition.</span>
</span><span id="Definition-607"><a href="#Definition-607"><span class="linenos">607</span></a><span class="sd">        For inductives, constructors, projections, section variables and axioms this is `None`.</span>
</span><span id="Definition-608"><a href="#Definition-608"><span class="linenos">608</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition-609"><a href="#Definition-609"><span class="linenos">609</span></a>        <span class="o">...</span>
</span><span id="Definition-610"><a href="#Definition-610"><span class="linenos">610</span></a>
</span><span id="Definition-611"><a href="#Definition-611"><span class="linenos">611</span></a>    <span class="nd">@property</span>
</span><span id="Definition-612"><a href="#Definition-612"><span class="linenos">612</span></a>    <span class="k">def</span> <span class="nf">is_file_representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Definition-613"><a href="#Definition-613"><span class="linenos">613</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns true if this definition is the representative of the super-global context of it&#39;s file.</span>
</span><span id="Definition-614"><a href="#Definition-614"><span class="linenos">614</span></a><span class="sd">        Se also `Dataset.representative`.&quot;&quot;&quot;</span>
</span><span id="Definition-615"><a href="#Definition-615"><span class="linenos">615</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A definition of the CIC, which is either a constant, inductive, constructor, projection or section
variable. Constants and section variables can have tactical proofs associated to them.</p>
</div>


                            <div id="Definition.node" class="classattr">
                                <div class="attr variable">
            <span class="name">node</span><span class="annotation">: <a href="#Node">Node</a></span>

        
    </div>
    <a class="headerlink" href="#Definition.node"></a>
    
            <div class="docstring"><p>The node that is associated with this definition. It holds that
<code>definition.node.definition == definition</code>.</p>
</div>


                            </div>
                            <div id="Definition.lowlevel" class="classattr">
                                <div class="attr variable">
            <span class="name">lowlevel</span>

        
    </div>
    <a class="headerlink" href="#Definition.lowlevel"></a>
    
    

                            </div>
                            <div id="Definition.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Definition.name"></a>
    
            <div class="docstring"><p>The fully-qualified name of the definition. The name should be unique in a particular global context,
but is not unique among different branches of the global in a dataset.</p>
</div>


                            </div>
                            <div id="Definition.previous" class="classattr">
                                <div class="attr variable">
            <span class="name">previous</span><span class="annotation">: <a href="#Definition">Definition</a> | None</span>

        
    </div>
    <a class="headerlink" href="#Definition.previous"></a>
    
            <div class="docstring"><p>The previous definition within the global context of the current file.</p>

<p>Note that this is a lowlevel property. Prefer to use <code><a href="#Definition.global_context">global_context</a></code> or <code><a href="#Definition.clustered_global_context">clustered_global_context</a></code>.</p>

<p>The contract on this field is that any definition nodes reachable from the forward closure of the definition
must also be reachable through the chain of previous fields. An exception to this rule are mutually
recursive definitions. Those nodes are placed into the global context in an arbitrary ordering.</p>
</div>


                            </div>
                            <div id="Definition.external_previous" class="classattr">
                                <div class="attr variable">
            <span class="name">external_previous</span><span class="annotation">: collections.abc.Sequence[<a href="#Definition">Definition</a>]</span>

        
    </div>
    <a class="headerlink" href="#Definition.external_previous"></a>
    
            <div class="docstring"><p>A list of definitions that are the representatives of files other than the current file that are
part of the global context. This list becomes populated when a <code>Require</code> statement occurred right before
the definition.</p>

<p>Note that this is a lowlevel property. Prefer to use <code><a href="#Definition.global_context">global_context</a></code> or <code><a href="#Definition.clustered_global_context">clustered_global_context</a></code>.</p>
</div>


                            </div>
                            <div id="Definition.global_context" class="classattr">
                                        <input id="Definition.global_context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">global_context</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">across_files</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">inclusive</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Definition.global_context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Definition.global_context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Definition.global_context-518"><a href="#Definition.global_context-518"><span class="linenos">518</span></a>    <span class="k">def</span> <span class="nf">global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Definition.global_context-519"><a href="#Definition.global_context-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created.</span>
</span><span id="Definition.global_context-520"><a href="#Definition.global_context-520"><span class="linenos">520</span></a>
</span><span id="Definition.global_context-521"><a href="#Definition.global_context-521"><span class="linenos">521</span></a><span class="sd">        Note that this does not include this definition itself, except when the definition is a inductive,</span>
</span><span id="Definition.global_context-522"><a href="#Definition.global_context-522"><span class="linenos">522</span></a><span class="sd">        constructor or projection. Because those are mutually recursive objects, they reference themselves</span>
</span><span id="Definition.global_context-523"><a href="#Definition.global_context-523"><span class="linenos">523</span></a><span class="sd">        and are therefore part of their own global context.</span>
</span><span id="Definition.global_context-524"><a href="#Definition.global_context-524"><span class="linenos">524</span></a>
</span><span id="Definition.global_context-525"><a href="#Definition.global_context-525"><span class="linenos">525</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="Definition.global_context-526"><a href="#Definition.global_context-526"><span class="linenos">526</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="Definition.global_context-527"><a href="#Definition.global_context-527"><span class="linenos">527</span></a><span class="sd">        stream. An exception to this rule are mutually recursive definitions, because no topological sort</span>
</span><span id="Definition.global_context-528"><a href="#Definition.global_context-528"><span class="linenos">528</span></a><span class="sd">        is possible there (see also `clustered_global_context`).</span>
</span><span id="Definition.global_context-529"><a href="#Definition.global_context-529"><span class="linenos">529</span></a>
</span><span id="Definition.global_context-530"><a href="#Definition.global_context-530"><span class="linenos">530</span></a><span class="sd">        Arguments:</span>
</span><span id="Definition.global_context-531"><a href="#Definition.global_context-531"><span class="linenos">531</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="Definition.global_context-532"><a href="#Definition.global_context-532"><span class="linenos">532</span></a><span class="sd">        * `inclusive`: if `True`, outputs also itself, default `False`.</span>
</span><span id="Definition.global_context-533"><a href="#Definition.global_context-533"><span class="linenos">533</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`</span>
</span><span id="Definition.global_context-534"><a href="#Definition.global_context-534"><span class="linenos">534</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition.global_context-535"><a href="#Definition.global_context-535"><span class="linenos">535</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>All of the definitions in the global context when this definition was created.</p>

<p>Note that this does not include this definition itself, except when the definition is a inductive,
constructor or projection. Because those are mutually recursive objects, they reference themselves
and are therefore part of their own global context.</p>

<p>The resulting iterable is topologically sorted. That is, for any definition in the stream, any
definition reachable from the forward closure of the definition also exists in the remainder of the
stream. An exception to this rule are mutually recursive definitions, because no topological sort
is possible there (see also <code><a href="#Definition.clustered_global_context">clustered_global_context</a></code>).</p>

<p>Arguments:</p>

<ul>
<li><code>across_files</code>: if <code>False</code>, outputs only the definitions from the local file, default <code>True</code>.</li>
<li><code>inclusive</code>: if <code>True</code>, outputs also itself, default <code>False</code>.
Note: if it is a self-recursive definition, the <code>inclusive</code> argument is ignored, and considered as <code>True</code></li>
</ul>
</div>


                            </div>
                            <div id="Definition.clustered_global_context" class="classattr">
                                        <input id="Definition.clustered_global_context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clustered_global_context</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">across_files</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">inclusive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="Definition.clustered_global_context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Definition.clustered_global_context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Definition.clustered_global_context-537"><a href="#Definition.clustered_global_context-537"><span class="linenos">537</span></a>    <span class="k">def</span> <span class="nf">clustered_global_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inclusive</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="Definition.clustered_global_context-538"><a href="#Definition.clustered_global_context-538"><span class="linenos">538</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions in the global context when this definition was created, clustered into</span>
</span><span id="Definition.clustered_global_context-539"><a href="#Definition.clustered_global_context-539"><span class="linenos">539</span></a><span class="sd">        mutually recursive cliques.</span>
</span><span id="Definition.clustered_global_context-540"><a href="#Definition.clustered_global_context-540"><span class="linenos">540</span></a>
</span><span id="Definition.clustered_global_context-541"><a href="#Definition.clustered_global_context-541"><span class="linenos">541</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="Definition.clustered_global_context-542"><a href="#Definition.clustered_global_context-542"><span class="linenos">542</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of the</span>
</span><span id="Definition.clustered_global_context-543"><a href="#Definition.clustered_global_context-543"><span class="linenos">543</span></a><span class="sd">        stream.</span>
</span><span id="Definition.clustered_global_context-544"><a href="#Definition.clustered_global_context-544"><span class="linenos">544</span></a>
</span><span id="Definition.clustered_global_context-545"><a href="#Definition.clustered_global_context-545"><span class="linenos">545</span></a><span class="sd">        Arguments:</span>
</span><span id="Definition.clustered_global_context-546"><a href="#Definition.clustered_global_context-546"><span class="linenos">546</span></a><span class="sd">        * `across_files`: if `False`, outputs only the definitions from the local file, default `True`.</span>
</span><span id="Definition.clustered_global_context-547"><a href="#Definition.clustered_global_context-547"><span class="linenos">547</span></a><span class="sd">        * `inclusive`: if `True`, outputs also the cluster of itself, default `False`.</span>
</span><span id="Definition.clustered_global_context-548"><a href="#Definition.clustered_global_context-548"><span class="linenos">548</span></a><span class="sd">        Note: if it is a self-recursive definition, the `inclusive` argument is ignored, and considered as `True`.</span>
</span><span id="Definition.clustered_global_context-549"><a href="#Definition.clustered_global_context-549"><span class="linenos">549</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Definition.clustered_global_context-550"><a href="#Definition.clustered_global_context-550"><span class="linenos">550</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>All of the definitions in the global context when this definition was created, clustered into
mutually recursive cliques.</p>

<p>The resulting iterable is topologically sorted. That is, for any definition in the stream, any
definition reachable from the forward closure of the definition also exists in the remainder of the
stream.</p>

<p>Arguments:</p>

<ul>
<li><code>across_files</code>: if <code>False</code>, outputs only the definitions from the local file, default <code>True</code>.</li>
<li><code>inclusive</code>: if <code>True</code>, outputs also the cluster of itself, default <code>False</code>.
Note: if it is a self-recursive definition, the <code>inclusive</code> argument is ignored, and considered as <code>True</code>.</li>
</ul>
</div>


                            </div>
                            <div id="Definition.status" class="classattr">
                                <div class="attr variable">
            <span class="name">status</span><span class="annotation">: <a href="#Original">Original</a> | <a href="#Discharged">Discharged</a> | <a href="#Substituted">Substituted</a></span>

        
    </div>
    <a class="headerlink" href="#Definition.status"></a>
    
            <div class="docstring"><p>A definition is either
(1) an object as originally inputted by the user.
(2) a definition that was originally defined in a section and has now had the section
    variables discharged into it.
(3) a definition that was obtained by performing some sort of module functor substitution.
When a definition is not original, we cross-reference to the definition that it was derived from.</p>
</div>


                            </div>
                            <div id="Definition.kind" class="classattr">
                                <div class="attr variable">
            <span class="name">kind</span><span class="annotation">: Union[<a href="#Inductive">Inductive</a>, <a href="#Constructor">Constructor</a>, <a href="#Projection">Projection</a>, <a href="#ManualConstant">ManualConstant</a>, <a href="#TacticalConstant">TacticalConstant</a>, <a href="#ManualSectionConstant">ManualSectionConstant</a>, <a href="#TacticalSectionConstant">TacticalSectionConstant</a>]</span>

        
    </div>
    <a class="headerlink" href="#Definition.kind"></a>
    
            <div class="docstring"><p>The kind of the definition.</p>

<p>It can be an constant, section constant, inductive, constructor or projection. In case of a constant
of a constant or section constant, an optional tactical proof can be associated. In case of an inductive,
constructor or projection, another definition that acts as the representative of the mutually recursive
cluster of definitions is associated.</p>

<p>The associated information is low-level. Prefer to use the properties <code><a href="#Definition.proof">proof</a></code> and <code><a href="#Definition.cluster">cluster</a></code> to access them.</p>
</div>


                            </div>
                            <div id="Definition.proof" class="classattr">
                                <div class="attr variable">
            <span class="name">proof</span><span class="annotation">: collections.abc.Sequence[<a href="#ProofStep">ProofStep</a>] | None</span>

        
    </div>
    <a class="headerlink" href="#Definition.proof"></a>
    
            <div class="docstring"><p>An optional tactical proof that was used to create this definition.</p>
</div>


                            </div>
                            <div id="Definition.cluster_representative" class="classattr">
                                <div class="attr variable">
            <span class="name">cluster_representative</span><span class="annotation">: <a href="#Definition">Definition</a></span>

        
    </div>
    <a class="headerlink" href="#Definition.cluster_representative"></a>
    
            <div class="docstring"><p>A unique representative of the mutually recursive cluster of definitions this definition is part of.
If the definition is not mutually recursive, the representative is itself.</p>

<p>This is a low-level property. Prefer to use the <code><a href="#Definition.cluster">cluster</a></code> property.</p>
</div>


                            </div>
                            <div id="Definition.cluster" class="classattr">
                                <div class="attr variable">
            <span class="name">cluster</span><span class="annotation">: collections.abc.Iterable[<a href="#Definition">Definition</a>]</span>

        
    </div>
    <a class="headerlink" href="#Definition.cluster"></a>
    
            <div class="docstring"><p>The cluster of mutually recursive definitions that this definition is part of.
If the definition is not mutually recursive, the cluster is a singleton.</p>
</div>


                            </div>
                            <div id="Definition.type_text" class="classattr">
                                <div class="attr variable">
            <span class="name">type_text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Definition.type_text"></a>
    
            <div class="docstring"><p>A textual representation of the type of this definition.</p>
</div>


                            </div>
                            <div id="Definition.term_text" class="classattr">
                                <div class="attr variable">
            <span class="name">term_text</span><span class="annotation">: str | None</span>

        
    </div>
    <a class="headerlink" href="#Definition.term_text"></a>
    
            <div class="docstring"><p>A textual representation of the body of this definition.
For inductives, constructors, projections, section variables and axioms this is <code>None</code>.</p>
</div>


                            </div>
                            <div id="Definition.is_file_representative" class="classattr">
                                <div class="attr variable">
            <span class="name">is_file_representative</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#Definition.is_file_representative"></a>
    
            <div class="docstring"><p>Returns true if this definition is the representative of the super-global context of it's file.
Se also <code><a href="#Dataset.representative">Dataset.representative</a></code>.</p>
</div>


                            </div>
                </section>
                <section id="Dataset">
                            <input id="Dataset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Dataset</span>:

                <label class="view-source-button" for="Dataset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dataset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dataset-617"><a href="#Dataset-617"><span class="linenos">617</span></a><span class="k">class</span> <span class="nc">Dataset</span><span class="p">:</span>
</span><span id="Dataset-618"><a href="#Dataset-618"><span class="linenos">618</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The data corresponding to a single Coq source file. The data contains a representation of all definitions</span>
</span><span id="Dataset-619"><a href="#Dataset-619"><span class="linenos">619</span></a><span class="sd">    that have existed at any point throughout the compilation of the source file.</span>
</span><span id="Dataset-620"><a href="#Dataset-620"><span class="linenos">620</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Dataset-621"><a href="#Dataset-621"><span class="linenos">621</span></a>
</span><span id="Dataset-622"><a href="#Dataset-622"><span class="linenos">622</span></a>    <span class="n">graph</span> <span class="p">:</span> <span class="n">GraphId</span>
</span><span id="Dataset-623"><a href="#Dataset-623"><span class="linenos">623</span></a>    <span class="n">filename</span> <span class="p">:</span> <span class="n">Path</span>
</span><span id="Dataset-624"><a href="#Dataset-624"><span class="linenos">624</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The physical file in which the data contained in this class can be found.&quot;&quot;&quot;</span>
</span><span id="Dataset-625"><a href="#Dataset-625"><span class="linenos">625</span></a>
</span><span id="Dataset-626"><a href="#Dataset-626"><span class="linenos">626</span></a>    <span class="nd">@property</span>
</span><span id="Dataset-627"><a href="#Dataset-627"><span class="linenos">627</span></a>    <span class="k">def</span> <span class="nf">lowlevel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Dataset-628"><a href="#Dataset-628"><span class="linenos">628</span></a>        <span class="o">...</span>
</span><span id="Dataset-629"><a href="#Dataset-629"><span class="linenos">629</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Dataset-630"><a href="#Dataset-630"><span class="linenos">630</span></a>        <span class="o">...</span>
</span><span id="Dataset-631"><a href="#Dataset-631"><span class="linenos">631</span></a>
</span><span id="Dataset-632"><a href="#Dataset-632"><span class="linenos">632</span></a>    <span class="nd">@property</span>
</span><span id="Dataset-633"><a href="#Dataset-633"><span class="linenos">633</span></a>    <span class="k">def</span> <span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
</span><span id="Dataset-634"><a href="#Dataset-634"><span class="linenos">634</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of physical paths of data files that are direct dependencies of this file.</span>
</span><span id="Dataset-635"><a href="#Dataset-635"><span class="linenos">635</span></a>
</span><span id="Dataset-636"><a href="#Dataset-636"><span class="linenos">636</span></a><span class="sd">        It is guaranteed that no cycles exist in the dependency relation between files induced by this field.</span>
</span><span id="Dataset-637"><a href="#Dataset-637"><span class="linenos">637</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset-638"><a href="#Dataset-638"><span class="linenos">638</span></a>        <span class="o">...</span>
</span><span id="Dataset-639"><a href="#Dataset-639"><span class="linenos">639</span></a>
</span><span id="Dataset-640"><a href="#Dataset-640"><span class="linenos">640</span></a>    <span class="nd">@property</span>
</span><span id="Dataset-641"><a href="#Dataset-641"><span class="linenos">641</span></a>    <span class="k">def</span> <span class="nf">representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Dataset-642"><a href="#Dataset-642"><span class="linenos">642</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The entry point of the global context of definitions that are available when this file is &#39;Required&#39; by</span>
</span><span id="Dataset-643"><a href="#Dataset-643"><span class="linenos">643</span></a><span class="sd">        another file. The full global context can be obtained by following the `previous` node of definitions.</span>
</span><span id="Dataset-644"><a href="#Dataset-644"><span class="linenos">644</span></a><span class="sd">        If the compilation unit does not contain any &#39;super&#39;-global definitions this may be `None`.</span>
</span><span id="Dataset-645"><a href="#Dataset-645"><span class="linenos">645</span></a>
</span><span id="Dataset-646"><a href="#Dataset-646"><span class="linenos">646</span></a><span class="sd">        This is a low-level property.</span>
</span><span id="Dataset-647"><a href="#Dataset-647"><span class="linenos">647</span></a><span class="sd">        Prefer to use `definitions(spine_only = True)` and `clustered_definitions(spine_only=True)`.</span>
</span><span id="Dataset-648"><a href="#Dataset-648"><span class="linenos">648</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset-649"><a href="#Dataset-649"><span class="linenos">649</span></a>        <span class="o">...</span>
</span><span id="Dataset-650"><a href="#Dataset-650"><span class="linenos">650</span></a>
</span><span id="Dataset-651"><a href="#Dataset-651"><span class="linenos">651</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Dataset-652"><a href="#Dataset-652"><span class="linenos">652</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file.</span>
</span><span id="Dataset-653"><a href="#Dataset-653"><span class="linenos">653</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="Dataset-654"><a href="#Dataset-654"><span class="linenos">654</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="Dataset-655"><a href="#Dataset-655"><span class="linenos">655</span></a>
</span><span id="Dataset-656"><a href="#Dataset-656"><span class="linenos">656</span></a><span class="sd">        Arguments:</span>
</span><span id="Dataset-657"><a href="#Dataset-657"><span class="linenos">657</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="Dataset-658"><a href="#Dataset-658"><span class="linenos">658</span></a><span class="sd">        * `spine_only`: if True, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="Dataset-659"><a href="#Dataset-659"><span class="linenos">659</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="Dataset-660"><a href="#Dataset-660"><span class="linenos">660</span></a>
</span><span id="Dataset-661"><a href="#Dataset-661"><span class="linenos">661</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="Dataset-662"><a href="#Dataset-662"><span class="linenos">662</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="Dataset-663"><a href="#Dataset-663"><span class="linenos">663</span></a><span class="sd">        also exists in the remainder of the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="Dataset-664"><a href="#Dataset-664"><span class="linenos">664</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="Dataset-665"><a href="#Dataset-665"><span class="linenos">665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset-666"><a href="#Dataset-666"><span class="linenos">666</span></a>        <span class="o">...</span>
</span><span id="Dataset-667"><a href="#Dataset-667"><span class="linenos">667</span></a>
</span><span id="Dataset-668"><a href="#Dataset-668"><span class="linenos">668</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="Dataset-669"><a href="#Dataset-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file, clustered by mutually recursive definitions.</span>
</span><span id="Dataset-670"><a href="#Dataset-670"><span class="linenos">670</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="Dataset-671"><a href="#Dataset-671"><span class="linenos">671</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="Dataset-672"><a href="#Dataset-672"><span class="linenos">672</span></a>
</span><span id="Dataset-673"><a href="#Dataset-673"><span class="linenos">673</span></a><span class="sd">        Arguments:</span>
</span><span id="Dataset-674"><a href="#Dataset-674"><span class="linenos">674</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="Dataset-675"><a href="#Dataset-675"><span class="linenos">675</span></a><span class="sd">        * `spine_only`: if `True`, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="Dataset-676"><a href="#Dataset-676"><span class="linenos">676</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="Dataset-677"><a href="#Dataset-677"><span class="linenos">677</span></a>
</span><span id="Dataset-678"><a href="#Dataset-678"><span class="linenos">678</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="Dataset-679"><a href="#Dataset-679"><span class="linenos">679</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="Dataset-680"><a href="#Dataset-680"><span class="linenos">680</span></a><span class="sd">        also exists in the remainder of the stream.</span>
</span><span id="Dataset-681"><a href="#Dataset-681"><span class="linenos">681</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset-682"><a href="#Dataset-682"><span class="linenos">682</span></a>        <span class="o">...</span>
</span><span id="Dataset-683"><a href="#Dataset-683"><span class="linenos">683</span></a>
</span><span id="Dataset-684"><a href="#Dataset-684"><span class="linenos">684</span></a>    <span class="nd">@property</span>
</span><span id="Dataset-685"><a href="#Dataset-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">module_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Dataset-686"><a href="#Dataset-686"><span class="linenos">686</span></a>        <span class="o">...</span>
</span><span id="Dataset-687"><a href="#Dataset-687"><span class="linenos">687</span></a>
</span><span id="Dataset-688"><a href="#Dataset-688"><span class="linenos">688</span></a>    <span class="k">def</span> <span class="nf">node_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeid</span><span class="p">:</span> <span class="n">NodeId</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="Dataset-689"><a href="#Dataset-689"><span class="linenos">689</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Lookup a node inside of this file by it&#39;s local node-id. This is a low-level function.&quot;&quot;&quot;</span>
</span><span id="Dataset-690"><a href="#Dataset-690"><span class="linenos">690</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>The data corresponding to a single Coq source file. The data contains a representation of all definitions
that have existed at any point throughout the compilation of the source file.</p>
</div>


                            <div id="Dataset.graph" class="classattr">
                                <div class="attr variable">
            <span class="name">graph</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#Dataset.graph"></a>
    
    

                            </div>
                            <div id="Dataset.filename" class="classattr">
                                <div class="attr variable">
            <span class="name">filename</span><span class="annotation">: pathlib.Path</span>

        
    </div>
    <a class="headerlink" href="#Dataset.filename"></a>
    
            <div class="docstring"><p>The physical file in which the data contained in this class can be found.</p>
</div>


                            </div>
                            <div id="Dataset.lowlevel" class="classattr">
                                <div class="attr variable">
            <span class="name">lowlevel</span>

        
    </div>
    <a class="headerlink" href="#Dataset.lowlevel"></a>
    
    

                            </div>
                            <div id="Dataset.dependencies" class="classattr">
                                <div class="attr variable">
            <span class="name">dependencies</span><span class="annotation">: collections.abc.Sequence[pathlib.Path]</span>

        
    </div>
    <a class="headerlink" href="#Dataset.dependencies"></a>
    
            <div class="docstring"><p>A list of physical paths of data files that are direct dependencies of this file.</p>

<p>It is guaranteed that no cycles exist in the dependency relation between files induced by this field.</p>
</div>


                            </div>
                            <div id="Dataset.representative" class="classattr">
                                <div class="attr variable">
            <span class="name">representative</span><span class="annotation">: <a href="#Definition">Definition</a> | None</span>

        
    </div>
    <a class="headerlink" href="#Dataset.representative"></a>
    
            <div class="docstring"><p>The entry point of the global context of definitions that are available when this file is 'Required' by
another file. The full global context can be obtained by following the <code>previous</code> node of definitions.
If the compilation unit does not contain any 'super'-global definitions this may be <code>None</code>.</p>

<p>This is a low-level property.
Prefer to use <code>definitions(spine_only = True)</code> and <code>clustered_definitions(spine_only=True)</code>.</p>
</div>


                            </div>
                            <div id="Dataset.definitions" class="classattr">
                                        <input id="Dataset.definitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">definitions</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">across_files</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">spine_only</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Dataset.definitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dataset.definitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dataset.definitions-651"><a href="#Dataset.definitions-651"><span class="linenos">651</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="Dataset.definitions-652"><a href="#Dataset.definitions-652"><span class="linenos">652</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file.</span>
</span><span id="Dataset.definitions-653"><a href="#Dataset.definitions-653"><span class="linenos">653</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="Dataset.definitions-654"><a href="#Dataset.definitions-654"><span class="linenos">654</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="Dataset.definitions-655"><a href="#Dataset.definitions-655"><span class="linenos">655</span></a>
</span><span id="Dataset.definitions-656"><a href="#Dataset.definitions-656"><span class="linenos">656</span></a><span class="sd">        Arguments:</span>
</span><span id="Dataset.definitions-657"><a href="#Dataset.definitions-657"><span class="linenos">657</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="Dataset.definitions-658"><a href="#Dataset.definitions-658"><span class="linenos">658</span></a><span class="sd">        * `spine_only`: if True, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="Dataset.definitions-659"><a href="#Dataset.definitions-659"><span class="linenos">659</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="Dataset.definitions-660"><a href="#Dataset.definitions-660"><span class="linenos">660</span></a>
</span><span id="Dataset.definitions-661"><a href="#Dataset.definitions-661"><span class="linenos">661</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="Dataset.definitions-662"><a href="#Dataset.definitions-662"><span class="linenos">662</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="Dataset.definitions-663"><a href="#Dataset.definitions-663"><span class="linenos">663</span></a><span class="sd">        also exists in the remainder of the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="Dataset.definitions-664"><a href="#Dataset.definitions-664"><span class="linenos">664</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="Dataset.definitions-665"><a href="#Dataset.definitions-665"><span class="linenos">665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset.definitions-666"><a href="#Dataset.definitions-666"><span class="linenos">666</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>All of the definitions present in the file.
Note that some of these nodes may not be part of the 'super-global' context. Those are definitions inside
of sections or module functors.</p>

<p>Arguments:</p>

<ul>
<li><code>across_files</code>: if <code>True</code>, outputs also definitions from dependent files, default <code>False</code>.</li>
<li><code>spine_only</code>: if True, outputs only the definitions on the main spine, default <code>False</code>.
Note: <code>across_files = True</code> is incompatible with <code>spine_only = False</code>.</li>
</ul>

<p>When <code>spine_only = True</code>, the resulting iterable is topologically sorted. That is, for
any definition in the stream, any definition reachable from the forward closure of the definition
also exists in the remainder of the stream. An exception to this rule are mutually recursive definitions,
because no topological sort is possible there (see also <code><a href="#Dataset.clustered_definitions">clustered_definitions</a></code>).</p>
</div>


                            </div>
                            <div id="Dataset.clustered_definitions" class="classattr">
                                        <input id="Dataset.clustered_definitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clustered_definitions</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">across_files</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">spine_only</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="Dataset.clustered_definitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dataset.clustered_definitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dataset.clustered_definitions-668"><a href="#Dataset.clustered_definitions-668"><span class="linenos">668</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">across_files</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">spine_only</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="Dataset.clustered_definitions-669"><a href="#Dataset.clustered_definitions-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the file, clustered by mutually recursive definitions.</span>
</span><span id="Dataset.clustered_definitions-670"><a href="#Dataset.clustered_definitions-670"><span class="linenos">670</span></a><span class="sd">        Note that some of these nodes may not be part of the &#39;super-global&#39; context. Those are definitions inside</span>
</span><span id="Dataset.clustered_definitions-671"><a href="#Dataset.clustered_definitions-671"><span class="linenos">671</span></a><span class="sd">        of sections or module functors.</span>
</span><span id="Dataset.clustered_definitions-672"><a href="#Dataset.clustered_definitions-672"><span class="linenos">672</span></a>
</span><span id="Dataset.clustered_definitions-673"><a href="#Dataset.clustered_definitions-673"><span class="linenos">673</span></a><span class="sd">        Arguments:</span>
</span><span id="Dataset.clustered_definitions-674"><a href="#Dataset.clustered_definitions-674"><span class="linenos">674</span></a><span class="sd">        * `across_files`: if `True`, outputs also definitions from dependent files, default `False`.</span>
</span><span id="Dataset.clustered_definitions-675"><a href="#Dataset.clustered_definitions-675"><span class="linenos">675</span></a><span class="sd">        * `spine_only`: if `True`, outputs only the definitions on the main spine, default `False`.</span>
</span><span id="Dataset.clustered_definitions-676"><a href="#Dataset.clustered_definitions-676"><span class="linenos">676</span></a><span class="sd">        Note: `across_files = True` is incompatible with `spine_only = False`.</span>
</span><span id="Dataset.clustered_definitions-677"><a href="#Dataset.clustered_definitions-677"><span class="linenos">677</span></a>
</span><span id="Dataset.clustered_definitions-678"><a href="#Dataset.clustered_definitions-678"><span class="linenos">678</span></a><span class="sd">        When `spine_only = True`, the resulting iterable is topologically sorted. That is, for</span>
</span><span id="Dataset.clustered_definitions-679"><a href="#Dataset.clustered_definitions-679"><span class="linenos">679</span></a><span class="sd">        any definition in the stream, any definition reachable from the forward closure of the definition</span>
</span><span id="Dataset.clustered_definitions-680"><a href="#Dataset.clustered_definitions-680"><span class="linenos">680</span></a><span class="sd">        also exists in the remainder of the stream.</span>
</span><span id="Dataset.clustered_definitions-681"><a href="#Dataset.clustered_definitions-681"><span class="linenos">681</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Dataset.clustered_definitions-682"><a href="#Dataset.clustered_definitions-682"><span class="linenos">682</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>All of the definitions present in the file, clustered by mutually recursive definitions.
Note that some of these nodes may not be part of the 'super-global' context. Those are definitions inside
of sections or module functors.</p>

<p>Arguments:</p>

<ul>
<li><code>across_files</code>: if <code>True</code>, outputs also definitions from dependent files, default <code>False</code>.</li>
<li><code>spine_only</code>: if <code>True</code>, outputs only the definitions on the main spine, default <code>False</code>.
Note: <code>across_files = True</code> is incompatible with <code>spine_only = False</code>.</li>
</ul>

<p>When <code>spine_only = True</code>, the resulting iterable is topologically sorted. That is, for
any definition in the stream, any definition reachable from the forward closure of the definition
also exists in the remainder of the stream.</p>
</div>


                            </div>
                            <div id="Dataset.module_name" class="classattr">
                                <div class="attr variable">
            <span class="name">module_name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Dataset.module_name"></a>
    
    

                            </div>
                            <div id="Dataset.node_by_id" class="classattr">
                                        <input id="Dataset.node_by_id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">node_by_id</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nodeid</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n"><a href="#Node">Node</a></span>:</span></span>

                <label class="view-source-button" for="Dataset.node_by_id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Dataset.node_by_id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Dataset.node_by_id-688"><a href="#Dataset.node_by_id-688"><span class="linenos">688</span></a>    <span class="k">def</span> <span class="nf">node_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodeid</span><span class="p">:</span> <span class="n">NodeId</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="Dataset.node_by_id-689"><a href="#Dataset.node_by_id-689"><span class="linenos">689</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Lookup a node inside of this file by it&#39;s local node-id. This is a low-level function.&quot;&quot;&quot;</span>
</span><span id="Dataset.node_by_id-690"><a href="#Dataset.node_by_id-690"><span class="linenos">690</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Lookup a node inside of this file by it's local node-id. This is a low-level function.</p>
</div>


                            </div>
                </section>
                <section id="lowlevel_to_highlevel">
                            <input id="lowlevel_to_highlevel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">lowlevel_to_highlevel</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">lreader</span><span class="p">:</span> <span class="n"><a href="#LowlevelDataReader">LowlevelDataReader</a></span></span><span class="return-annotation">) -> <span class="nb">dict</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="#Dataset">Dataset</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="lowlevel_to_highlevel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#lowlevel_to_highlevel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="lowlevel_to_highlevel-692"><a href="#lowlevel_to_highlevel-692"><span class="linenos">692</span></a><span class="k">def</span> <span class="nf">lowlevel_to_highlevel</span><span class="p">(</span><span class="n">lreader</span> <span class="p">:</span> <span class="n">LowlevelDataReader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">]:</span>
</span><span id="lowlevel_to_highlevel-693"><a href="#lowlevel_to_highlevel-693"><span class="linenos">693</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a dataset initialized as a `LowLevelDataReader` into a high level interface.&quot;&quot;&quot;</span>
</span><span id="lowlevel_to_highlevel-694"><a href="#lowlevel_to_highlevel-694"><span class="linenos">694</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Convert a dataset initialized as a <code>LowLevelDataReader</code> into a high level interface.</p>
</div>


                </section>
                <section id="data_reader">
                            <input id="data_reader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">data_reader</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">dataset_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="#Dataset">Dataset</a></span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="data_reader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#data_reader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="data_reader-696"><a href="#data_reader-696"><span class="linenos">696</span></a><span class="nd">@contextmanager</span>
</span><span id="data_reader-697"><a href="#data_reader-697"><span class="linenos">697</span></a><span class="k">def</span> <span class="nf">data_reader</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Dataset</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="data_reader-698"><a href="#data_reader-698"><span class="linenos">698</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a directory of dataset files into memory, and expose the data they contain.</span>
</span><span id="data_reader-699"><a href="#data_reader-699"><span class="linenos">699</span></a><span class="sd">    The result is a dictionary that maps physical paths to `Dataset` instances that allow access to the data.</span>
</span><span id="data_reader-700"><a href="#data_reader-700"><span class="linenos">700</span></a>
</span><span id="data_reader-701"><a href="#data_reader-701"><span class="linenos">701</span></a><span class="sd">    Arguments:</span>
</span><span id="data_reader-702"><a href="#data_reader-702"><span class="linenos">702</span></a><span class="sd">    `dataset_path`: Can either be a dataset directory, or a SquashFS image file. In case of an image</span>
</span><span id="data_reader-703"><a href="#data_reader-703"><span class="linenos">703</span></a><span class="sd">                    file `dataset.squ`, the image will be mounted using `squashfuse` on directory</span>
</span><span id="data_reader-704"><a href="#data_reader-704"><span class="linenos">704</span></a><span class="sd">                    `dataset/`, after which the contents of that directory will be read.</span>
</span><span id="data_reader-705"><a href="#data_reader-705"><span class="linenos">705</span></a>
</span><span id="data_reader-706"><a href="#data_reader-706"><span class="linenos">706</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="data_reader-707"><a href="#data_reader-707"><span class="linenos">707</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Load a directory of dataset files into memory, and expose the data they contain.
The result is a dictionary that maps physical paths to <code><a href="#Dataset">Dataset</a></code> instances that allow access to the data.</p>

<p>Arguments:
<code>dataset_path</code>: Can either be a dataset directory, or a SquashFS image file. In case of an image
                file <code>dataset.squ</code>, the image will be mounted using <code>squashfuse</code> on directory
                <code>dataset/</code>, after which the contents of that directory will be read.</p>
</div>


                </section>
                <section id="OnlineDefinitionsReader">
                            <input id="OnlineDefinitionsReader-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OnlineDefinitionsReader</span>:

                <label class="view-source-button" for="OnlineDefinitionsReader-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OnlineDefinitionsReader"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OnlineDefinitionsReader-709"><a href="#OnlineDefinitionsReader-709"><span class="linenos">709</span></a><span class="k">class</span> <span class="nc">OnlineDefinitionsReader</span><span class="p">:</span>
</span><span id="OnlineDefinitionsReader-710"><a href="#OnlineDefinitionsReader-710"><span class="linenos">710</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;This class represents a global context to Python by Coq, containing all</span>
</span><span id="OnlineDefinitionsReader-711"><a href="#OnlineDefinitionsReader-711"><span class="linenos">711</span></a><span class="sd">    known definitions and available tactics.&quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader-712"><a href="#OnlineDefinitionsReader-712"><span class="linenos">712</span></a>
</span><span id="OnlineDefinitionsReader-713"><a href="#OnlineDefinitionsReader-713"><span class="linenos">713</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="OnlineDefinitionsReader-714"><a href="#OnlineDefinitionsReader-714"><span class="linenos">714</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="OnlineDefinitionsReader-715"><a href="#OnlineDefinitionsReader-715"><span class="linenos">715</span></a>
</span><span id="OnlineDefinitionsReader-716"><a href="#OnlineDefinitionsReader-716"><span class="linenos">716</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="OnlineDefinitionsReader-717"><a href="#OnlineDefinitionsReader-717"><span class="linenos">717</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="OnlineDefinitionsReader-718"><a href="#OnlineDefinitionsReader-718"><span class="linenos">718</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the index in</span>
</span><span id="OnlineDefinitionsReader-719"><a href="#OnlineDefinitionsReader-719"><span class="linenos">719</span></a><span class="sd">        the global context stack where the node is physically located.</span>
</span><span id="OnlineDefinitionsReader-720"><a href="#OnlineDefinitionsReader-720"><span class="linenos">720</span></a>
</span><span id="OnlineDefinitionsReader-721"><a href="#OnlineDefinitionsReader-721"><span class="linenos">721</span></a><span class="sd">        Lowlevel function.</span>
</span><span id="OnlineDefinitionsReader-722"><a href="#OnlineDefinitionsReader-722"><span class="linenos">722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader-723"><a href="#OnlineDefinitionsReader-723"><span class="linenos">723</span></a>        <span class="o">...</span>
</span><span id="OnlineDefinitionsReader-724"><a href="#OnlineDefinitionsReader-724"><span class="linenos">724</span></a>
</span><span id="OnlineDefinitionsReader-725"><a href="#OnlineDefinitionsReader-725"><span class="linenos">725</span></a>    <span class="nd">@property</span>
</span><span id="OnlineDefinitionsReader-726"><a href="#OnlineDefinitionsReader-726"><span class="linenos">726</span></a>    <span class="k">def</span> <span class="nf">representative</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Definition</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OnlineDefinitionsReader-727"><a href="#OnlineDefinitionsReader-727"><span class="linenos">727</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The last definition in the global context. All other definitions can be accessed by following</span>
</span><span id="OnlineDefinitionsReader-728"><a href="#OnlineDefinitionsReader-728"><span class="linenos">728</span></a><span class="sd">        the `Definition.previous` chain starting from this definitions.</span>
</span><span id="OnlineDefinitionsReader-729"><a href="#OnlineDefinitionsReader-729"><span class="linenos">729</span></a>
</span><span id="OnlineDefinitionsReader-730"><a href="#OnlineDefinitionsReader-730"><span class="linenos">730</span></a><span class="sd">        This is a low-level property.</span>
</span><span id="OnlineDefinitionsReader-731"><a href="#OnlineDefinitionsReader-731"><span class="linenos">731</span></a><span class="sd">        Prefer to use `definitions` and `clustered_definitions`.</span>
</span><span id="OnlineDefinitionsReader-732"><a href="#OnlineDefinitionsReader-732"><span class="linenos">732</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader-733"><a href="#OnlineDefinitionsReader-733"><span class="linenos">733</span></a>        <span class="o">...</span>
</span><span id="OnlineDefinitionsReader-734"><a href="#OnlineDefinitionsReader-734"><span class="linenos">734</span></a>
</span><span id="OnlineDefinitionsReader-735"><a href="#OnlineDefinitionsReader-735"><span class="linenos">735</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="OnlineDefinitionsReader-736"><a href="#OnlineDefinitionsReader-736"><span class="linenos">736</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of definitions that are currently in the global context.</span>
</span><span id="OnlineDefinitionsReader-737"><a href="#OnlineDefinitionsReader-737"><span class="linenos">737</span></a>
</span><span id="OnlineDefinitionsReader-738"><a href="#OnlineDefinitionsReader-738"><span class="linenos">738</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="OnlineDefinitionsReader-739"><a href="#OnlineDefinitionsReader-739"><span class="linenos">739</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="OnlineDefinitionsReader-740"><a href="#OnlineDefinitionsReader-740"><span class="linenos">740</span></a><span class="sd">        the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="OnlineDefinitionsReader-741"><a href="#OnlineDefinitionsReader-741"><span class="linenos">741</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="OnlineDefinitionsReader-742"><a href="#OnlineDefinitionsReader-742"><span class="linenos">742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader-743"><a href="#OnlineDefinitionsReader-743"><span class="linenos">743</span></a>        <span class="o">...</span>
</span><span id="OnlineDefinitionsReader-744"><a href="#OnlineDefinitionsReader-744"><span class="linenos">744</span></a>
</span><span id="OnlineDefinitionsReader-745"><a href="#OnlineDefinitionsReader-745"><span class="linenos">745</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="OnlineDefinitionsReader-746"><a href="#OnlineDefinitionsReader-746"><span class="linenos">746</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the global context, clustered by mutually recursive definitions.</span>
</span><span id="OnlineDefinitionsReader-747"><a href="#OnlineDefinitionsReader-747"><span class="linenos">747</span></a>
</span><span id="OnlineDefinitionsReader-748"><a href="#OnlineDefinitionsReader-748"><span class="linenos">748</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="OnlineDefinitionsReader-749"><a href="#OnlineDefinitionsReader-749"><span class="linenos">749</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="OnlineDefinitionsReader-750"><a href="#OnlineDefinitionsReader-750"><span class="linenos">750</span></a><span class="sd">        the stream.</span>
</span><span id="OnlineDefinitionsReader-751"><a href="#OnlineDefinitionsReader-751"><span class="linenos">751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader-752"><a href="#OnlineDefinitionsReader-752"><span class="linenos">752</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>This class represents a global context to Python by Coq, containing all
known definitions and available tactics.</p>
</div>


                            <div id="OnlineDefinitionsReader.local_to_global" class="classattr">
                                        <input id="OnlineDefinitionsReader.local_to_global-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">local_to_global</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">graph</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="OnlineDefinitionsReader.local_to_global-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OnlineDefinitionsReader.local_to_global"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OnlineDefinitionsReader.local_to_global-713"><a href="#OnlineDefinitionsReader.local_to_global-713"><span class="linenos">713</span></a>    <span class="k">def</span> <span class="nf">local_to_global</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dep_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="OnlineDefinitionsReader.local_to_global-714"><a href="#OnlineDefinitionsReader.local_to_global-714"><span class="linenos">714</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a dependency-index relative to a graph-id to a new graph-id.</span>
</span><span id="OnlineDefinitionsReader.local_to_global-715"><a href="#OnlineDefinitionsReader.local_to_global-715"><span class="linenos">715</span></a>
</span><span id="OnlineDefinitionsReader.local_to_global-716"><a href="#OnlineDefinitionsReader.local_to_global-716"><span class="linenos">716</span></a><span class="sd">        This is used to find the graph-id where a particular node can be found. If `graph` is the</span>
</span><span id="OnlineDefinitionsReader.local_to_global-717"><a href="#OnlineDefinitionsReader.local_to_global-717"><span class="linenos">717</span></a><span class="sd">        graph-id that contains a reference to a node and `dep_index` is the relative location</span>
</span><span id="OnlineDefinitionsReader.local_to_global-718"><a href="#OnlineDefinitionsReader.local_to_global-718"><span class="linenos">718</span></a><span class="sd">        where that node can be found then `local_to_global(graph, dep_index)` finds the index in</span>
</span><span id="OnlineDefinitionsReader.local_to_global-719"><a href="#OnlineDefinitionsReader.local_to_global-719"><span class="linenos">719</span></a><span class="sd">        the global context stack where the node is physically located.</span>
</span><span id="OnlineDefinitionsReader.local_to_global-720"><a href="#OnlineDefinitionsReader.local_to_global-720"><span class="linenos">720</span></a>
</span><span id="OnlineDefinitionsReader.local_to_global-721"><a href="#OnlineDefinitionsReader.local_to_global-721"><span class="linenos">721</span></a><span class="sd">        Lowlevel function.</span>
</span><span id="OnlineDefinitionsReader.local_to_global-722"><a href="#OnlineDefinitionsReader.local_to_global-722"><span class="linenos">722</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader.local_to_global-723"><a href="#OnlineDefinitionsReader.local_to_global-723"><span class="linenos">723</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Convert a dependency-index relative to a graph-id to a new graph-id.</p>

<p>This is used to find the graph-id where a particular node can be found. If <code>graph</code> is the
graph-id that contains a reference to a node and <code>dep_index</code> is the relative location
where that node can be found then <code>local_to_global(graph, dep_index)</code> finds the index in
the global context stack where the node is physically located.</p>

<p>Lowlevel function.</p>
</div>


                            </div>
                            <div id="OnlineDefinitionsReader.representative" class="classattr">
                                <div class="attr variable">
            <span class="name">representative</span><span class="annotation">: <a href="#Definition">Definition</a> | None</span>

        
    </div>
    <a class="headerlink" href="#OnlineDefinitionsReader.representative"></a>
    
            <div class="docstring"><p>The last definition in the global context. All other definitions can be accessed by following
the <code><a href="#Definition.previous">Definition.previous</a></code> chain starting from this definitions.</p>

<p>This is a low-level property.
Prefer to use <code><a href="#OnlineDefinitionsReader.definitions">definitions</a></code> and <code><a href="#OnlineDefinitionsReader.clustered_definitions">clustered_definitions</a></code>.</p>
</div>


                            </div>
                            <div id="OnlineDefinitionsReader.definitions" class="classattr">
                                        <input id="OnlineDefinitionsReader.definitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">definitions</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">full</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="OnlineDefinitionsReader.definitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OnlineDefinitionsReader.definitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OnlineDefinitionsReader.definitions-735"><a href="#OnlineDefinitionsReader.definitions-735"><span class="linenos">735</span></a>    <span class="k">def</span> <span class="nf">definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="OnlineDefinitionsReader.definitions-736"><a href="#OnlineDefinitionsReader.definitions-736"><span class="linenos">736</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of definitions that are currently in the global context.</span>
</span><span id="OnlineDefinitionsReader.definitions-737"><a href="#OnlineDefinitionsReader.definitions-737"><span class="linenos">737</span></a>
</span><span id="OnlineDefinitionsReader.definitions-738"><a href="#OnlineDefinitionsReader.definitions-738"><span class="linenos">738</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="OnlineDefinitionsReader.definitions-739"><a href="#OnlineDefinitionsReader.definitions-739"><span class="linenos">739</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="OnlineDefinitionsReader.definitions-740"><a href="#OnlineDefinitionsReader.definitions-740"><span class="linenos">740</span></a><span class="sd">        the stream. An exception to this rule are mutually recursive definitions,</span>
</span><span id="OnlineDefinitionsReader.definitions-741"><a href="#OnlineDefinitionsReader.definitions-741"><span class="linenos">741</span></a><span class="sd">        because no topological sort is possible there (see also `clustered_definitions`).</span>
</span><span id="OnlineDefinitionsReader.definitions-742"><a href="#OnlineDefinitionsReader.definitions-742"><span class="linenos">742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader.definitions-743"><a href="#OnlineDefinitionsReader.definitions-743"><span class="linenos">743</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>The list of definitions that are currently in the global context.</p>

<p>The resulting iterable is topologically sorted. That is, for any definition in the stream, any
definition reachable from the forward closure of the definition also exists in the remainder of
the stream. An exception to this rule are mutually recursive definitions,
because no topological sort is possible there (see also <code><a href="#OnlineDefinitionsReader.clustered_definitions">clustered_definitions</a></code>).</p>
</div>


                            </div>
                            <div id="OnlineDefinitionsReader.clustered_definitions" class="classattr">
                                        <input id="OnlineDefinitionsReader.clustered_definitions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clustered_definitions</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">full</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="OnlineDefinitionsReader.clustered_definitions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OnlineDefinitionsReader.clustered_definitions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OnlineDefinitionsReader.clustered_definitions-745"><a href="#OnlineDefinitionsReader.clustered_definitions-745"><span class="linenos">745</span></a>    <span class="k">def</span> <span class="nf">clustered_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]]:</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-746"><a href="#OnlineDefinitionsReader.clustered_definitions-746"><span class="linenos">746</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;All of the definitions present in the global context, clustered by mutually recursive definitions.</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-747"><a href="#OnlineDefinitionsReader.clustered_definitions-747"><span class="linenos">747</span></a>
</span><span id="OnlineDefinitionsReader.clustered_definitions-748"><a href="#OnlineDefinitionsReader.clustered_definitions-748"><span class="linenos">748</span></a><span class="sd">        The resulting iterable is topologically sorted. That is, for any definition in the stream, any</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-749"><a href="#OnlineDefinitionsReader.clustered_definitions-749"><span class="linenos">749</span></a><span class="sd">        definition reachable from the forward closure of the definition also exists in the remainder of</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-750"><a href="#OnlineDefinitionsReader.clustered_definitions-750"><span class="linenos">750</span></a><span class="sd">        the stream.</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-751"><a href="#OnlineDefinitionsReader.clustered_definitions-751"><span class="linenos">751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OnlineDefinitionsReader.clustered_definitions-752"><a href="#OnlineDefinitionsReader.clustered_definitions-752"><span class="linenos">752</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>All of the definitions present in the global context, clustered by mutually recursive definitions.</p>

<p>The resulting iterable is topologically sorted. That is, for any definition in the stream, any
definition reachable from the forward closure of the definition also exists in the remainder of
the stream.</p>
</div>


                            </div>
                </section>
                <section id="online_definitions_initialize">
                            <input id="online_definitions_initialize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">online_definitions_initialize</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">stack</span><span class="p">:</span> <span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span>,</span><span class="param">	<span class="n">init</span><span class="p">:</span> <span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Initialize_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Initialize_Reader</a></span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="online_definitions_initialize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#online_definitions_initialize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="online_definitions_initialize-754"><a href="#online_definitions_initialize-754"><span class="linenos">754</span></a><span class="nd">@contextmanager</span>
</span><span id="online_definitions_initialize-755"><a href="#online_definitions_initialize-755"><span class="linenos">755</span></a><span class="k">def</span> <span class="nf">online_definitions_initialize</span><span class="p">(</span><span class="n">stack</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">,</span>
</span><span id="online_definitions_initialize-756"><a href="#online_definitions_initialize-756"><span class="linenos">756</span></a>                                  <span class="n">init</span><span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Initialize_Reader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">OnlineDefinitionsReader</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="online_definitions_initialize-757"><a href="#online_definitions_initialize-757"><span class="linenos">757</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a new initialization message sent by Coq, construct a</span>
</span><span id="online_definitions_initialize-758"><a href="#online_definitions_initialize-758"><span class="linenos">758</span></a><span class="sd">    `OnlineDefinitiosnReader` object. This can be used to inspect the</span>
</span><span id="online_definitions_initialize-759"><a href="#online_definitions_initialize-759"><span class="linenos">759</span></a><span class="sd">    definitions currently available. Additionally, using `online_data_predict`</span>
</span><span id="online_definitions_initialize-760"><a href="#online_definitions_initialize-760"><span class="linenos">760</span></a><span class="sd">    it can be combined with a subsequent prediction request received from Coq</span>
</span><span id="online_definitions_initialize-761"><a href="#online_definitions_initialize-761"><span class="linenos">761</span></a><span class="sd">    to build a `ProofState`.</span>
</span><span id="online_definitions_initialize-762"><a href="#online_definitions_initialize-762"><span class="linenos">762</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="online_definitions_initialize-763"><a href="#online_definitions_initialize-763"><span class="linenos">763</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Given a new initialization message sent by Coq, construct a
<code>OnlineDefinitiosnReader</code> object. This can be used to inspect the
definitions currently available. Additionally, using <code><a href="#online_data_predict">online_data_predict</a></code>
it can be combined with a subsequent prediction request received from Coq
to build a <code><a href="#ProofState">ProofState</a></code>.</p>
</div>


                </section>
                <section id="empty_online_definitions_initialize">
                            <input id="empty_online_definitions_initialize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">empty_online_definitions_initialize</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span>:</span></span>

                <label class="view-source-button" for="empty_online_definitions_initialize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#empty_online_definitions_initialize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="empty_online_definitions_initialize-765"><a href="#empty_online_definitions_initialize-765"><span class="linenos">765</span></a><span class="k">def</span> <span class="nf">empty_online_definitions_initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">OnlineDefinitionsReader</span><span class="p">:</span>
</span><span id="empty_online_definitions_initialize-766"><a href="#empty_online_definitions_initialize-766"><span class="linenos">766</span></a>    <span class="o">...</span>
</span></pre></div>


    

                </section>
                <section id="online_data_predict">
                            <input id="online_data_predict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">online_data_predict</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">base</span><span class="p">:</span> <span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span>,</span><span class="param">	<span class="n">predict</span><span class="p">:</span> <span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Predict_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Predict_Reader</a></span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#ProofState">ProofState</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="online_data_predict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#online_data_predict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="online_data_predict-768"><a href="#online_data_predict-768"><span class="linenos">768</span></a><span class="nd">@contextmanager</span>
</span><span id="online_data_predict-769"><a href="#online_data_predict-769"><span class="linenos">769</span></a><span class="k">def</span> <span class="nf">online_data_predict</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">,</span>
</span><span id="online_data_predict-770"><a href="#online_data_predict-770"><span class="linenos">770</span></a>                        <span class="n">predict</span><span class="p">:</span> <span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Predict_Reader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">ProofState</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="online_data_predict-771"><a href="#online_data_predict-771"><span class="linenos">771</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `OnlineDefinitionsReader` instance constructed through</span>
</span><span id="online_data_predict-772"><a href="#online_data_predict-772"><span class="linenos">772</span></a><span class="sd">    `online_data_initialize`, and a prediction message sent by Coq, construct a</span>
</span><span id="online_data_predict-773"><a href="#online_data_predict-773"><span class="linenos">773</span></a><span class="sd">    `ProofState` object that represents the current proof state in Coq.</span>
</span><span id="online_data_predict-774"><a href="#online_data_predict-774"><span class="linenos">774</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="online_data_predict-775"><a href="#online_data_predict-775"><span class="linenos">775</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Given a <code><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></code> instance constructed through
<code>online_data_initialize</code>, and a prediction message sent by Coq, construct a
<code><a href="#ProofState">ProofState</a></code> object that represents the current proof state in Coq.</p>
</div>


                </section>
                <section id="TacticPredictionGraph">
                            <input id="TacticPredictionGraph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticPredictionGraph</span>:

                <label class="view-source-button" for="TacticPredictionGraph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticPredictionGraph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticPredictionGraph-777"><a href="#TacticPredictionGraph-777"><span class="linenos">777</span></a><span class="nd">@dataclass</span>
</span><span id="TacticPredictionGraph-778"><a href="#TacticPredictionGraph-778"><span class="linenos">778</span></a><span class="k">class</span> <span class="nc">TacticPredictionGraph</span><span class="p">:</span>
</span><span id="TacticPredictionGraph-779"><a href="#TacticPredictionGraph-779"><span class="linenos">779</span></a>    <span class="n">ident</span> <span class="p">:</span> <span class="nb">int</span>
</span><span id="TacticPredictionGraph-780"><a href="#TacticPredictionGraph-780"><span class="linenos">780</span></a>    <span class="n">arguments</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]</span>
</span><span id="TacticPredictionGraph-781"><a href="#TacticPredictionGraph-781"><span class="linenos">781</span></a>    <span class="n">confidence</span> <span class="p">:</span> <span class="nb">float</span>
</span></pre></div>


    

                            <div id="TacticPredictionGraph.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticPredictionGraph</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ident</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">arguments</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Node">Node</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionGraph.__init__"></a>
    
    

                            </div>
                            <div id="TacticPredictionGraph.ident" class="classattr">
                                <div class="attr variable">
            <span class="name">ident</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionGraph.ident"></a>
    
    

                            </div>
                            <div id="TacticPredictionGraph.arguments" class="classattr">
                                <div class="attr variable">
            <span class="name">arguments</span><span class="annotation">: list[<a href="#Node">Node</a>]</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionGraph.arguments"></a>
    
    

                            </div>
                            <div id="TacticPredictionGraph.confidence" class="classattr">
                                <div class="attr variable">
            <span class="name">confidence</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionGraph.confidence"></a>
    
    

                            </div>
                </section>
                <section id="TacticPredictionsGraph">
                            <input id="TacticPredictionsGraph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticPredictionsGraph</span>:

                <label class="view-source-button" for="TacticPredictionsGraph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticPredictionsGraph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticPredictionsGraph-783"><a href="#TacticPredictionsGraph-783"><span class="linenos">783</span></a><span class="nd">@dataclass</span>
</span><span id="TacticPredictionsGraph-784"><a href="#TacticPredictionsGraph-784"><span class="linenos">784</span></a><span class="k">class</span> <span class="nc">TacticPredictionsGraph</span><span class="p">:</span>
</span><span id="TacticPredictionsGraph-785"><a href="#TacticPredictionsGraph-785"><span class="linenos">785</span></a>    <span class="n">predictions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TacticPredictionsGraph</span><span class="p">]</span>
</span></pre></div>


    

                            <div id="TacticPredictionsGraph.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticPredictionsGraph</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">predictions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#TacticPredictionsGraph">TacticPredictionsGraph</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionsGraph.__init__"></a>
    
    

                            </div>
                            <div id="TacticPredictionsGraph.predictions" class="classattr">
                                <div class="attr variable">
            <span class="name">predictions</span><span class="annotation">: list[<a href="#TacticPredictionsGraph">TacticPredictionsGraph</a>]</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionsGraph.predictions"></a>
    
    

                            </div>
                </section>
                <section id="TacticPredictionText">
                            <input id="TacticPredictionText-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticPredictionText</span>:

                <label class="view-source-button" for="TacticPredictionText-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticPredictionText"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticPredictionText-787"><a href="#TacticPredictionText-787"><span class="linenos">787</span></a><span class="nd">@dataclass</span>
</span><span id="TacticPredictionText-788"><a href="#TacticPredictionText-788"><span class="linenos">788</span></a><span class="k">class</span> <span class="nc">TacticPredictionText</span><span class="p">:</span>
</span><span id="TacticPredictionText-789"><a href="#TacticPredictionText-789"><span class="linenos">789</span></a>    <span class="n">tactic_text</span> <span class="p">:</span> <span class="nb">str</span>
</span><span id="TacticPredictionText-790"><a href="#TacticPredictionText-790"><span class="linenos">790</span></a>    <span class="n">confidence</span> <span class="p">:</span> <span class="nb">float</span>
</span></pre></div>


    

                            <div id="TacticPredictionText.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticPredictionText</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">tactic_text</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">confidence</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionText.__init__"></a>
    
    

                            </div>
                            <div id="TacticPredictionText.tactic_text" class="classattr">
                                <div class="attr variable">
            <span class="name">tactic_text</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionText.tactic_text"></a>
    
    

                            </div>
                            <div id="TacticPredictionText.confidence" class="classattr">
                                <div class="attr variable">
            <span class="name">confidence</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionText.confidence"></a>
    
    

                            </div>
                </section>
                <section id="TacticPredictionsText">
                            <input id="TacticPredictionsText-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">TacticPredictionsText</span>:

                <label class="view-source-button" for="TacticPredictionsText-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TacticPredictionsText"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TacticPredictionsText-792"><a href="#TacticPredictionsText-792"><span class="linenos">792</span></a><span class="nd">@dataclass</span>
</span><span id="TacticPredictionsText-793"><a href="#TacticPredictionsText-793"><span class="linenos">793</span></a><span class="k">class</span> <span class="nc">TacticPredictionsText</span><span class="p">:</span>
</span><span id="TacticPredictionsText-794"><a href="#TacticPredictionsText-794"><span class="linenos">794</span></a>    <span class="n">predictions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TacticPredictionsText</span><span class="p">]</span>
</span></pre></div>


    

                            <div id="TacticPredictionsText.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">TacticPredictionsText</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">predictions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#TacticPredictionsText">TacticPredictionsText</a></span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionsText.__init__"></a>
    
    

                            </div>
                            <div id="TacticPredictionsText.predictions" class="classattr">
                                <div class="attr variable">
            <span class="name">predictions</span><span class="annotation">: list[<a href="#TacticPredictionsText">TacticPredictionsText</a>]</span>

        
    </div>
    <a class="headerlink" href="#TacticPredictionsText.predictions"></a>
    
    

                            </div>
                </section>
                <section id="CheckAlignmentMessage">
                            <input id="CheckAlignmentMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">CheckAlignmentMessage</span>:

                <label class="view-source-button" for="CheckAlignmentMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CheckAlignmentMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CheckAlignmentMessage-796"><a href="#CheckAlignmentMessage-796"><span class="linenos">796</span></a><span class="nd">@dataclass</span>
</span><span id="CheckAlignmentMessage-797"><a href="#CheckAlignmentMessage-797"><span class="linenos">797</span></a><span class="k">class</span> <span class="nc">CheckAlignmentMessage</span><span class="p">:</span>
</span><span id="CheckAlignmentMessage-798"><a href="#CheckAlignmentMessage-798"><span class="linenos">798</span></a>    <span class="k">pass</span>
</span></pre></div>


    

                </section>
                <section id="CheckAlignmentResponse">
                            <input id="CheckAlignmentResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">CheckAlignmentResponse</span>:

                <label class="view-source-button" for="CheckAlignmentResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CheckAlignmentResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CheckAlignmentResponse-800"><a href="#CheckAlignmentResponse-800"><span class="linenos">800</span></a><span class="nd">@dataclass</span>
</span><span id="CheckAlignmentResponse-801"><a href="#CheckAlignmentResponse-801"><span class="linenos">801</span></a><span class="k">class</span> <span class="nc">CheckAlignmentResponse</span><span class="p">:</span>
</span><span id="CheckAlignmentResponse-802"><a href="#CheckAlignmentResponse-802"><span class="linenos">802</span></a>    <span class="n">unknown_definitions</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Definition</span><span class="p">]</span>
</span><span id="CheckAlignmentResponse-803"><a href="#CheckAlignmentResponse-803"><span class="linenos">803</span></a>    <span class="n">unknown_tactics</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
</span></pre></div>


    

                            <div id="CheckAlignmentResponse.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">CheckAlignmentResponse</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">unknown_definitions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">unknown_tactics</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#CheckAlignmentResponse.__init__"></a>
    
    

                            </div>
                            <div id="CheckAlignmentResponse.unknown_definitions" class="classattr">
                                <div class="attr variable">
            <span class="name">unknown_definitions</span><span class="annotation">: list[<a href="#Definition">Definition</a>]</span>

        
    </div>
    <a class="headerlink" href="#CheckAlignmentResponse.unknown_definitions"></a>
    
    

                            </div>
                            <div id="CheckAlignmentResponse.unknown_tactics" class="classattr">
                                <div class="attr variable">
            <span class="name">unknown_tactics</span><span class="annotation">: list[int]</span>

        
    </div>
    <a class="headerlink" href="#CheckAlignmentResponse.unknown_tactics"></a>
    
    

                            </div>
                </section>
                <section id="GlobalContextMessage">
                            <input id="GlobalContextMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">GlobalContextMessage</span>:

                <label class="view-source-button" for="GlobalContextMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextMessage-805"><a href="#GlobalContextMessage-805"><span class="linenos">805</span></a><span class="nd">@dataclass</span>
</span><span id="GlobalContextMessage-806"><a href="#GlobalContextMessage-806"><span class="linenos">806</span></a><span class="k">class</span> <span class="nc">GlobalContextMessage</span><span class="p">:</span>
</span><span id="GlobalContextMessage-807"><a href="#GlobalContextMessage-807"><span class="linenos">807</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A message containing a new global context sent to Python from Coq,</span>
</span><span id="GlobalContextMessage-808"><a href="#GlobalContextMessage-808"><span class="linenos">808</span></a><span class="sd">    including all known definitions and available tactics.&quot;&quot;&quot;</span>
</span><span id="GlobalContextMessage-809"><a href="#GlobalContextMessage-809"><span class="linenos">809</span></a>
</span><span id="GlobalContextMessage-810"><a href="#GlobalContextMessage-810"><span class="linenos">810</span></a>    <span class="n">definitions</span> <span class="p">:</span> <span class="n">OnlineDefinitionsReader</span>
</span><span id="GlobalContextMessage-811"><a href="#GlobalContextMessage-811"><span class="linenos">811</span></a>    <span class="n">tactics</span> <span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">AbstractTactic_Reader</span><span class="p">]</span>
</span><span id="GlobalContextMessage-812"><a href="#GlobalContextMessage-812"><span class="linenos">812</span></a>
</span><span id="GlobalContextMessage-813"><a href="#GlobalContextMessage-813"><span class="linenos">813</span></a>    <span class="n">log_annotation</span> <span class="p">:</span> <span class="nb">str</span>
</span><span id="GlobalContextMessage-814"><a href="#GlobalContextMessage-814"><span class="linenos">814</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An annotation representing the current position of Coq in a source</span>
</span><span id="GlobalContextMessage-815"><a href="#GlobalContextMessage-815"><span class="linenos">815</span></a><span class="sd">    document. For logging and debugging purposes.&quot;&quot;&quot;</span>
</span><span id="GlobalContextMessage-816"><a href="#GlobalContextMessage-816"><span class="linenos">816</span></a>
</span><span id="GlobalContextMessage-817"><a href="#GlobalContextMessage-817"><span class="linenos">817</span></a>    <span class="n">prediction_requests</span> <span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextMessage</span> <span class="o">|</span> <span class="n">ProofState</span> <span class="o">|</span> <span class="n">CheckAlignmentMessage</span><span class="p">,</span>
</span><span id="GlobalContextMessage-818"><a href="#GlobalContextMessage-818"><span class="linenos">818</span></a>                                    <span class="kc">None</span> <span class="o">|</span> <span class="n">TacticPredictionsGraph</span> <span class="o">|</span> <span class="n">TacticPredictionsText</span> <span class="o">|</span> <span class="n">CheckAlignmentResponse</span><span class="p">,</span>
</span><span id="GlobalContextMessage-819"><a href="#GlobalContextMessage-819"><span class="linenos">819</span></a>                                    <span class="kc">None</span><span class="p">]</span>
</span><span id="GlobalContextMessage-820"><a href="#GlobalContextMessage-820"><span class="linenos">820</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A sub-generator that produces new requests from Coq that are based on or</span>
</span><span id="GlobalContextMessage-821"><a href="#GlobalContextMessage-821"><span class="linenos">821</span></a><span class="sd">    extend the global context of the current message. Once the sub-generator</span>
</span><span id="GlobalContextMessage-822"><a href="#GlobalContextMessage-822"><span class="linenos">822</span></a><span class="sd">    runs out, the parent generator continues.&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A message containing a new global context sent to Python from Coq,
including all known definitions and available tactics.</p>
</div>


                            <div id="GlobalContextMessage.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">GlobalContextMessage</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">definitions</span><span class="p">:</span> <span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span>,</span><span class="param">	<span class="n">tactics</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#AbstractTactic_Reader">pytact.graph_api_capnp_cython.AbstractTactic_Reader</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">log_annotation</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">prediction_requests</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#GlobalContextMessage">GlobalContextMessage</a></span> <span class="o">|</span> <span class="n"><a href="#ProofState">ProofState</a></span> <span class="o">|</span> <span class="n"><a href="#CheckAlignmentMessage">CheckAlignmentMessage</a></span><span class="p">,</span> <span class="kc">None</span> <span class="o">|</span> <span class="n"><a href="#TacticPredictionsGraph">TacticPredictionsGraph</a></span> <span class="o">|</span> <span class="n"><a href="#TacticPredictionsText">TacticPredictionsText</a></span> <span class="o">|</span> <span class="n"><a href="#CheckAlignmentResponse">CheckAlignmentResponse</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#GlobalContextMessage.__init__"></a>
    
    

                            </div>
                            <div id="GlobalContextMessage.definitions" class="classattr">
                                <div class="attr variable">
            <span class="name">definitions</span><span class="annotation">: <a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span>

        
    </div>
    <a class="headerlink" href="#GlobalContextMessage.definitions"></a>
    
    

                            </div>
                            <div id="GlobalContextMessage.tactics" class="classattr">
                                <div class="attr variable">
            <span class="name">tactics</span><span class="annotation">: collections.abc.Sequence[<a href="graph_api_capnp_cython.html#AbstractTactic_Reader">pytact.graph_api_capnp_cython.AbstractTactic_Reader</a>]</span>

        
    </div>
    <a class="headerlink" href="#GlobalContextMessage.tactics"></a>
    
    

                            </div>
                            <div id="GlobalContextMessage.log_annotation" class="classattr">
                                <div class="attr variable">
            <span class="name">log_annotation</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#GlobalContextMessage.log_annotation"></a>
    
            <div class="docstring"><p>An annotation representing the current position of Coq in a source
document. For logging and debugging purposes.</p>
</div>


                            </div>
                            <div id="GlobalContextMessage.prediction_requests" class="classattr">
                                <div class="attr variable">
            <span class="name">prediction_requests</span><span class="annotation">: collections.abc.Generator[<a href="#GlobalContextMessage">GlobalContextMessage</a> | <a href="#ProofState">ProofState</a> | <a href="#CheckAlignmentMessage">CheckAlignmentMessage</a>, None | <a href="#TacticPredictionsGraph">TacticPredictionsGraph</a> | <a href="#TacticPredictionsText">TacticPredictionsText</a> | <a href="#CheckAlignmentResponse">CheckAlignmentResponse</a>, None]</span>

        
    </div>
    <a class="headerlink" href="#GlobalContextMessage.prediction_requests"></a>
    
            <div class="docstring"><p>A sub-generator that produces new requests from Coq that are based on or
extend the global context of the current message. Once the sub-generator
runs out, the parent generator continues.</p>
</div>


                            </div>
                </section>
                <section id="capnp_message_generator_lowlevel">
                            <input id="capnp_message_generator_lowlevel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">capnp_message_generator_lowlevel</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></span><span class="p">,</span> <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="capnp_message_generator_lowlevel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#capnp_message_generator_lowlevel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="capnp_message_generator_lowlevel-824"><a href="#capnp_message_generator_lowlevel-824"><span class="linenos">824</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_lowlevel</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="capnp_message_generator_lowlevel-825"><a href="#capnp_message_generator_lowlevel-825"><span class="linenos">825</span></a>        <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="capnp_message_generator_lowlevel-826"><a href="#capnp_message_generator_lowlevel-826"><span class="linenos">826</span></a>                  <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="capnp_message_generator_lowlevel-827"><a href="#capnp_message_generator_lowlevel-827"><span class="linenos">827</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A generator that facilitates communication between a prediction server and a Coq process.</span>
</span><span id="capnp_message_generator_lowlevel-828"><a href="#capnp_message_generator_lowlevel-828"><span class="linenos">828</span></a>
</span><span id="capnp_message_generator_lowlevel-829"><a href="#capnp_message_generator_lowlevel-829"><span class="linenos">829</span></a><span class="sd">    Given a `socket`, this function creates a generator that yields messages of type</span>
</span><span id="capnp_message_generator_lowlevel-830"><a href="#capnp_message_generator_lowlevel-830"><span class="linenos">830</span></a><span class="sd">    `pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader` after which a</span>
</span><span id="capnp_message_generator_lowlevel-831"><a href="#capnp_message_generator_lowlevel-831"><span class="linenos">831</span></a><span class="sd">    `capnp.lib.capnp._DynamicStructBuilder` message needs to be `send` back.</span>
</span><span id="capnp_message_generator_lowlevel-832"><a href="#capnp_message_generator_lowlevel-832"><span class="linenos">832</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="capnp_message_generator_lowlevel-833"><a href="#capnp_message_generator_lowlevel-833"><span class="linenos">833</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A generator that facilitates communication between a prediction server and a Coq process.</p>

<p>Given a <code>socket</code>, this function creates a generator that yields messages of type
<code><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></code> after which a
<code>capnp.lib.capnp._DynamicStructBuilder</code> message needs to be <code>send</code> back.</p>
</div>


                </section>
                <section id="capnp_message_generator_from_file_lowlevel">
                            <input id="capnp_message_generator_from_file_lowlevel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">capnp_message_generator_from_file_lowlevel</span><span class="signature pdoc-code multiline">(<span class="param">	message_file: &lt;class &#x27;BinaryIO&#x27;&gt;,</span><span class="param">	<span class="n">check</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></span><span class="p">,</span> <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="capnp_message_generator_from_file_lowlevel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#capnp_message_generator_from_file_lowlevel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="capnp_message_generator_from_file_lowlevel-835"><a href="#capnp_message_generator_from_file_lowlevel-835"><span class="linenos">835</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_from_file_lowlevel</span><span class="p">(</span>
</span><span id="capnp_message_generator_from_file_lowlevel-836"><a href="#capnp_message_generator_from_file_lowlevel-836"><span class="linenos">836</span></a>        <span class="n">message_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="capnp_message_generator_from_file_lowlevel-837"><a href="#capnp_message_generator_from_file_lowlevel-837"><span class="linenos">837</span></a>        <span class="n">check</span> <span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="capnp_message_generator_from_file_lowlevel-838"><a href="#capnp_message_generator_from_file_lowlevel-838"><span class="linenos">838</span></a>        <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="capnp_message_generator_from_file_lowlevel-839"><a href="#capnp_message_generator_from_file_lowlevel-839"><span class="linenos">839</span></a>                  <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="capnp_message_generator_from_file_lowlevel-840"><a href="#capnp_message_generator_from_file_lowlevel-840"><span class="linenos">840</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</span>
</span><span id="capnp_message_generator_from_file_lowlevel-841"><a href="#capnp_message_generator_from_file_lowlevel-841"><span class="linenos">841</span></a>
</span><span id="capnp_message_generator_from_file_lowlevel-842"><a href="#capnp_message_generator_from_file_lowlevel-842"><span class="linenos">842</span></a><span class="sd">    Lowlevel variant of `capnp_message_generator_from_file`.</span>
</span><span id="capnp_message_generator_from_file_lowlevel-843"><a href="#capnp_message_generator_from_file_lowlevel-843"><span class="linenos">843</span></a>
</span><span id="capnp_message_generator_from_file_lowlevel-844"><a href="#capnp_message_generator_from_file_lowlevel-844"><span class="linenos">844</span></a><span class="sd">    Accepts a `message_file` containing a stream of Capt&#39;n Proto messages as recorded using</span>
</span><span id="capnp_message_generator_from_file_lowlevel-845"><a href="#capnp_message_generator_from_file_lowlevel-845"><span class="linenos">845</span></a><span class="sd">    `capnp_message_generator(s, record=message_file)`. The resulting generator acts just like the generator</span>
</span><span id="capnp_message_generator_from_file_lowlevel-846"><a href="#capnp_message_generator_from_file_lowlevel-846"><span class="linenos">846</span></a><span class="sd">    created by `capnp_message_generator` except that it is not connected to the socket but just replays the</span>
</span><span id="capnp_message_generator_from_file_lowlevel-847"><a href="#capnp_message_generator_from_file_lowlevel-847"><span class="linenos">847</span></a><span class="sd">    pre-recorded messages.</span>
</span><span id="capnp_message_generator_from_file_lowlevel-848"><a href="#capnp_message_generator_from_file_lowlevel-848"><span class="linenos">848</span></a>
</span><span id="capnp_message_generator_from_file_lowlevel-849"><a href="#capnp_message_generator_from_file_lowlevel-849"><span class="linenos">849</span></a><span class="sd">    Arguments:</span>
</span><span id="capnp_message_generator_from_file_lowlevel-850"><a href="#capnp_message_generator_from_file_lowlevel-850"><span class="linenos">850</span></a><span class="sd">    - `check` is an optional callable that can be used to compare the response of the server to the recorded</span>
</span><span id="capnp_message_generator_from_file_lowlevel-851"><a href="#capnp_message_generator_from_file_lowlevel-851"><span class="linenos">851</span></a><span class="sd">      response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server</span>
</span><span id="capnp_message_generator_from_file_lowlevel-852"><a href="#capnp_message_generator_from_file_lowlevel-852"><span class="linenos">852</span></a><span class="sd">      and the recorded response.</span>
</span><span id="capnp_message_generator_from_file_lowlevel-853"><a href="#capnp_message_generator_from_file_lowlevel-853"><span class="linenos">853</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="capnp_message_generator_from_file_lowlevel-854"><a href="#capnp_message_generator_from_file_lowlevel-854"><span class="linenos">854</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</p>

<p>Lowlevel variant of <code><a href="#capnp_message_generator_from_file">capnp_message_generator_from_file</a></code>.</p>

<p>Accepts a <code>message_file</code> containing a stream of Capt'n Proto messages as recorded using
<code>capnp_message_generator(s, record=message_file)</code>. The resulting generator acts just like the generator
created by <code><a href="#capnp_message_generator">capnp_message_generator</a></code> except that it is not connected to the socket but just replays the
pre-recorded messages.</p>

<p>Arguments:</p>

<ul>
<li><code>check</code> is an optional callable that can be used to compare the response of the server to the recorded
response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server
and the recorded response.</li>
</ul>
</div>


                </section>
                <section id="record_lowlevel_generator">
                            <input id="record_lowlevel_generator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">record_lowlevel_generator</span><span class="signature pdoc-code multiline">(<span class="param">	record_file: &lt;class &#x27;BinaryIO&#x27;&gt;,</span><span class="param">	<span class="n">gen</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></span><span class="p">,</span> <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></span><span class="p">,</span> <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="record_lowlevel_generator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#record_lowlevel_generator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="record_lowlevel_generator-856"><a href="#record_lowlevel_generator-856"><span class="linenos">856</span></a><span class="k">def</span> <span class="nf">record_lowlevel_generator</span><span class="p">(</span>
</span><span id="record_lowlevel_generator-857"><a href="#record_lowlevel_generator-857"><span class="linenos">857</span></a>        <span class="n">record_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="record_lowlevel_generator-858"><a href="#record_lowlevel_generator-858"><span class="linenos">858</span></a>        <span class="n">gen</span><span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="record_lowlevel_generator-859"><a href="#record_lowlevel_generator-859"><span class="linenos">859</span></a>                       <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="record_lowlevel_generator-860"><a href="#record_lowlevel_generator-860"><span class="linenos">860</span></a>                           <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="record_lowlevel_generator-861"><a href="#record_lowlevel_generator-861"><span class="linenos">861</span></a>                                     <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
</span><span id="record_lowlevel_generator-862"><a href="#record_lowlevel_generator-862"><span class="linenos">862</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Record a trace of the full interaction of a lowlevel generator to a file</span>
</span><span id="record_lowlevel_generator-863"><a href="#record_lowlevel_generator-863"><span class="linenos">863</span></a>
</span><span id="record_lowlevel_generator-864"><a href="#record_lowlevel_generator-864"><span class="linenos">864</span></a><span class="sd">    Wrap a lowlevel generator (such as from `capnp_message_generator_lowlevel`) and dump all exchanged messages</span>
</span><span id="record_lowlevel_generator-865"><a href="#record_lowlevel_generator-865"><span class="linenos">865</span></a><span class="sd">    to the given file. The file can later be replayed with `capnp_message_generator_from_file_lowlevel`.</span>
</span><span id="record_lowlevel_generator-866"><a href="#record_lowlevel_generator-866"><span class="linenos">866</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="record_lowlevel_generator-867"><a href="#record_lowlevel_generator-867"><span class="linenos">867</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Record a trace of the full interaction of a lowlevel generator to a file</p>

<p>Wrap a lowlevel generator (such as from <code><a href="#capnp_message_generator_lowlevel">capnp_message_generator_lowlevel</a></code>) and dump all exchanged messages
to the given file. The file can later be replayed with <code><a href="#capnp_message_generator_from_file_lowlevel">capnp_message_generator_from_file_lowlevel</a></code>.</p>
</div>


                </section>
                <section id="prediction_generator">
                            <input id="prediction_generator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">prediction_generator</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">lgenerator</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="graph_api_capnp_cython.html#PredictionProtocol_Request_Reader">pytact.graph_api_capnp_cython.PredictionProtocol_Request_Reader</a></span><span class="p">,</span> <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>,</span><span class="param">	<span class="n">defs</span><span class="p">:</span> <span class="n"><a href="#OnlineDefinitionsReader">OnlineDefinitionsReader</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="prediction_generator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#prediction_generator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="prediction_generator-869"><a href="#prediction_generator-869"><span class="linenos">869</span></a><span class="k">def</span> <span class="nf">prediction_generator</span><span class="p">(</span>
</span><span id="prediction_generator-870"><a href="#prediction_generator-870"><span class="linenos">870</span></a>        <span class="n">lgenerator</span><span class="p">:</span> <span class="n">Generator</span><span class="p">[</span><span class="n">apic</span><span class="o">.</span><span class="n">PredictionProtocol_Request_Reader</span><span class="p">,</span>
</span><span id="prediction_generator-871"><a href="#prediction_generator-871"><span class="linenos">871</span></a>                              <span class="n">capnp</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">capnp</span><span class="o">.</span><span class="n">_DynamicStructBuilder</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
</span><span id="prediction_generator-872"><a href="#prediction_generator-872"><span class="linenos">872</span></a>        <span class="n">defs</span><span class="p">:</span> <span class="n">OnlineDefinitionsReader</span><span class="p">):</span>
</span><span id="prediction_generator-873"><a href="#prediction_generator-873"><span class="linenos">873</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given the current global context stack `defs`, convert a low-level</span>
</span><span id="prediction_generator-874"><a href="#prediction_generator-874"><span class="linenos">874</span></a><span class="sd">    generator to a high-level `GlobalContextMessage`&quot;&quot;&quot;</span>
</span><span id="prediction_generator-875"><a href="#prediction_generator-875"><span class="linenos">875</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Given the current global context stack <code>defs</code>, convert a low-level
generator to a high-level <code><a href="#GlobalContextMessage">GlobalContextMessage</a></code></p>
</div>


                </section>
                <section id="capnp_message_generator">
                            <input id="capnp_message_generator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">capnp_message_generator</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span>,</span><span class="param">	<span class="n">record</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#GlobalContextMessage">GlobalContextMessage</a></span>:</span></span>

                <label class="view-source-button" for="capnp_message_generator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#capnp_message_generator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="capnp_message_generator-877"><a href="#capnp_message_generator-877"><span class="linenos">877</span></a><span class="k">def</span> <span class="nf">capnp_message_generator</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GlobalContextMessage</span><span class="p">:</span>
</span><span id="capnp_message_generator-878"><a href="#capnp_message_generator-878"><span class="linenos">878</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A generator that facilitates communication between a prediction server and a Coq process.</span>
</span><span id="capnp_message_generator-879"><a href="#capnp_message_generator-879"><span class="linenos">879</span></a>
</span><span id="capnp_message_generator-880"><a href="#capnp_message_generator-880"><span class="linenos">880</span></a><span class="sd">    Given a `socket`, this function creates a `GlobalContextMessage` `context`. This message contains an</span>
</span><span id="capnp_message_generator-881"><a href="#capnp_message_generator-881"><span class="linenos">881</span></a><span class="sd">    initially empty list of available tactics and definitions in the global context. Through</span>
</span><span id="capnp_message_generator-882"><a href="#capnp_message_generator-882"><span class="linenos">882</span></a><span class="sd">    `context.prediction_requests` one can access a generator that yields prediction requests and expects</span>
</span><span id="capnp_message_generator-883"><a href="#capnp_message_generator-883"><span class="linenos">883</span></a><span class="sd">    predictions to be sent in response. The possible messages are as follows:</span>
</span><span id="capnp_message_generator-884"><a href="#capnp_message_generator-884"><span class="linenos">884</span></a><span class="sd">    - `GlobalContextMessage`: An additional, nested, global context message that amends the current context</span>
</span><span id="capnp_message_generator-885"><a href="#capnp_message_generator-885"><span class="linenos">885</span></a><span class="sd">       with additional tactics and definitions. The prediction requests of this nested context need to be</span>
</span><span id="capnp_message_generator-886"><a href="#capnp_message_generator-886"><span class="linenos">886</span></a><span class="sd">       exhausted before continuing with messages from the current context.</span>
</span><span id="capnp_message_generator-887"><a href="#capnp_message_generator-887"><span class="linenos">887</span></a><span class="sd">    - `CheckAlignmentMessage`: A request to check which of Coq&#39;s current tactics and definitions the</span>
</span><span id="capnp_message_generator-888"><a href="#capnp_message_generator-888"><span class="linenos">888</span></a><span class="sd">      prediction server currently &quot;knows about&quot;. The generator expects a `CheckAlignmentResponse` to be</span>
</span><span id="capnp_message_generator-889"><a href="#capnp_message_generator-889"><span class="linenos">889</span></a><span class="sd">      sent in response.</span>
</span><span id="capnp_message_generator-890"><a href="#capnp_message_generator-890"><span class="linenos">890</span></a><span class="sd">    - `ProofState`: A request to make tactic predictions for a given proof state. Either a</span>
</span><span id="capnp_message_generator-891"><a href="#capnp_message_generator-891"><span class="linenos">891</span></a><span class="sd">      `TacticPredictionsGraph` or a `TacticPredictionsText` message is expected in return.</span>
</span><span id="capnp_message_generator-892"><a href="#capnp_message_generator-892"><span class="linenos">892</span></a>
</span><span id="capnp_message_generator-893"><a href="#capnp_message_generator-893"><span class="linenos">893</span></a><span class="sd">    When `record` is passed a file descriptor, all received and sent messages will be dumped into that file</span>
</span><span id="capnp_message_generator-894"><a href="#capnp_message_generator-894"><span class="linenos">894</span></a><span class="sd">    descriptor. These messages can then be replayed later using `capnp_message_generator_from_file`.</span>
</span><span id="capnp_message_generator-895"><a href="#capnp_message_generator-895"><span class="linenos">895</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="capnp_message_generator-896"><a href="#capnp_message_generator-896"><span class="linenos">896</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>A generator that facilitates communication between a prediction server and a Coq process.</p>

<p>Given a <code>socket</code>, this function creates a <code><a href="#GlobalContextMessage">GlobalContextMessage</a></code> <code>context</code>. This message contains an
initially empty list of available tactics and definitions in the global context. Through
<code>context.prediction_requests</code> one can access a generator that yields prediction requests and expects
predictions to be sent in response. The possible messages are as follows:</p>

<ul>
<li><code><a href="#GlobalContextMessage">GlobalContextMessage</a></code>: An additional, nested, global context message that amends the current context
with additional tactics and definitions. The prediction requests of this nested context need to be
exhausted before continuing with messages from the current context.</li>
<li><code><a href="#CheckAlignmentMessage">CheckAlignmentMessage</a></code>: A request to check which of Coq's current tactics and definitions the
prediction server currently "knows about". The generator expects a <code><a href="#CheckAlignmentResponse">CheckAlignmentResponse</a></code> to be
sent in response.</li>
<li><code><a href="#ProofState">ProofState</a></code>: A request to make tactic predictions for a given proof state. Either a
<code><a href="#TacticPredictionsGraph">TacticPredictionsGraph</a></code> or a <code><a href="#TacticPredictionsText">TacticPredictionsText</a></code> message is expected in return.</li>
</ul>

<p>When <code>record</code> is passed a file descriptor, all received and sent messages will be dumped into that file
descriptor. These messages can then be replayed later using <code><a href="#capnp_message_generator_from_file">capnp_message_generator_from_file</a></code>.</p>
</div>


                </section>
                <section id="capnp_message_generator_from_file">
                            <input id="capnp_message_generator_from_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">capnp_message_generator_from_file</span><span class="signature pdoc-code multiline">(<span class="param">	message_file: &lt;class &#x27;BinaryIO&#x27;&gt;,</span><span class="param">	<span class="n">check</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">record</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#GlobalContextMessage">GlobalContextMessage</a></span>:</span></span>

                <label class="view-source-button" for="capnp_message_generator_from_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#capnp_message_generator_from_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="capnp_message_generator_from_file-898"><a href="#capnp_message_generator_from_file-898"><span class="linenos">898</span></a><span class="k">def</span> <span class="nf">capnp_message_generator_from_file</span><span class="p">(</span><span class="n">message_file</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">,</span>
</span><span id="capnp_message_generator_from_file-899"><a href="#capnp_message_generator_from_file-899"><span class="linenos">899</span></a>                                      <span class="n">check</span> <span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="capnp_message_generator_from_file-900"><a href="#capnp_message_generator_from_file-900"><span class="linenos">900</span></a>                                      <span class="n">record</span><span class="p">:</span> <span class="n">BinaryIO</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GlobalContextMessage</span><span class="p">:</span>
</span><span id="capnp_message_generator_from_file-901"><a href="#capnp_message_generator_from_file-901"><span class="linenos">901</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</span>
</span><span id="capnp_message_generator_from_file-902"><a href="#capnp_message_generator_from_file-902"><span class="linenos">902</span></a>
</span><span id="capnp_message_generator_from_file-903"><a href="#capnp_message_generator_from_file-903"><span class="linenos">903</span></a><span class="sd">    Highlevel variant of `capnp_message_generator_from_file_lowlevel`.</span>
</span><span id="capnp_message_generator_from_file-904"><a href="#capnp_message_generator_from_file-904"><span class="linenos">904</span></a>
</span><span id="capnp_message_generator_from_file-905"><a href="#capnp_message_generator_from_file-905"><span class="linenos">905</span></a><span class="sd">    Accepts a `message_file` containing a stream of Capt&#39;n Proto messages as recorded using</span>
</span><span id="capnp_message_generator_from_file-906"><a href="#capnp_message_generator_from_file-906"><span class="linenos">906</span></a><span class="sd">    `capnp_message_generator(s, record=message_file)`. The resulting generator acts just like the generator</span>
</span><span id="capnp_message_generator_from_file-907"><a href="#capnp_message_generator_from_file-907"><span class="linenos">907</span></a><span class="sd">    created by `capnp_message_generator` except that it is not connected to the socket but just replays the</span>
</span><span id="capnp_message_generator_from_file-908"><a href="#capnp_message_generator_from_file-908"><span class="linenos">908</span></a><span class="sd">    pre-recorded messages.</span>
</span><span id="capnp_message_generator_from_file-909"><a href="#capnp_message_generator_from_file-909"><span class="linenos">909</span></a>
</span><span id="capnp_message_generator_from_file-910"><a href="#capnp_message_generator_from_file-910"><span class="linenos">910</span></a><span class="sd">    Arguments:</span>
</span><span id="capnp_message_generator_from_file-911"><a href="#capnp_message_generator_from_file-911"><span class="linenos">911</span></a><span class="sd">    - `check` is an optional callable that can be used to compare the response of the server to the recorded</span>
</span><span id="capnp_message_generator_from_file-912"><a href="#capnp_message_generator_from_file-912"><span class="linenos">912</span></a><span class="sd">      response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server</span>
</span><span id="capnp_message_generator_from_file-913"><a href="#capnp_message_generator_from_file-913"><span class="linenos">913</span></a><span class="sd">      and the recorded response.</span>
</span><span id="capnp_message_generator_from_file-914"><a href="#capnp_message_generator_from_file-914"><span class="linenos">914</span></a><span class="sd">    - `record` is an optional file that re-records the interaction with the current server</span>
</span><span id="capnp_message_generator_from_file-915"><a href="#capnp_message_generator_from_file-915"><span class="linenos">915</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="capnp_message_generator_from_file-916"><a href="#capnp_message_generator_from_file-916"><span class="linenos">916</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Replay and verify a pre-recorded communication sequence between Coq and a prediction server.</p>

<p>Highlevel variant of <code><a href="#capnp_message_generator_from_file_lowlevel">capnp_message_generator_from_file_lowlevel</a></code>.</p>

<p>Accepts a <code>message_file</code> containing a stream of Capt'n Proto messages as recorded using
<code>capnp_message_generator(s, record=message_file)</code>. The resulting generator acts just like the generator
created by <code><a href="#capnp_message_generator">capnp_message_generator</a></code> except that it is not connected to the socket but just replays the
pre-recorded messages.</p>

<p>Arguments:</p>

<ul>
<li><code>check</code> is an optional callable that can be used to compare the response of the server to the recorded
response. It accepts three arguments: The recorded message that was sent by Coq, the response of the server
and the recorded response.</li>
<li><code>record</code> is an optional file that re-records the interaction with the current server</li>
</ul>
</div>


                </section>
                <section id="GlobalContextSets">
                            <input id="GlobalContextSets-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GlobalContextSets</span>:

                <label class="view-source-button" for="GlobalContextSets-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextSets"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextSets-918"><a href="#GlobalContextSets-918"><span class="linenos">918</span></a><span class="k">class</span> <span class="nc">GlobalContextSets</span><span class="p">:</span>
</span><span id="GlobalContextSets-919"><a href="#GlobalContextSets-919"><span class="linenos">919</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Lazily retrieve a the global context of a definition as a set, with memoization.</span>
</span><span id="GlobalContextSets-920"><a href="#GlobalContextSets-920"><span class="linenos">920</span></a>
</span><span id="GlobalContextSets-921"><a href="#GlobalContextSets-921"><span class="linenos">921</span></a><span class="sd">    Because this class can allocate (large) amounts of memory, use it as a context-manager. To create a new</span>
</span><span id="GlobalContextSets-922"><a href="#GlobalContextSets-922"><span class="linenos">922</span></a><span class="sd">    instance, and retrieve the context of a definition, use:</span>
</span><span id="GlobalContextSets-923"><a href="#GlobalContextSets-923"><span class="linenos">923</span></a><span class="sd">    ```</span>
</span><span id="GlobalContextSets-924"><a href="#GlobalContextSets-924"><span class="linenos">924</span></a><span class="sd">    with GlobalContextSets.new_context() as gcs:</span>
</span><span id="GlobalContextSets-925"><a href="#GlobalContextSets-925"><span class="linenos">925</span></a><span class="sd">        gcs.global_context_set(my_definition)</span>
</span><span id="GlobalContextSets-926"><a href="#GlobalContextSets-926"><span class="linenos">926</span></a><span class="sd">    ```</span>
</span><span id="GlobalContextSets-927"><a href="#GlobalContextSets-927"><span class="linenos">927</span></a><span class="sd">    This context will be cached, as well as intermediate results (global contexts of other definitions) as</span>
</span><span id="GlobalContextSets-928"><a href="#GlobalContextSets-928"><span class="linenos">928</span></a><span class="sd">    long as the context-set is in scope. Caching can be nested by using `sub_context`:</span>
</span><span id="GlobalContextSets-929"><a href="#GlobalContextSets-929"><span class="linenos">929</span></a><span class="sd">    ```</span>
</span><span id="GlobalContextSets-930"><a href="#GlobalContextSets-930"><span class="linenos">930</span></a><span class="sd">    with GlobalContextSets.new_context() as gcs:</span>
</span><span id="GlobalContextSets-931"><a href="#GlobalContextSets-931"><span class="linenos">931</span></a><span class="sd">        gcs.global_context_set(my_definition)</span>
</span><span id="GlobalContextSets-932"><a href="#GlobalContextSets-932"><span class="linenos">932</span></a><span class="sd">        with gcs.sub_context(lambda d:is_file_representative) as gcs_sub:</span>
</span><span id="GlobalContextSets-933"><a href="#GlobalContextSets-933"><span class="linenos">933</span></a><span class="sd">            # gcs_sub remembers anything in the case of gcs</span>
</span><span id="GlobalContextSets-934"><a href="#GlobalContextSets-934"><span class="linenos">934</span></a><span class="sd">            # caching is propagated to the parent cache only if the provided lambda evaluates to true</span>
</span><span id="GlobalContextSets-935"><a href="#GlobalContextSets-935"><span class="linenos">935</span></a><span class="sd">            gcs_sub.global_context_set(my_definition2)</span>
</span><span id="GlobalContextSets-936"><a href="#GlobalContextSets-936"><span class="linenos">936</span></a><span class="sd">    ```</span>
</span><span id="GlobalContextSets-937"><a href="#GlobalContextSets-937"><span class="linenos">937</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GlobalContextSets-938"><a href="#GlobalContextSets-938"><span class="linenos">938</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">GlobalContextSets</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GlobalContextSets-939"><a href="#GlobalContextSets-939"><span class="linenos">939</span></a>                 <span class="n">should_propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]):</span>
</span><span id="GlobalContextSets-940"><a href="#GlobalContextSets-940"><span class="linenos">940</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not call directly. Use `GlobalContextSets.new_context` and `GlobalContextSets.sub_context`.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets-941"><a href="#GlobalContextSets-941"><span class="linenos">941</span></a>        <span class="o">...</span>
</span><span id="GlobalContextSets-942"><a href="#GlobalContextSets-942"><span class="linenos">942</span></a>
</span><span id="GlobalContextSets-943"><a href="#GlobalContextSets-943"><span class="linenos">943</span></a>    <span class="k">def</span> <span class="nf">global_context_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Definition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Map</span><span class="p">:</span>
</span><span id="GlobalContextSets-944"><a href="#GlobalContextSets-944"><span class="linenos">944</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the global context of a definition, caching the result, and intermediate results.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets-945"><a href="#GlobalContextSets-945"><span class="linenos">945</span></a>        <span class="o">...</span>
</span><span id="GlobalContextSets-946"><a href="#GlobalContextSets-946"><span class="linenos">946</span></a>
</span><span id="GlobalContextSets-947"><a href="#GlobalContextSets-947"><span class="linenos">947</span></a>    <span class="nd">@contextmanager</span>
</span><span id="GlobalContextSets-948"><a href="#GlobalContextSets-948"><span class="linenos">948</span></a>    <span class="k">def</span> <span class="nf">sub_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="GlobalContextSets-949"><a href="#GlobalContextSets-949"><span class="linenos">949</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a sub-context with a separate cache from it&#39;s parent, but sharing any info that was</span>
</span><span id="GlobalContextSets-950"><a href="#GlobalContextSets-950"><span class="linenos">950</span></a><span class="sd">        already present in the parent&#39;s cache.</span>
</span><span id="GlobalContextSets-951"><a href="#GlobalContextSets-951"><span class="linenos">951</span></a>
</span><span id="GlobalContextSets-952"><a href="#GlobalContextSets-952"><span class="linenos">952</span></a><span class="sd">        For any intermediate results for a definition `d` for which `propagate(d)` evaluates to true,</span>
</span><span id="GlobalContextSets-953"><a href="#GlobalContextSets-953"><span class="linenos">953</span></a><span class="sd">        the result is propagated to the parent&#39;s cache.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets-954"><a href="#GlobalContextSets-954"><span class="linenos">954</span></a>        <span class="o">...</span>
</span><span id="GlobalContextSets-955"><a href="#GlobalContextSets-955"><span class="linenos">955</span></a>
</span><span id="GlobalContextSets-956"><a href="#GlobalContextSets-956"><span class="linenos">956</span></a>    <span class="nd">@staticmethod</span>
</span><span id="GlobalContextSets-957"><a href="#GlobalContextSets-957"><span class="linenos">957</span></a>    <span class="k">def</span> <span class="nf">new_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="GlobalContextSets-958"><a href="#GlobalContextSets-958"><span class="linenos">958</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crate a new caching context where global-context-set&#39;s can be retrieved and cached.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets-959"><a href="#GlobalContextSets-959"><span class="linenos">959</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Lazily retrieve a the global context of a definition as a set, with memoization.</p>

<p>Because this class can allocate (large) amounts of memory, use it as a context-manager. To create a new
instance, and retrieve the context of a definition, use:</p>

<pre><code>with <a href="#GlobalContextSets.new_context">GlobalContextSets.new_context()</a> as gcs:
    gcs.global_context_set(my_definition)
</code></pre>

<p>This context will be cached, as well as intermediate results (global contexts of other definitions) as
long as the context-set is in scope. Caching can be nested by using <code><a href="#GlobalContextSets.sub_context">sub_context</a></code>:</p>

<pre><code>with <a href="#GlobalContextSets.new_context">GlobalContextSets.new_context()</a> as gcs:
    gcs.global_context_set(my_definition)
    with gcs.sub_context(lambda d:is_file_representative) as gcs_sub:
        # gcs_sub remembers anything in the case of gcs
        # caching is propagated to the parent cache only if the provided lambda evaluates to true
        gcs_sub.global_context_set(my_definition2)
</code></pre>
</div>


                            <div id="GlobalContextSets.__init__" class="classattr">
                                        <input id="GlobalContextSets.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GlobalContextSets</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">cache</span>,</span><span class="param">	<span class="n">parent</span><span class="p">:</span> <span class="n"><a href="#GlobalContextSets">GlobalContextSets</a></span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">should_propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="GlobalContextSets.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextSets.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextSets.__init__-938"><a href="#GlobalContextSets.__init__-938"><span class="linenos">938</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">GlobalContextSets</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="GlobalContextSets.__init__-939"><a href="#GlobalContextSets.__init__-939"><span class="linenos">939</span></a>                 <span class="n">should_propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">]):</span>
</span><span id="GlobalContextSets.__init__-940"><a href="#GlobalContextSets.__init__-940"><span class="linenos">940</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not call directly. Use `GlobalContextSets.new_context` and `GlobalContextSets.sub_context`.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets.__init__-941"><a href="#GlobalContextSets.__init__-941"><span class="linenos">941</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Do not call directly. Use <code><a href="#GlobalContextSets.new_context">GlobalContextSets.new_context</a></code> and <code><a href="#GlobalContextSets.sub_context">GlobalContextSets.sub_context</a></code>.</p>
</div>


                            </div>
                            <div id="GlobalContextSets.global_context_set" class="classattr">
                                        <input id="GlobalContextSets.global_context_set-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">global_context_set</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">d</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span><span class="return-annotation">) -> <span class="n">immutables</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">Map</span>:</span></span>

                <label class="view-source-button" for="GlobalContextSets.global_context_set-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextSets.global_context_set"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextSets.global_context_set-943"><a href="#GlobalContextSets.global_context_set-943"><span class="linenos">943</span></a>    <span class="k">def</span> <span class="nf">global_context_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Definition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Map</span><span class="p">:</span>
</span><span id="GlobalContextSets.global_context_set-944"><a href="#GlobalContextSets.global_context_set-944"><span class="linenos">944</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the global context of a definition, caching the result, and intermediate results.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets.global_context_set-945"><a href="#GlobalContextSets.global_context_set-945"><span class="linenos">945</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the global context of a definition, caching the result, and intermediate results.</p>
</div>


                            </div>
                            <div id="GlobalContextSets.sub_context" class="classattr">
                                        <input id="GlobalContextSets.sub_context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@contextmanager</div>

        <span class="def">def</span>
        <span class="name">sub_context</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">],</span> <span class="nb">bool</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#GlobalContextSets">GlobalContextSets</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GlobalContextSets.sub_context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextSets.sub_context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextSets.sub_context-947"><a href="#GlobalContextSets.sub_context-947"><span class="linenos">947</span></a>    <span class="nd">@contextmanager</span>
</span><span id="GlobalContextSets.sub_context-948"><a href="#GlobalContextSets.sub_context-948"><span class="linenos">948</span></a>    <span class="k">def</span> <span class="nf">sub_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">propagate</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Definition</span><span class="p">],</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="GlobalContextSets.sub_context-949"><a href="#GlobalContextSets.sub_context-949"><span class="linenos">949</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a sub-context with a separate cache from it&#39;s parent, but sharing any info that was</span>
</span><span id="GlobalContextSets.sub_context-950"><a href="#GlobalContextSets.sub_context-950"><span class="linenos">950</span></a><span class="sd">        already present in the parent&#39;s cache.</span>
</span><span id="GlobalContextSets.sub_context-951"><a href="#GlobalContextSets.sub_context-951"><span class="linenos">951</span></a>
</span><span id="GlobalContextSets.sub_context-952"><a href="#GlobalContextSets.sub_context-952"><span class="linenos">952</span></a><span class="sd">        For any intermediate results for a definition `d` for which `propagate(d)` evaluates to true,</span>
</span><span id="GlobalContextSets.sub_context-953"><a href="#GlobalContextSets.sub_context-953"><span class="linenos">953</span></a><span class="sd">        the result is propagated to the parent&#39;s cache.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets.sub_context-954"><a href="#GlobalContextSets.sub_context-954"><span class="linenos">954</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Create a sub-context with a separate cache from it's parent, but sharing any info that was
already present in the parent's cache.</p>

<p>For any intermediate results for a definition <code>d</code> for which <code>propagate(d)</code> evaluates to true,
the result is propagated to the parent's cache.</p>
</div>


                            </div>
                            <div id="GlobalContextSets.new_context" class="classattr">
                                        <input id="GlobalContextSets.new_context-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">new_context</span><span class="signature pdoc-code multiline">(<span class="return-annotation">) -> <span class="n">collections</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n"><a href="#GlobalContextSets">GlobalContextSets</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="GlobalContextSets.new_context-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GlobalContextSets.new_context"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GlobalContextSets.new_context-956"><a href="#GlobalContextSets.new_context-956"><span class="linenos">956</span></a>    <span class="nd">@staticmethod</span>
</span><span id="GlobalContextSets.new_context-957"><a href="#GlobalContextSets.new_context-957"><span class="linenos">957</span></a>    <span class="k">def</span> <span class="nf">new_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">GlobalContextSets</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
</span><span id="GlobalContextSets.new_context-958"><a href="#GlobalContextSets.new_context-958"><span class="linenos">958</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Crate a new caching context where global-context-set&#39;s can be retrieved and cached.&quot;&quot;&quot;</span>
</span><span id="GlobalContextSets.new_context-959"><a href="#GlobalContextSets.new_context-959"><span class="linenos">959</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Crate a new caching context where global-context-set's can be retrieved and cached.</p>
</div>


                            </div>
                </section>
                <section id="node_dependencies">
                            <input id="node_dependencies-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">node_dependencies</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">n</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>,</span><span class="param">	<span class="n">deps</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">set</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="node_dependencies-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#node_dependencies"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="node_dependencies-961"><a href="#node_dependencies-961"><span class="linenos">961</span></a><span class="k">def</span> <span class="nf">node_dependencies</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">deps</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="node_dependencies-962"><a href="#node_dependencies-962"><span class="linenos">962</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `Node` `n`, calculate the set of `Definition`&#39;s that are directly reachable</span>
</span><span id="node_dependencies-963"><a href="#node_dependencies-963"><span class="linenos">963</span></a><span class="sd">    from `n`. Transitively reachable definitions are not included.</span>
</span><span id="node_dependencies-964"><a href="#node_dependencies-964"><span class="linenos">964</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="node_dependencies-965"><a href="#node_dependencies-965"><span class="linenos">965</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Given a <code><a href="#Node">Node</a></code> <code>n</code>, calculate the set of <code><a href="#Definition">Definition</a></code>'s that are directly reachable
from <code>n</code>. Transitively reachable definitions are not included.</p>
</div>


                </section>
                <section id="definition_dependencies">
                            <input id="definition_dependencies-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">definition_dependencies</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">d</span><span class="p">:</span> <span class="n"><a href="#Definition">Definition</a></span></span><span class="return-annotation">) -> <span class="nb">set</span><span class="p">[</span><span class="n"><a href="#Definition">Definition</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="definition_dependencies-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#definition_dependencies"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="definition_dependencies-967"><a href="#definition_dependencies-967"><span class="linenos">967</span></a><span class="k">def</span> <span class="nf">definition_dependencies</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="n">Definition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">Definition</span><span class="p">]:</span>
</span><span id="definition_dependencies-968"><a href="#definition_dependencies-968"><span class="linenos">968</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a `Definition` `d`, calculate the set of `Definition`&#39;s that are directly reachable for `d`.</span>
</span><span id="definition_dependencies-969"><a href="#definition_dependencies-969"><span class="linenos">969</span></a><span class="sd">    Transitively reachable definitions are not included nor is `d` itself.</span>
</span><span id="definition_dependencies-970"><a href="#definition_dependencies-970"><span class="linenos">970</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="definition_dependencies-971"><a href="#definition_dependencies-971"><span class="linenos">971</span></a>    <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Given a <code><a href="#Definition">Definition</a></code> <code>d</code>, calculate the set of <code><a href="#Definition">Definition</a></code>'s that are directly reachable for <code>d</code>.
Transitively reachable definitions are not included nor is <code>d</code> itself.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>