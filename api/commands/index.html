<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Coq Commands</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="Tactician">
  
  <meta name="generator" content="Hugo 0.119.0">

  
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/bootstrap/bootstrap.min.css" media='screen'>
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/themify-icons/themify-icons.css" >
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/featherlight/featherlight.min.css" >
  
  

  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/scss/style.css" media="screen">

  
  <link rel="shortcut icon" href="https://coq-tactician.github.io/images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://coq-tactician.github.io/images/favicon.ico" type="image/x-icon">

  
  

  
  <meta property="og:title" content="Coq Commands" />
<meta property="og:description" content="The package coq-tactician-api makes some commands available in addition to the usual commands listed in the manual. You should install this package when you wish to build your own external agent. (Both Graph2Tac and Text2Tac depend on this package.)
Graph Visualizations These commands will create a graph of some object, and write it to graph.pdf (if graphviz is available).
The following commands are always available:
[Shared] Graph [Depth &lt;n&gt;] Ident identifier." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://coq-tactician.github.io/api/commands/" /><meta property="article:section" content="api" />



  
  

</head>
<body><!-- navigation -->
<header class="sticky-top navigation ">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent">
      <a class="navbar-brand" href="/">
        <img class="img-fluid" src="https://coq-tactician.github.io/images/logo.png" alt="Tactician">
        Tactician
      </a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h4 text-dark"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav mx-auto align-items-center">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/manual/quick">Manual</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/api/introduction">API</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/publications">Publications</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/people">People</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/demo.html">Demo</a>
          </li>
          
          
          <li class="nav-link">
            
            
          </li>
        </ul>

        
        <div class="d-lg-none d-block">
          
          <a href="https://github.com/coq-tactician"
            class="btn btn-sm btn-outline-primary ml-lg-4">Github</a>
          
          <a href="https://coq-tactician.github.io/changelog"
            class="btn btn-sm btn-primary ml-lg-4">changelog</a>
          
        </div>
        
      </div>

      

      
      <div class="d-lg-flex d-none">
        
        <a href="https://github.com/coq-tactician"
          class="btn btn-sm btn-outline-primary ml-lg-4">Github</a>
        
        <a href="https://coq-tactician.github.io/changelog"
          class="btn btn-sm btn-primary ml-lg-4">changelog</a>
        
      </div>
      
    </nav>
  </div>
</header>
<!-- /navigation -->


<!-- details page -->
<section class="pt-5">
  <div class="container shadow section-sm rounded">
    <div class="row">
      <div class="col-lg-3 col-md-4 d-none d-md-block">
        <ul class="sidenav">
          
          
          
          
          
          
          








<li data-nav-id="https://coq-tactician.github.io/manual/" title="Manual"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/">Manual</a>
  
  
  <ul>
    
    
    

    
    








<li data-nav-id="https://coq-tactician.github.io/manual/quick/" title="Quick start"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/quick/">Quick start</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/installation/" title="Installation"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/installation/">Installation</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/usage/" title="Usage"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/usage/">Usage</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/coq-packages/" title="Coq packages"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/coq-packages/">Coq packages</a>
  
  


    
  </ul>
</li>



          
          
          
          
          
          
          
          
          
          
          
          








<li data-nav-id="https://coq-tactician.github.io/api/" title="API"
  class="sidelist parent ">
  <a href="https://coq-tactician.github.io/api/">API</a>
  
  
  <ul>
    
    
    

    
    








<li data-nav-id="https://coq-tactician.github.io/api/introduction/" title="API Introduction"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/introduction/">API Introduction</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/graph2tac/" title="Graph2Tac &amp; Text2Tac"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/graph2tac/">Graph2Tac &amp; Text2Tac</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/commands/" title="Coq Commands"
  class="sidelist  active">
  <a href="https://coq-tactician.github.io/api/commands/">Coq Commands</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/pytactician/" title="PyTactician"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/pytactician/">PyTactician</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/datasets/" title="Datasets"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/datasets/">Datasets</a>
  
  


    
  </ul>
</li>



          
          
        </ul>
      </div>
      <div class="col-md-8">
        <div class="px-lg-5 px-4">
          <h2 class="mb-4 font-weight-medium">Coq Commands</h2>
          
          <div class="content"><p>The package <code>coq-tactician-api</code> makes some commands available in addition to the
usual commands listed in the <a href="../../manual/usage">manual</a>. You should install
this package when you wish to build your own external agent. (Both Graph2Tac and
Text2Tac depend on this package.)</p>
<h3 id="graph-visualizations">Graph Visualizations</h3>
<p>These commands will create a graph of some object, and write it to <code>graph.pdf</code>
(if <code>graphviz</code> is available).</p>
<p>The following commands are always available:</p>
<pre tabindex="0"><code>[Shared] Graph [Depth &lt;n&gt;] Ident identifier.
[Shared] Graph [Depth &lt;n&gt;] Term term.
</code></pre><p>The normal commands print a fully transitive graph. Adding <code>Depth i</code> limits the
traversal to visiting at most <code>i</code> nested definitions.</p>
<p>Additionally, in proof mode, these commands are available:</p>
<pre tabindex="0"><code>[Shared] Graph [Depth &lt;n&gt;] Proof.
</code></pre><p>Options that modify the graphs generated by the commands above are</p>
<pre tabindex="0"><code>[Set | Unset] Tactician Neural Visualize Ordered.
[Set | Unset] Tactician Neural Visualize Labels.
[Set | Unset] Tactician Neural Visualize Hashes.
</code></pre><h3 id="interaction-with-synth">Interaction with <code>synth</code></h3>
<p>In order to connect Tactician&rsquo;s <code>synth</code> tactic to a external tactic prediction
server like the dummy <code>pytact-server</code> described provided by <a href="../pytactician">PyTactician</a>, the plugin makes a number
of commands and settings available in Coq. In order to load the plugin, Coq
needs to be started appropriately. This can be done by prefixing every
invocation of a command that uses Coq, like <code>coqc</code>, <code>coqide</code>, a <code>make</code> command
or an editor like <code>emacs</code> with <code>tactician exec</code>:</p>
<pre tabindex="0"><code>tactician exec -- coqc ...
tactician exec -- coqide ...
tactician exec -- make ...
tactician exec -- dune build ...
tactician exec -- emacs ...
</code></pre><p>To make the <code>synth</code> command available, your Coq file will have to start with</p>
<pre tabindex="0"><code>From Tactician Require Import Ltac1.
</code></pre><p>The following settings govern the data that Coq will send to the server:</p>
<ul>
<li><code>Set Tactician Neural Textmode</code> determines wether Coq is communicating with a graph-based server or a text-based server (graph-based by default).</li>
<li><code>Set Tactician Neural Metadata</code> adds text-based metadata to when communicating in graph-mode, such as
hypothesis names, textual representation of proof states and textual representations of definition.
This will slow down the communication protocol, and should only be enabled for debugging, or when otherwise needed.</li>
</ul>
<p>To let Coq take care of starting and stopping the server, use the command</p>
<pre tabindex="0"><code>Set Tactician Neural Executable &#34;external-server-executable --argument1 --argument2&#34;.
</code></pre><p>If you have a prediction server already running somewhere over TCP, you can make Coq connect to it using</p>
<pre tabindex="0"><code>Set Tactician Neural Server &#34;&lt;address&gt;:&lt;port&gt;&#34;.
</code></pre><p>At this point, you have the following commands available which will interact with the server:</p>
<ul>
<li><code>Tactician Neural Alignment</code> will ask the which tactics and definitions currently in scope are unknown to it.
This is meant as a sanity check.</li>
<li><code>Suggest</code> and <code>Debug Suggest</code> will ask the server for predictions for the current proof state.</li>
<li><code>synth</code> and <code>debug synth</code> will perform a proof search by repeatedly asking the server for predictions.</li>
<li><code>Tactician Neural Cache</code> will preemptively send a lot of required data to the prediction server and keeps that
information cached. This will make the commands above run much faster. This command can be issued multiple times
in a document, creating multiple nested caches.</li>
<li><code>Set Tactician Autocache</code> will automatically execute <code>Tactician Neural Cache</code> on each command. This is an
experimental option, and there may be some overhead associated with this.</li>
</ul>
<h3 id="client-based-proof-exploration">Client-based proof exploration</h3>
<p>Finally, the command <code>Tactician Explore.</code> will initiate a proof exploration
session. An example of this is available in
<a href="https://github.com/coq-tactician/coq-tactician-api/blob/coq8.11/pytact/tests/TestReinforceStdin.v">TestReinforceStdin.v</a>.
To do this, you need to have a python client running. An example is available in
the <code>pytact-prover</code> executable. To see how it works, run <code>pytact-prover --pdfsequence --pdfname test</code> This will execute a dummy proof through the
proof exploration interface. Visualizations of each proof state are available in
<code>test&lt;n&gt;.pdf</code>. optionally <code>--file</code> option to point to a source Coq <code>.v</code> file.
Also with <code>--interactive</code> option the interactive shell appears where you can
manually interact with the environment. Whenever a tactic is executed, the
resulting proof state if visualized in the file <code>python_graph.pdf</code>.</p>
</div>
          
          
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->





<footer>
  <div class="container">
    <div class="row align-items-center border-bottom py-5">
      <div class="col-lg-4">
        <ul class="list-inline footer-menu text-center text-lg-left">
          
        </ul>
      </div>
      <div class="col-lg-4 text-center mb-4 mb-lg-0">
        <a class="navbar-brand" href="/">
          <img class="img-fluid" src="https://coq-tactician.github.io/images/logo.png" alt="Tactician">
          Tactician
        </a>
      </div>
      <div class="col-lg-4">
        <ul class="list-inline social-icons text-lg-right text-center">
          
        </ul>
      </div>
    </div>
    <div class="py-4 text-center">
      <small class="text-light"></small>
    </div>
  </div>
</footer>


<script type="text/javascript">
  var indexURL = "https://coq-tactician.github.io/index.json";
  
  var baseurl = "https:\/\/coq-tactician.github.io\/";
  
</script>





<script src="https://coq-tactician.github.io/plugins/jQuery/jquery.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/bootstrap/bootstrap.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/masonry/masonry.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/featherlight/featherlight.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/clipboard/clipboard.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/match-height/jquery.matchHeight-min.js" ></script>





<script src="https://coq-tactician.github.io/js/script.min.js"></script>
</body>

</html>
