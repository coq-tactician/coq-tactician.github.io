<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>API Introduction</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="description" content="Tactician">
  
  <meta name="generator" content="Hugo 0.140.1">

  
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/bootstrap/bootstrap.min.css" media='screen'>
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/themify-icons/themify-icons.css" >
  
  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/plugins/featherlight/featherlight.min.css" >
  
  

  
  
  <link rel="stylesheet" href="https://coq-tactician.github.io/scss/style.css" media="screen">

  
  <link rel="shortcut icon" href="https://coq-tactician.github.io/images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="https://coq-tactician.github.io/images/favicon.ico" type="image/x-icon">

  
  

  
  <meta property="og:url" content="https://coq-tactician.github.io/api/introduction/">
  <meta property="og:site_name" content="Tactician">
  <meta property="og:title" content="API Introduction">
  <meta property="og:description" content="Tactician’s API provides external machine learning agents with Coq’s internal knowledge-base of mathematics. It can extract large-scale datasets from a wide variety of Coq packages for the purpose of offline machine learning. Additionally, it allows agents to interact with Coq. Proving servers can be connected to Tactician’s synth tactic and prove theorems for Coq users. Additionally, servers can do proof exploration through the Tactician Explore command. Examples of external proving agents include Graph2Tac &amp; Text2Tac.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="api">


</head>
<body><!-- navigation -->
<header class="sticky-top navigation ">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-transparent">
      <a class="navbar-brand" href="/">
        <img class="img-fluid" src="https://coq-tactician.github.io/images/logo.png" alt="Tactician">
        Tactician
      </a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h4 text-dark"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav mx-auto align-items-center">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/manual/quick">Manual</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/api/introduction">API</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/publications">Publications</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/people">People</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://coq-tactician.github.io/demo.html">Demo</a>
          </li>
          
          
          <li class="nav-link">
            
            
          </li>
        </ul>

        
        <div class="d-lg-none d-block">
          
          <a href="https://github.com/coq-tactician"
            class="btn btn-sm btn-outline-primary ml-lg-4">Github</a>
          
          <a href="https://coq-tactician.github.io/changelog"
            class="btn btn-sm btn-primary ml-lg-4">changelog</a>
          
        </div>
        
      </div>

      

      
      <div class="d-lg-flex d-none">
        
        <a href="https://github.com/coq-tactician"
          class="btn btn-sm btn-outline-primary ml-lg-4">Github</a>
        
        <a href="https://coq-tactician.github.io/changelog"
          class="btn btn-sm btn-primary ml-lg-4">changelog</a>
        
      </div>
      
    </nav>
  </div>
</header>
<!-- /navigation -->


<!-- details page -->
<section class="pt-5">
  <div class="container shadow section-sm rounded">
    <div class="row">
      <div class="col-lg-3 col-md-4 d-none d-md-block">
        <ul class="sidenav">
          
          
          
          
          
          
          








<li data-nav-id="https://coq-tactician.github.io/manual/" title="Manual"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/">Manual</a>
  
  
  <ul>
    
    
    

    
    








<li data-nav-id="https://coq-tactician.github.io/manual/quick/" title="Quick start"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/quick/">Quick start</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/installation/" title="Installation"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/installation/">Installation</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/usage/" title="Usage"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/usage/">Usage</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/manual/coq-packages/" title="Coq packages"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/manual/coq-packages/">Coq packages</a>
  
  


    
  </ul>
</li>



          
          
          
          
          
          
          
          
          
          
          
          








<li data-nav-id="https://coq-tactician.github.io/api/" title="API"
  class="sidelist parent ">
  <a href="https://coq-tactician.github.io/api/">API</a>
  
  
  <ul>
    
    
    

    
    








<li data-nav-id="https://coq-tactician.github.io/api/introduction/" title="API Introduction"
  class="sidelist  active">
  <a href="https://coq-tactician.github.io/api/introduction/">API Introduction</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/graph2tac/" title="Graph2Tac &amp; Text2Tac"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/graph2tac/">Graph2Tac &amp; Text2Tac</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/commands/" title="Coq Commands"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/commands/">Coq Commands</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/pytactician/" title="PyTactician"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/pytactician/">PyTactician</a>
  
  


    
    








<li data-nav-id="https://coq-tactician.github.io/api/datasets/" title="Datasets"
  class="sidelist  ">
  <a href="https://coq-tactician.github.io/api/datasets/">Datasets</a>
  
  


    
  </ul>
</li>



          
          
        </ul>
      </div>
      <div class="col-md-8">
        <div class="px-lg-5 px-4">
          <h2 class="mb-4 font-weight-medium">API Introduction</h2>
          
          <div class="content"><img src="/images/web.png" alt="Web" width="100%"/>
<p>Tactician&rsquo;s API provides external machine learning agents with Coq&rsquo;s internal
knowledge-base of mathematics. It can extract large-scale datasets from a wide
variety of Coq packages for the purpose of offline machine learning.
Additionally, it allows agents to interact with Coq. Proving servers can be
connected to Tactician&rsquo;s <code>synth</code> tactic and prove theorems for Coq users.
Additionally, servers can do proof exploration through the <code>Tactician Explore</code>
command. Examples of external proving agents include <a href="../graph2tac">Graph2Tac &amp; Text2Tac</a>.</p>
<p>The data provided to agents includes definitions, theorems, proof terms and a
machine-readable representation of tactical proofs. The data is provided both in
Coq&rsquo;s standard text-based human-readable format and as a semantic graph. The
semantic graph is a single interconnected object that includes the entire
mathematical universe known to Coq (at a given moment in time). As such, it
provides external agents with &ldquo;complete information&rdquo; of Coq&rsquo;s internal state,
instead of &ldquo;incomplete information&rdquo;. The agent does not need to query Coq for
information about theorems or definitions, because it has an always-up-to-date
view.</p>
<p>The graph is designed to represent the semantic meaning of a mathematical object
as faithfully as possible, minimizing the amount of implicit knowledge needed to
interpret the object. For example, when a definition <code>X</code> refers to another
definition <code>Y</code>, such a dependency is encoded explicitly using an edge in the
graph. No definition lookup table is need. We also shy away from using names or
de Bruijn indices as variables. Instead, variables point directly to their
binders, so that name lookup becomes a trivial operation. Such an encoding
reduces alpha-equivalence between terms to the graph-theoretic notion of
bisimilarity, and allows us to globally deduplicate any alpha-equivalent terms
in the graph.</p>
<p>A simple example of the semantic graph is shown below. An entire Coq document is
converted into a single graph. Alpha-equivalent sub-terms, such as <code>2*</code> are
globally shared. The graph includes all transitive objects referenced by
the document, such as <code>nat</code>, <code>=</code>, <code>+</code> and <code>*</code> (shown with a truncated tree here).</p>
<img src="/images/web-example.svg" alt="Web example" style="display:block; margin-left: auto; margin-right: auto" width="90%"/>
<p>A zoomed-out view of the graph is visualized on the top of this page. This graph
contains all information encoded in Coq&rsquo;s Prelude. See the
<a href="https://arxiv.org/abs/2401.02950">paper</a> for details on the construction of the
graph.</p>
<p>Communication with agents happens through the <a href="https://capnproto.org">Cap&rsquo;n
Proto</a> serialization format and remote procedure calling
(RPC) protocol. It supports a wide variety of programming languages, including
Python, OCaml, C++, Haskell, Rust and more. This serialization was chosen
because it allows us to memory-map (<code>mmap</code>) large graph datasets, allowing fast
random-access to graphs that may not fit into main memory. Furthermore, Cap&rsquo;n
Proto&rsquo;s RPC protocol, based on the <a href="https://en.wikipedia.org/wiki/Distributed_object">distributed
object-capability</a> model,
allows us to export Coq&rsquo;s proof states to external agents. Agents can inspect
the proof states, and execute tactics on them, allowing exploration of the proof
search space in arbitrary order.</p>
<h3 id="overview-of-the-platform">Overview of the platform</h3>
<p>Tactician&rsquo;s API is meant to provide a bridge between the machine learning
community and the proof engineering community. On the one hand, ML researchers
can leverage the formal knowledge generated by proof engineers to build, train
and evaluate agents. In return, these agents can be provided to proof engineers
to assist them in synthesizing more formal knowledge. Agents can be integrated
into the day-to-day workflow of proving and programming in Coq.</p>
<p>Components include:</p>
<ul>
<li><strong><a href="../graph2tac">Graph2Tac &amp; Text2Tac</a></strong>: Pre-trained models that can make tactic predictions and integrate with Tactician&rsquo;s <code>synth</code> command. The first model uses the graph-based representation while the second model uses human-readable text.</li>
<li><strong><a href="../datasets">Datasets</a></strong>: Pre-made, large-scale datasets of formal
knowledge extracted from a variety of Coq developments. Interactively explore
the dataset <a href="http://grid01.ciirc.cvut.cz:8080/">here</a>. The dataset includes <a href="http://grid01.ciirc.cvut.cz:8080/coq-tactician-stdlib.8.11.dev/theories/Init">hierarchies</a> of modules, <a href="http://grid01.ciirc.cvut.cz:8080/coq-tactician-stdlib.8.11.dev/theories/Init/Logic/context">global context</a> information, <a href="http://grid01.ciirc.cvut.cz:8080/coq-tactician-stdlib.8.11.dev/theories/Init/Logic/definition/36">definitions</a>, <a href="http://grid01.ciirc.cvut.cz:8080/coq-tactician-stdlib.8.11.dev/theories/Init/Logic/definition/36/proof">tactical proofs</a> and tactic <a href="http://grid01.ciirc.cvut.cz:8080/coq-tactician-stdlib.8.11.dev/theories/Init/Logic/definition/36/proof/step/4/outcome/0">proof transformations</a>.</li>
<li><strong><a href="../commands">Coq Commands</a></strong>: Outlines the commands added to Tactician by
the package <code>coq-tactician-api</code> for the purpose of interacting with external
agents.</li>
<li><strong><a href="../pytactician">PyTactician</a></strong>: A Python library build on top of Cap&rsquo;n
Proto to facilitate reading the dataset and interface with Coq.</li>
<li><strong><a href="https://github.com/coq-tactician/benchmark-system">Benchmarking</a></strong>: Tools
to evaluate the proving strength of agents on arbitrary Opam packages.
Benchmarks can be run on a laptop, a high-powered server and even massively
parallelized on a High Perfomance Computing (HPC) cluster.</li>
</ul>
</div>
          
          
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->





<footer>
  <div class="container">
    <div class="row align-items-center border-bottom py-5">
      <div class="col-lg-4">
        <ul class="list-inline footer-menu text-center text-lg-left">
          
        </ul>
      </div>
      <div class="col-lg-4 text-center mb-4 mb-lg-0">
        <a class="navbar-brand" href="/">
          <img class="img-fluid" src="https://coq-tactician.github.io/images/logo.png" alt="Tactician">
          Tactician
        </a>
      </div>
      <div class="col-lg-4">
        <ul class="list-inline social-icons text-lg-right text-center">
          
        </ul>
      </div>
    </div>
    <div class="py-4 text-center">
      <small class="text-light"></small>
    </div>
  </div>
</footer>


<script type="text/javascript">
  var indexURL = "https://coq-tactician.github.io/index.json";
  
  var baseurl = "https:\/\/coq-tactician.github.io\/";
  
</script>





<script src="https://coq-tactician.github.io/plugins/jQuery/jquery.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/bootstrap/bootstrap.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/masonry/masonry.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/featherlight/featherlight.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/clipboard/clipboard.min.js" ></script>



<script src="https://coq-tactician.github.io/plugins/match-height/jquery.matchHeight-min.js" ></script>





<script src="https://coq-tactician.github.io/js/script.min.js"></script>
</body>

</html>
